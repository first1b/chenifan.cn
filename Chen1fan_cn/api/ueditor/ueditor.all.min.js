/*!
 * UEditor
 * version: ueditor xunruicms fix
 */
if("undefined"==typeof uedtiro_baidumap_ak)var uedtiro_baidumap_ak="";if("undefined"==typeof ueditor_lang)var ueditor_lang={labelMap:{anchor:"\u951a\u70b9",undo:"\u64a4\u9500",redo:"\u91cd\u505a",bold:"\u52a0\u7c97",indent:"\u9996\u884c\u7f29\u8fdb",snapscreen:"\u622a\u56fe",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",strikethrough:"\u5220\u9664\u7ebf",subscript:"\u4e0b\u6807",fontborder:"\u5b57\u7b26\u8fb9\u6846",superscript:"\u4e0a\u6807",formatmatch:"\u683c\u5f0f\u5237",source:"\u6e90\u4ee3\u7801",blockquote:"\u5f15\u7528",pasteplain:"\u7eaf\u6587\u672c\u7c98\u8d34\u6a21\u5f0f",selectall:"\u5168\u9009",print:"\u6253\u5370",preview:"\u9884\u89c8",horizontal:"\u5206\u9694\u7ebf",removeformat:"\u6e05\u9664\u683c\u5f0f",time:"\u65f6\u95f4",date:"\u65e5\u671f",unlink:"\u53d6\u6d88\u94fe\u63a5",insertrow:"\u524d\u63d2\u5165\u884c",insertcol:"\u524d\u63d2\u5165\u5217",mergeright:"\u53f3\u5408\u5e76\u5355\u5143\u683c",mergedown:"\u4e0b\u5408\u5e76\u5355\u5143\u683c",deleterow:"\u5220\u9664\u884c",deletecol:"\u5220\u9664\u5217",splittorows:"\u62c6\u5206\u6210\u884c",splittocols:"\u62c6\u5206\u6210\u5217",splittocells:"\u5b8c\u5168\u62c6\u5206\u5355\u5143\u683c",deletecaption:"\u5220\u9664\u8868\u683c\u6807\u9898",inserttitle:"\u63d2\u5165\u6807\u9898",mergecells:"\u5408\u5e76\u591a\u4e2a\u5355\u5143\u683c",deletetable:"\u5220\u9664\u8868\u683c",cleardoc:"\u6e05\u7a7a\u6587\u6863",insertparagraphbeforetable:"\u8868\u683c\u524d\u63d2\u5165\u884c",insertcode:"\u4ee3\u7801\u8bed\u8a00",fontfamily:"\u5b57\u4f53",fontsize:"\u5b57\u53f7",paragraph:"\u6bb5\u843d\u683c\u5f0f",simpleupload:"\u5355\u56fe\u4e0a\u4f20",insertimage:"\u591a\u56fe\u4e0a\u4f20",edittable:"\u8868\u683c\u5c5e\u6027",edittd:"\u5355\u5143\u683c\u5c5e\u6027",link:"\u8d85\u94fe\u63a5",emotion:"\u8868\u60c5",spechars:"\u7279\u6b8a\u5b57\u7b26",searchreplace:"\u67e5\u8be2\u66ff\u6362",map:"Baidu\u5730\u56fe",gmap:"Google\u5730\u56fe",insertvideo:"\u89c6\u9891",help:"\u5e2e\u52a9",justifyleft:"\u5c45\u5de6\u5bf9\u9f50",justifyright:"\u5c45\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d\u5bf9\u9f50",justifyjustify:"\u4e24\u7aef\u5bf9\u9f50",forecolor:"\u5b57\u4f53\u989c\u8272",backcolor:"\u80cc\u666f\u8272",insertorderedlist:"\u6709\u5e8f\u5217\u8868",insertunorderedlist:"\u65e0\u5e8f\u5217\u8868",fullscreen:"\u5168\u5c4f",directionalityltr:"\u4ece\u5de6\u5411\u53f3\u8f93\u5165",directionalityrtl:"\u4ece\u53f3\u5411\u5de6\u8f93\u5165",rowspacingtop:"\u6bb5\u524d\u8ddd",rowspacingbottom:"\u6bb5\u540e\u8ddd",pagebreak:"\u5206\u9875",insertframe:"\u63d2\u5165Iframe",imagenone:"\u9ed8\u8ba4",imageleft:"\u5de6\u6d6e\u52a8",imageright:"\u53f3\u6d6e\u52a8",attachment:"\u9644\u4ef6",imagecenter:"\u5c45\u4e2d",wordimage:"\u56fe\u7247\u8f6c\u5b58",lineheight:"\u884c\u95f4\u8ddd",edittip:"\u7f16\u8f91\u63d0\u793a",customstyle:"\u81ea\u5b9a\u4e49\u6807\u9898",autotypeset:"\u81ea\u52a8\u6392\u7248",webapp:"\u767e\u5ea6\u5e94\u7528",touppercase:"\u5b57\u6bcd\u5927\u5199",tolowercase:"\u5b57\u6bcd\u5c0f\u5199",background:"\u80cc\u666f",template:"\u6a21\u677f",scrawl:"\u6d82\u9e26",music:"\u97f3\u4e50",inserttable:"\u63d2\u5165\u8868\u683c",drafts:"\u5728\u5c3e\u90e8\u63d2\u5165\u6362\u884c\u6807\u7b7e",charts:"\u56fe\u8868"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"\u4e00,\u4e8c,\u4e09....",cn1:"\u4e00),\u4e8c),\u4e09)....",cn2:"(\u4e00),(\u4e8c),(\u4e09)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"\u25cb \u5927\u5706\u5708",disc:"\u25cf \u5c0f\u9ed1\u70b9",square:"\u25a0 \u5c0f\u65b9\u5757 ",dash:"\u2014 \u7834\u6298\u53f7",dot:" \u3002 \u5c0f\u5706\u5708"},paragraph:{p:"\u6bb5\u843d",h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",h5:"\u6807\u9898 5",h6:"\u6807\u9898 6"},fontfamily:{songti:"\u5b8b\u4f53",kaiti:"\u6977\u4f53",heiti:"\u9ed1\u4f53",lishu:"\u96b6\u4e66",yahei:"\u5fae\u8f6f\u96c5\u9ed1",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"\u6807\u9898\u5c45\u4e2d",tl:"\u6807\u9898\u5c45\u5de6",im:"\u5f3a\u8c03",hi:"\u660e\u663e\u5f3a\u8c03"},autoupload:{exceedSizeError:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236",exceedTypeError:"\u6587\u4ef6\u683c\u5f0f\u4e0d\u5141\u8bb8",jsonEncodeError:"\u670d\u52a1\u5668\u8fd4\u56de\u683c\u5f0f\u9519\u8bef",loading:"\u6b63\u5728\u4e0a\u4f20...",loadError:"\u4e0a\u4f20\u9519\u8bef",errorLoadConfig:"\u540e\u7aef\u914d\u7f6e\u9879\u6ca1\u6709\u6b63\u5e38\u52a0\u8f7d\uff0c\u4e0a\u4f20\u63d2\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01"},simpleupload:{exceedSizeError:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236",exceedTypeError:"\u6587\u4ef6\u683c\u5f0f\u4e0d\u5141\u8bb8",jsonEncodeError:"\u670d\u52a1\u5668\u8fd4\u56de\u683c\u5f0f\u9519\u8bef",loading:"\u6b63\u5728\u4e0a\u4f20...",loadError:"\u4e0a\u4f20\u9519\u8bef",errorLoadConfig:"\u540e\u7aef\u914d\u7f6e\u9879\u6ca1\u6709\u6b63\u5e38\u52a0\u8f7d\uff0c\u4e0a\u4f20\u63d2\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01"},elementPathTip:"\u5143\u7d20\u8def\u5f84",wordCountTip:"\u5b57\u6570\u7edf\u8ba1",wordCountMsg:"\u5f53\u524d\u5df2\u8f93\u5165{#count}\u4e2a\u5b57\u7b26, \u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165{#leave}\u4e2a\u5b57\u7b26\u3002 ",wordOverFlowMsg:'\x3cspan style\x3d"color:red;"\x3e\u5b57\u6570\u8d85\u51fa\u6700\u5927\u5141\u8bb8\u503c\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u62d2\u7edd\u4fdd\u5b58\uff01\x3c/span\x3e',ok:"\u786e\u8ba4",cancel:"\u53d6\u6d88",closeDialog:"\u5173\u95ed\u5bf9\u8bdd\u6846",tableDrag:"\u8868\u683c\u62d6\u52a8\u5fc5\u987b\u5f15\u5165uiUtils.js\u6587\u4ef6\uff01",autofloatMsg:"\u5de5\u5177\u680f\u6d6e\u52a8\u4f9d\u8d56\u7f16\u8f91\u5668UI\uff0c\u60a8\u9996\u5148\u9700\u8981\u5f15\u5165UI\u6587\u4ef6!",loadconfigError:"\u83b7\u53d6\u540e\u53f0\u914d\u7f6e\u9879\u8bf7\u6c42\u51fa\u9519\uff0c\u4e0a\u4f20\u529f\u80fd\u5c06\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",loadconfigFormatError:"\u540e\u53f0\u914d\u7f6e\u9879\u8fd4\u56de\u683c\u5f0f\u51fa\u9519\uff0c\u4e0a\u4f20\u529f\u80fd\u5c06\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",loadconfigHttpError:"\u8bf7\u6c42\u540e\u53f0\u914d\u7f6e\u9879http\u9519\u8bef\uff0c\u4e0a\u4f20\u529f\u80fd\u5c06\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",snapScreen_plugin:{browserMsg:"\u4ec5\u652f\u6301IE\u6d4f\u89c8\u5668\uff01",callBackErrorMsg:"\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u6709\u8bef\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e\u9879\u4e4b\u540e\u91cd\u8bd5\u3002",uploadErrorMsg:"\u622a\u56fe\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7aef\u73af\u5883! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6587\u6863\u4e48\uff1f",contextMenu:{"delete":"\u5220\u9664",selectall:"\u5168\u9009",deletecode:"\u5220\u9664\u4ee3\u7801",cleardoc:"\u6e05\u7a7a\u6587\u6863",confirmclear:"\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6587\u6863\u4e48\uff1f",unlink:"\u5220\u9664\u8d85\u94fe\u63a5",paragraph:"\u6bb5\u843d\u683c\u5f0f",edittable:"\u8868\u683c\u5c5e\u6027",aligntd:"\u5355\u5143\u683c\u5bf9\u9f50\u65b9\u5f0f",aligntable:"\u8868\u683c\u5bf9\u9f50\u65b9\u5f0f",tableleft:"\u5de6\u6d6e\u52a8",tablecenter:"\u5c45\u4e2d\u663e\u793a",tableright:"\u53f3\u6d6e\u52a8",edittd:"\u5355\u5143\u683c\u5c5e\u6027",setbordervisible:"\u8bbe\u7f6e\u8868\u683c\u8fb9\u7ebf\u53ef\u89c1",justifyleft:"\u5de6\u5bf9\u9f50",justifyright:"\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d\u5bf9\u9f50",justifyjustify:"\u4e24\u7aef\u5bf9\u9f50",table:"\u8868\u683c",inserttable:"\u63d2\u5165\u8868\u683c",deletetable:"\u5220\u9664\u8868\u683c",insertparagraphbefore:"\u524d\u63d2\u5165\u6bb5\u843d",insertparagraphafter:"\u540e\u63d2\u5165\u6bb5\u843d",deleterow:"\u5220\u9664\u5f53\u524d\u884c",deletecol:"\u5220\u9664\u5f53\u524d\u5217",insertrow:"\u524d\u63d2\u5165\u884c",insertcol:"\u5de6\u63d2\u5165\u5217",insertrownext:"\u540e\u63d2\u5165\u884c",insertcolnext:"\u53f3\u63d2\u5165\u5217",insertcaption:"\u63d2\u5165\u8868\u683c\u540d\u79f0",deletecaption:"\u5220\u9664\u8868\u683c\u540d\u79f0",inserttitle:"\u63d2\u5165\u8868\u683c\u6807\u9898\u884c",deletetitle:"\u5220\u9664\u8868\u683c\u6807\u9898\u884c",inserttitlecol:"\u63d2\u5165\u8868\u683c\u6807\u9898\u5217",deletetitlecol:"\u5220\u9664\u8868\u683c\u6807\u9898\u5217",averageDiseRow:"\u5e73\u5747\u5206\u5e03\u5404\u884c",averageDisCol:"\u5e73\u5747\u5206\u5e03\u5404\u5217",mergeright:"\u5411\u53f3\u5408\u5e76",mergeleft:"\u5411\u5de6\u5408\u5e76",mergedown:"\u5411\u4e0b\u5408\u5e76",mergecells:"\u5408\u5e76\u5355\u5143\u683c",splittocells:"\u5b8c\u5168\u62c6\u5206\u5355\u5143\u683c",splittocols:"\u62c6\u5206\u6210\u5217",splittorows:"\u62c6\u5206\u6210\u884c",tablesort:"\u8868\u683c\u6392\u5e8f",enablesort:"\u8bbe\u7f6e\u8868\u683c\u53ef\u6392\u5e8f",disablesort:"\u53d6\u6d88\u8868\u683c\u53ef\u6392\u5e8f",reversecurrent:"\u9006\u5e8f\u5f53\u524d",orderbyasc:"\u6309ASCII\u5b57\u7b26\u5347\u5e8f",reversebyasc:"\u6309ASCII\u5b57\u7b26\u964d\u5e8f",orderbynum:"\u6309\u6570\u503c\u5927\u5c0f\u5347\u5e8f",reversebynum:"\u6309\u6570\u503c\u5927\u5c0f\u964d\u5e8f",borderbk:"\u8fb9\u6846\u5e95\u7eb9",setcolor:"\u8868\u683c\u9694\u884c\u53d8\u8272",unsetcolor:"\u53d6\u6d88\u8868\u683c\u9694\u884c\u53d8\u8272",setbackground:"\u9009\u533a\u80cc\u666f\u9694\u884c",unsetbackground:"\u53d6\u6d88\u9009\u533a\u80cc\u666f",redandblue:"\u7ea2\u84dd\u76f8\u95f4",threecolorgradient:"\u4e09\u8272\u6e10\u53d8",copy:"\u590d\u5236(Ctrl + c)",copymsg:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301,\u8bf7\u4f7f\u7528 'Ctrl + c'",paste:"\u7c98\u8d34(Ctrl + v)",pastemsg:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301,\u8bf7\u4f7f\u7528 'Ctrl + v'"},copymsg:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301,\u8bf7\u4f7f\u7528 'Ctrl + c'",pastemsg:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301,\u8bf7\u4f7f\u7528 'Ctrl + v'",anthorMsg:"\u94fe\u63a5",clearColor:"\u6e05\u7a7a\u989c\u8272",standardColor:"\u6807\u51c6\u989c\u8272",themeColor:"\u4e3b\u9898\u989c\u8272",property:"\u5c5e\u6027","default":"\u9ed8\u8ba4",modify:"\u4fee\u6539",justifyleft:"\u5de6\u5bf9\u9f50",justifyright:"\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justify:"\u9ed8\u8ba4",clear:"\u6e05\u9664",anchorMsg:"\u951a\u70b9","delete":"\u5220\u9664",clickToUpload:"\u70b9\u51fb\u4e0a\u4f20",unset:"\u5c1a\u672a\u8bbe\u7f6e\u8bed\u8a00\u6587\u4ef6",t_row:"\u884c",t_col:"\u5217",more:"\u66f4\u591a",pasteOpt:"\u7c98\u8d34\u9009\u9879",pasteSourceFormat:"\u4fdd\u7559\u6e90\u683c\u5f0f",tagFormat:"\u53ea\u4fdd\u7559\u6807\u7b7e",pasteTextFormat:"\u53ea\u4fdd\u7559\u6587\u672c",autoTypeSet:{mergeLine:"\u5408\u5e76\u7a7a\u884c",delLine:"\u6e05\u9664\u7a7a\u884c",removeFormat:"\u6e05\u9664\u683c\u5f0f",indent:"\u9996\u884c\u7f29\u8fdb",alignment:"\u5bf9\u9f50\u65b9\u5f0f",imageFloat:"\u56fe\u7247\u6d6e\u52a8",removeFontsize:"\u6e05\u9664\u5b57\u53f7",removeFontFamily:"\u6e05\u9664\u5b57\u4f53",removeHtml:"\u6e05\u9664\u5197\u4f59HTML\u4ee3\u7801",pasteFilter:"\u7c98\u8d34\u8fc7\u6ee4",run:"\u6267\u884c",symbol:"\u7b26\u53f7\u8f6c\u6362",bdc2sb:"\u5168\u89d2\u8f6c\u534a\u89d2",tobdc:"\u534a\u89d2\u8f6c\u5168\u89d2"},background:{"static":{lang_background_normal:"\u80cc\u666f\u8bbe\u7f6e",lang_background_local:"\u5728\u7ebf\u56fe\u7247",lang_background_set:"\u9009\u9879",lang_background_none:"\u65e0\u80cc\u666f\u8272",lang_background_colored:"\u6709\u80cc\u666f\u8272",lang_background_color:"\u989c\u8272\u8bbe\u7f6e",lang_background_netimg:"\u7f51\u7edc\u56fe\u7247",lang_background_align:"\u5bf9\u9f50\u65b9\u5f0f",lang_background_position:"\u7cbe\u786e\u5b9a\u4f4d",repeatType:{options:["\u5c45\u4e2d","\u6a2a\u5411\u91cd\u590d","\u7eb5\u5411\u91cd\u590d","\u5e73\u94fa","\u81ea\u5b9a\u4e49"]}},noUploadImage:"\u5f53\u524d\u672a\u4e0a\u4f20\u8fc7\u4efb\u4f55\u56fe\u7247\uff01",toggleSelect:"\u5355\u51fb\u53ef\u5207\u6362\u9009\u4e2d\u72b6\u6001\n\u539f\u56fe\u5c3a\u5bf8: "},insertimage:{"static":{lang_tab_remote:"\u63d2\u5165\u56fe\u7247",lang_tab_upload:"\u672c\u5730\u4e0a\u4f20",lang_tab_online:"\u5728\u7ebf\u7ba1\u7406",lang_tab_search:"\u56fe\u7247\u641c\u7d22",lang_input_url:"\u5730 \u5740\uff1a",lang_input_size:"\u5927 \u5c0f\uff1a",lang_input_width:"\u5bbd\u5ea6",lang_input_height:"\u9ad8\u5ea6",lang_input_border:"\u8fb9 \u6846\uff1a",lang_input_vhspace:"\u8fb9 \u8ddd\uff1a",lang_input_title:"\u63cf \u8ff0\uff1a",lang_input_align:"\u56fe\u7247\u6d6e\u52a8\u65b9\u5f0f\uff1a",lang_imgLoading:"\u3000\u56fe\u7247\u52a0\u8f7d\u4e2d\u2026\u2026",lang_start_upload:"\u5f00\u59cb\u4e0a\u4f20",lock:{title:"\u9501\u5b9a\u5bbd\u9ad8\u6bd4\u4f8b"},searchType:{title:"\u56fe\u7247\u7c7b\u578b",options:["\u65b0\u95fb","\u58c1\u7eb8","\u8868\u60c5","\u5934\u50cf"]},searchTxt:{value:"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd"},searchBtn:{value:"\u767e\u5ea6\u4e00\u4e0b"},searchReset:{value:"\u6e05\u7a7a\u641c\u7d22"},noneAlign:{title:"\u65e0\u6d6e\u52a8"},leftAlign:{title:"\u5de6\u6d6e\u52a8"},rightAlign:{title:"\u53f3\u6d6e\u52a8"},centerAlign:{title:"\u5c45\u4e2d\u72ec\u5360\u4e00\u884c"}},uploadSelectFile:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",uploadAddFile:"\u7ee7\u7eed\u6dfb\u52a0",uploadStart:"\u5f00\u59cb\u4e0a\u4f20",uploadPause:"\u6682\u505c\u4e0a\u4f20",uploadContinue:"\u7ee7\u7eed\u4e0a\u4f20",uploadRetry:"\u91cd\u8bd5\u4e0a\u4f20",uploadDelete:"\u5220\u9664",uploadTurnLeft:"\u5411\u5de6\u65cb\u8f6c",uploadTurnRight:"\u5411\u53f3\u65cb\u8f6c",uploadPreview:"\u9884\u89c8\u4e2d",uploadNoPreview:"\u4e0d\u80fd\u9884\u89c8",updateStatusReady:"\u9009\u4e2d_\u5f20\u56fe\u7247\uff0c\u5171_KB\u3002",updateStatusConfirm:"\u5df2\u6210\u529f\u4e0a\u4f20_\u5f20\u7167\u7247\uff0c_\u5f20\u7167\u7247\u4e0a\u4f20\u5931\u8d25",updateStatusFinish:"\u5171_\u5f20\uff08_KB\uff09\uff0c_\u5f20\u4e0a\u4f20\u6210\u529f",updateStatusError:"\uff0c_\u5f20\u4e0a\u4f20\u5931\u8d25\u3002",errorNotSupport:"WebUploader \u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fIE\u6d4f\u89c8\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5347\u7ea7 flash \u64ad\u653e\u5668\u3002",errorLoadConfig:"\u540e\u7aef\u914d\u7f6e\u9879\u6ca1\u6709\u6b63\u5e38\u52a0\u8f7d\uff0c\u4e0a\u4f20\u63d2\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",errorExceedSize:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa",errorFileType:"\u6587\u4ef6\u683c\u5f0f\u4e0d\u5141\u8bb8",errorInterrupt:"\u6587\u4ef6\u4f20\u8f93\u4e2d\u65ad",errorUploadRetry:"\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",errorHttp:"http\u8bf7\u6c42\u9519\u8bef",errorServerUpload:"\u670d\u52a1\u5668\u8fd4\u56de\u51fa\u9519",remoteLockError:"\u5bbd\u9ad8\u4e0d\u6b63\u786e,\u4e0d\u80fd\u6240\u5b9a\u6bd4\u4f8b",numError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6\u6216\u8005\u5bbd\u5ea6\u503c\uff01\u4f8b\u5982\uff1a123\uff0c400",imageUrlError:"\u4e0d\u5141\u8bb8\u7684\u56fe\u7247\u683c\u5f0f\u6216\u8005\u56fe\u7247\u57df\uff01",imageLoadError:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\uff01\u8bf7\u68c0\u67e5\u94fe\u63a5\u5730\u5740\u6216\u7f51\u7edc\u72b6\u6001\uff01",searchRemind:"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd",searchLoading:"\u56fe\u7247\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026",searchRetry:" :( \uff0c\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u56fe\u7247\uff01\u8bf7\u91cd\u8bd5\u4e00\u6b21\uff01"},attachment:{"static":{lang_tab_upload:"\u4e0a\u4f20\u9644\u4ef6",lang_tab_online:"\u5728\u7ebf\u9644\u4ef6",lang_start_upload:"\u5f00\u59cb\u4e0a\u4f20",lang_drop_remind:"\u53ef\u4ee5\u5c06\u6587\u4ef6\u62d6\u5230\u8fd9\u91cc\uff0c\u5355\u6b21\u6700\u591a\u53ef\u9009100\u4e2a\u6587\u4ef6"},uploadSelectFile:"\u70b9\u51fb\u9009\u62e9\u6587\u4ef6",uploadAddFile:"\u7ee7\u7eed\u6dfb\u52a0",uploadStart:"\u5f00\u59cb\u4e0a\u4f20",uploadPause:"\u6682\u505c\u4e0a\u4f20",uploadContinue:"\u7ee7\u7eed\u4e0a\u4f20",uploadRetry:"\u91cd\u8bd5\u4e0a\u4f20",uploadDelete:"\u5220\u9664",uploadTurnLeft:"\u5411\u5de6\u65cb\u8f6c",uploadTurnRight:"\u5411\u53f3\u65cb\u8f6c",uploadPreview:"\u9884\u89c8\u4e2d",updateStatusReady:"\u9009\u4e2d_\u4e2a\u6587\u4ef6\uff0c\u5171_KB\u3002",updateStatusConfirm:"\u5df2\u6210\u529f\u4e0a\u4f20_\u4e2a\u6587\u4ef6\uff0c_\u4e2a\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25",updateStatusFinish:"\u5171_\u4e2a\uff08_KB\uff09\uff0c_\u4e2a\u4e0a\u4f20\u6210\u529f",updateStatusError:"\uff0c_\u5f20\u4e0a\u4f20\u5931\u8d25\u3002",errorNotSupport:"WebUploader \u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fIE\u6d4f\u89c8\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5347\u7ea7 flash \u64ad\u653e\u5668\u3002",errorLoadConfig:"\u540e\u7aef\u914d\u7f6e\u9879\u6ca1\u6709\u6b63\u5e38\u52a0\u8f7d\uff0c\u4e0a\u4f20\u63d2\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",errorExceedSize:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa",errorFileType:"\u6587\u4ef6\u683c\u5f0f\u4e0d\u5141\u8bb8",errorInterrupt:"\u6587\u4ef6\u4f20\u8f93\u4e2d\u65ad",errorUploadRetry:"\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",errorHttp:"http\u8bf7\u6c42\u9519\u8bef",errorServerUpload:"\u670d\u52a1\u5668\u8fd4\u56de\u51fa\u9519"},insertvideo:{"static":{lang_tab_insertV:"\u63d2\u5165\u89c6\u9891",lang_tab_searchV:"\u641c\u7d22\u89c6\u9891",lang_tab_uploadV:"\u4e0a\u4f20\u89c6\u9891",lang_tab_online:"\u5728\u7ebf\u7ba1\u7406",lang_video_url:"\u89c6\u9891\u7f51\u5740",lang_video_size:"\u89c6\u9891\u5c3a\u5bf8",lang_videoW:"\u5bbd\u5ea6",lang_videoH:"\u9ad8\u5ea6",lang_alignment:"\u5bf9\u9f50\u65b9\u5f0f",videoSearchTxt:{value:"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u5b57\uff01"},videoType:{options:"\u5168\u90e8 \u70ed\u95e8 \u5a31\u4e50 \u641e\u7b11 \u4f53\u80b2 \u79d1\u6280 \u7efc\u827a".split(" ")},videoSearchBtn:{value:"\u767e\u5ea6\u4e00\u4e0b"},videoSearchReset:{value:"\u6e05\u7a7a\u7ed3\u679c"},lang_input_fileStatus:" \u5f53\u524d\u672a\u4e0a\u4f20\u6587\u4ef6",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"\u89c6\u9891\u5c3a\u5bf8",lang_upload_width:"\u5bbd\u5ea6",lang_upload_height:"\u9ad8\u5ea6",lang_upload_alignment:"\u5bf9\u9f50\u65b9\u5f0f",lang_format_advice:"\u5efa\u8bae\u4f7f\u7528mp4\u683c\u5f0f."},numError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u503c\uff0c\u5982123,400",floatLeft:"\u5de6\u6d6e\u52a8",floatRight:"\u53f3\u6d6e\u52a8",'"default"':"\u9ed8\u8ba4",block:"\u72ec\u5360\u4e00\u884c",urlError:"\u8f93\u5165\u7684\u89c6\u9891\u5730\u5740\u6709\u8bef\uff0c\u8bf7\u68c0\u67e5\u540e\u518d\u8bd5\uff01",loading:" \x26nbsp;\u89c6\u9891\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7b49\u5f85\u2026\u2026",clickToSelect:"\u70b9\u51fb\u9009\u4e2d",goToSource:"\u8bbf\u95ee\u6e90\u89c6\u9891",noVideo:" \x26nbsp; \x26nbsp;\u62b1\u6b49\uff0c\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u89c6\u9891\uff0c\u8bf7\u91cd\u8bd5\uff01",browseFiles:"\u6d4f\u89c8\u6587\u4ef6",uploadSuccess:"\u4e0a\u4f20\u6210\u529f!",delSuccessFile:"\u4ece\u6210\u529f\u961f\u5217\u4e2d\u79fb\u9664",delFailSaveFile:"\u79fb\u9664\u4fdd\u5b58\u5931\u8d25\u6587\u4ef6",statusPrompt:" \u4e2a\u6587\u4ef6\u5df2\u4e0a\u4f20\uff01 ",flashVersionError:"\u5f53\u524dFlash\u7248\u672c\u8fc7\u4f4e\uff0c\u8bf7\u66f4\u65b0FlashPlayer\u540e\u91cd\u8bd5\uff01",flashLoadingError:"Flash\u52a0\u8f7d\u5931\u8d25!\u8bf7\u68c0\u67e5\u8def\u5f84\u6216\u7f51\u7edc\u72b6\u6001",fileUploadReady:"\u7b49\u5f85\u4e0a\u4f20\u2026\u2026",delUploadQueue:"\u4ece\u4e0a\u4f20\u961f\u5217\u4e2d\u79fb\u9664",limitPrompt1:"\u5355\u6b21\u4e0d\u80fd\u9009\u62e9\u8d85\u8fc7",limitPrompt2:"\u4e2a\u6587\u4ef6\uff01\u8bf7\u91cd\u65b0\u9009\u62e9\uff01",delFailFile:"\u79fb\u9664\u5931\u8d25\u6587\u4ef6",fileSizeLimit:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff01",emptyFile:"\u7a7a\u6587\u4ef6\u65e0\u6cd5\u4e0a\u4f20\uff01",fileTypeError:"\u6587\u4ef6\u7c7b\u578b\u4e0d\u5141\u8bb8\uff01",unknownError:"\u672a\u77e5\u9519\u8bef\uff01",fileUploading:"\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7b49\u5f85\u2026\u2026",cancelUpload:"\u53d6\u6d88\u4e0a\u4f20",netError:"\u7f51\u7edc\u9519\u8bef",failUpload:"\u4e0a\u4f20\u5931\u8d25!",serverIOError:"\u670d\u52a1\u5668IO\u9519\u8bef\uff01",noAuthority:"\u65e0\u6743\u9650\uff01",fileNumLimit:"\u4e0a\u4f20\u4e2a\u6570\u9650\u5236",failCheck:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u672c\u6b21\u4e0a\u4f20\u88ab\u8df3\u8fc7\uff01",fileCanceling:"\u53d6\u6d88\u4e2d\uff0c\u8bf7\u7b49\u5f85\u2026\u2026",stopUploading:"\u4e0a\u4f20\u5df2\u505c\u6b62\u2026\u2026",uploadSelectFile:"\u70b9\u51fb\u9009\u62e9\u6587\u4ef6",uploadAddFile:"\u7ee7\u7eed\u6dfb\u52a0",uploadStart:"\u5f00\u59cb\u4e0a\u4f20",uploadPause:"\u6682\u505c\u4e0a\u4f20",uploadContinue:"\u7ee7\u7eed\u4e0a\u4f20",uploadRetry:"\u91cd\u8bd5\u4e0a\u4f20",uploadDelete:"\u5220\u9664",uploadTurnLeft:"\u5411\u5de6\u65cb\u8f6c",uploadTurnRight:"\u5411\u53f3\u65cb\u8f6c",uploadPreview:"\u9884\u89c8\u4e2d",updateStatusReady:"\u9009\u4e2d_\u4e2a\u6587\u4ef6\uff0c\u5171_KB\u3002",updateStatusConfirm:"\u6210\u529f\u4e0a\u4f20_\u4e2a\uff0c_\u4e2a\u5931\u8d25",updateStatusFinish:"\u5171_\u4e2a(_KB)\uff0c_\u4e2a\u6210\u529f\u4e0a\u4f20",updateStatusError:"\uff0c_\u5f20\u4e0a\u4f20\u5931\u8d25\u3002",errorNotSupport:"WebUploader \u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fIE\u6d4f\u89c8\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5347\u7ea7 flash \u64ad\u653e\u5668\u3002",errorLoadConfig:"\u540e\u7aef\u914d\u7f6e\u9879\u6ca1\u6709\u6b63\u5e38\u52a0\u8f7d\uff0c\u4e0a\u4f20\u63d2\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\uff01",errorExceedSize:"\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa",errorFileType:"\u6587\u4ef6\u683c\u5f0f\u4e0d\u5141\u8bb8",errorInterrupt:"\u6587\u4ef6\u4f20\u8f93\u4e2d\u65ad",errorUploadRetry:"\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",errorHttp:"http\u8bf7\u6c42\u9519\u8bef",errorServerUpload:"\u670d\u52a1\u5668\u8fd4\u56de\u51fa\u9519"},webapp:{tip1:"\u672c\u529f\u80fd\u7531\u767e\u5ea6APP\u63d0\u4f9b\uff0c\u5982\u770b\u5230\u6b64\u9875\u9762\uff0c\u8bf7\u5404\u4f4d\u7ad9\u957f\u9996\u5148\u7533\u8bf7\u767e\u5ea6APPKey!",tip2:"\u7533\u8bf7\u5b8c\u6210\u4e4b\u540e\u8bf7\u81f3ueditor.config.js\u4e2d\u914d\u7f6e\u83b7\u5f97\u7684appkey! ",applyFor:"\u70b9\u6b64\u7533\u8bf7",anthorApi:"\u767e\u5ea6API"},template:{"static":{lang_template_bkcolor:"\u80cc\u666f\u989c\u8272",lang_template_clear:"\u4fdd\u7559\u539f\u6709\u5185\u5bb9",lang_template_select:"\u9009\u62e9\u6a21\u677f"},blank:"\u7a7a\u767d\u6587\u6863",blog:"\u535a\u5ba2\u6587\u7ae0",resume:"\u4e2a\u4eba\u7b80\u5386",richText:"\u56fe\u6587\u6df7\u6392",sciPapers:"\u79d1\u6280\u8bba\u6587"},scrawl:{"static":{lang_input_previousStep:"\u4e0a\u4e00\u6b65",lang_input_nextsStep:"\u4e0b\u4e00\u6b65",lang_input_clear:"\u6e05\u7a7a",lang_input_addPic:"\u6dfb\u52a0\u80cc\u666f",lang_input_ScalePic:"\u7f29\u653e\u80cc\u666f",lang_input_removePic:"\u5220\u9664\u80cc\u666f",J_imgTxt:{title:"\u6dfb\u52a0\u80cc\u666f\u56fe\u7247"}},noScarwl:"\u5c1a\u672a\u4f5c\u753b\uff0c\u767d\u7eb8\u4e00\u5f20~",scrawlUpLoading:"\u6d82\u9e26\u4e0a\u4f20\u4e2d,\u522b\u6025\u54e6~",continueBtn:"\u7ee7\u7eed",imageError:"\u7cdf\u7cd5\uff0c\u56fe\u7247\u8bfb\u53d6\u5931\u8d25\u4e86\uff01",backgroundUploading:"\u80cc\u666f\u56fe\u7247\u4e0a\u4f20\u4e2d,\u522b\u6025\u54e6~"},music:{"static":{lang_input_tips:"\u8f93\u5165\u6b4c\u624b/\u6b4c\u66f2/\u4e13\u8f91\uff0c\u641c\u7d22\u60a8\u611f\u5174\u8da3\u7684\u97f3\u4e50\uff01",J_searchBtn:{value:"\u641c\u7d22\u6b4c\u66f2"}},emptyTxt:"\u672a\u641c\u7d22\u5230\u76f8\u5173\u97f3\u4e50\u7ed3\u679c\uff0c\u8bf7\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u8bd5\u8bd5\u3002",chapter:"\u6b4c\u66f2",singer:"\u6b4c\u624b",special:"\u4e13\u8f91",listenTest:"\u8bd5\u542c"},anchor:{"static":{lang_input_anchorName:"\u951a\u70b9\u540d\u5b57\uff1a"}},charts:{"static":{lang_data_source:"\u6570\u636e\u6e90\uff1a",lang_chart_format:"\u56fe\u8868\u683c\u5f0f\uff1a",lang_data_align:"\u6570\u636e\u5bf9\u9f50\u65b9\u5f0f",lang_chart_align_same:"\u6570\u636e\u6e90\u4e0e\u56fe\u8868X\u8f74Y\u8f74\u4e00\u81f4",lang_chart_align_reverse:"\u6570\u636e\u6e90\u4e0e\u56fe\u8868X\u8f74Y\u8f74\u76f8\u53cd",lang_chart_title:"\u56fe\u8868\u6807\u9898",lang_chart_main_title:"\u4e3b\u6807\u9898\uff1a",lang_chart_sub_title:"\u5b50\u6807\u9898\uff1a",lang_chart_x_title:"X\u8f74\u6807\u9898\uff1a",lang_chart_y_title:"Y\u8f74\u6807\u9898\uff1a",lang_chart_tip:"\u63d0\u793a\u6587\u5b57",lang_cahrt_tip_prefix:"\u63d0\u793a\u6587\u5b57\u524d\u7f00\uff1a",lang_cahrt_tip_description:"\u4ec5\u997c\u56fe\u6709\u6548\uff0c \u5f53\u9f20\u6807\u79fb\u52a8\u5230\u997c\u56fe\u4e2d\u76f8\u5e94\u7684\u5757\u4e0a\u65f6\uff0c\u63d0\u793a\u6846\u5185\u7684\u6587\u5b57\u7684\u524d\u7f00",lang_chart_data_unit:"\u6570\u636e\u5355\u4f4d",lang_chart_data_unit_title:"\u5355\u4f4d\uff1a",lang_chart_data_unit_description:"\u663e\u793a\u5728\u6bcf\u4e2a\u6570\u636e\u70b9\u4e0a\u7684\u6570\u636e\u7684\u5355\u4f4d\uff0c \u6bd4\u5982\uff1a \u6e29\u5ea6\u7684\u5355\u4f4d \u2103",lang_chart_type:"\u56fe\u8868\u7c7b\u578b\uff1a",lang_prev_btn:"\u4e0a\u4e00\u4e2a",lang_next_btn:"\u4e0b\u4e00\u4e2a"}},emotion:{"static":{lang_input_choice:"\u7cbe\u9009",lang_input_Tuzki:"\u5154\u65af\u57fa",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"\u7eff\u8c46\u86d9",lang_input_babyCat:"baby\u732b",lang_input_bubble:"\u6ce1\u6ce1",lang_input_youa:"\u6709\u554a"}},gmap:{"static":{lang_input_address:"\u5730\u5740",lang_input_search:"\u641c\u7d22",address:{value:"\u5317\u4eac"}},searchError:"\u65e0\u6cd5\u5b9a\u4f4d\u5230\u8be5\u5730\u5740!"},help:{"static":{lang_input_about:"\u5173\u4e8eUEditor",lang_input_shortcuts:"\u5feb\u6377\u952e",lang_input_introduction:"UEditor\u662f\u7531\u767e\u5ea6web\u524d\u7aef\u7814\u53d1\u90e8\u5f00\u53d1\u7684\u6240\u89c1\u5373\u6240\u5f97\u5bcc\u6587\u672cweb\u7f16\u8f91\u5668\uff0c\u5177\u6709\u8f7b\u91cf\uff0c\u53ef\u5b9a\u5236\uff0c\u6ce8\u91cd\u7528\u6237\u4f53\u9a8c\u7b49\u7279\u70b9\u3002\u5f00\u6e90\u57fa\u4e8eBSD\u534f\u8bae\uff0c\u5141\u8bb8\u81ea\u7531\u4f7f\u7528\u548c\u4fee\u6539\u4ee3\u7801\u3002",lang_Txt_shortcuts:"\u5feb\u6377\u952e",lang_Txt_func:"\u529f\u80fd",lang_Txt_bold:"\u7ed9\u9009\u4e2d\u5b57\u8bbe\u7f6e\u4e3a\u52a0\u7c97",lang_Txt_copy:"\u590d\u5236\u9009\u4e2d\u5185\u5bb9",lang_Txt_cut:"\u526a\u5207\u9009\u4e2d\u5185\u5bb9",lang_Txt_Paste:"\u7c98\u8d34",lang_Txt_undo:"\u91cd\u65b0\u6267\u884c\u4e0a\u6b21\u64cd\u4f5c",lang_Txt_redo:"\u64a4\u9500\u4e0a\u4e00\u6b21\u64cd\u4f5c",lang_Txt_italic:"\u7ed9\u9009\u4e2d\u5b57\u8bbe\u7f6e\u4e3a\u659c\u4f53",lang_Txt_underline:"\u7ed9\u9009\u4e2d\u5b57\u52a0\u4e0b\u5212\u7ebf",lang_Txt_selectAll:"\u5168\u90e8\u9009\u4e2d",lang_Txt_visualEnter:"\u8f6f\u56de\u8f66",lang_Txt_fullscreen:"\u5168\u5c4f"}},insertframe:{"static":{lang_input_address:"\u5730\u5740\uff1a",lang_input_width:"\u5bbd\u5ea6\uff1a",lang_input_height:"\u9ad8\u5ea6\uff1a",lang_input_isScroll:"\u5141\u8bb8\u6eda\u52a8\u6761\uff1a",lang_input_frameborder:"\u663e\u793a\u6846\u67b6\u8fb9\u6846\uff1a",lang_input_alignMode:"\u5bf9\u9f50\u65b9\u5f0f\uff1a",align:{title:"\u5bf9\u9f50\u65b9\u5f0f",options:["\u9ed8\u8ba4","\u5de6\u5bf9\u9f50","\u53f3\u5bf9\u9f50","\u5c45\u4e2d"]}},enterAddress:"\u8bf7\u8f93\u5165\u5730\u5740!"},link:{"static":{lang_input_text:"\u6587\u672c\u5185\u5bb9\uff1a",lang_input_url:"\u94fe\u63a5\u5730\u5740\uff1a",lang_input_title:"\u6807\u9898\uff1a",lang_input_target:"\u662f\u5426\u5728\u65b0\u7a97\u53e3\u6253\u5f00\uff1a"},validLink:"\u53ea\u652f\u6301\u9009\u4e2d\u4e00\u4e2a\u94fe\u63a5\u65f6\u751f\u6548",httpPrompt:"\u60a8\u8f93\u5165\u7684\u8d85\u94fe\u63a5\u4e2d\u4e0d\u5305\u542bhttp\u7b49\u534f\u8bae\u540d\u79f0\uff0c\u9ed8\u8ba4\u5c06\u4e3a\u60a8\u6dfb\u52a0http://\u524d\u7f00"},map:{"static":{lang_city:"\u57ce\u5e02",lang_address:"\u5730\u5740",city:{value:"\u5317\u4eac"},lang_search:"\u641c\u7d22",lang_dynamicmap:"\u63d2\u5165\u52a8\u6001\u5730\u56fe"},cityMsg:"\u8bf7\u9009\u62e9\u57ce\u5e02",errorMsg:"\u62b1\u6b49\uff0c\u627e\u4e0d\u5230\u8be5\u4f4d\u7f6e\uff01"},searchreplace:{"static":{lang_tab_search:"\u67e5\u627e",lang_tab_replace:"\u66ff\u6362",lang_search1:"\u67e5\u627e",lang_search2:"\u67e5\u627e",lang_replace:"\u66ff\u6362",lang_searchReg:"\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6dfb\u52a0\u524d\u540e\u659c\u6760\u6807\u793a\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\u201c/\u8868\u8fbe\u5f0f/\u201d",lang_searchReg1:"\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6dfb\u52a0\u524d\u540e\u659c\u6760\u6807\u793a\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\u201c/\u8868\u8fbe\u5f0f/\u201d",lang_case_sensitive1:"\u533a\u5206\u5927\u5c0f\u5199",lang_case_sensitive2:"\u533a\u5206\u5927\u5c0f\u5199",nextFindBtn:{value:"\u4e0b\u4e00\u4e2a"},preFindBtn:{value:"\u4e0a\u4e00\u4e2a"},nextReplaceBtn:{value:"\u4e0b\u4e00\u4e2a"},preReplaceBtn:{value:"\u4e0a\u4e00\u4e2a"},repalceBtn:{value:"\u66ff\u6362"},repalceAllBtn:{value:"\u5168\u90e8\u66ff\u6362"}},getEnd:"\u5df2\u7ecf\u641c\u7d22\u5230\u6587\u7ae0\u672b\u5c3e\uff01",getStart:"\u5df2\u7ecf\u641c\u7d22\u5230\u6587\u7ae0\u5934\u90e8",countMsg:"\u603b\u5171\u66ff\u6362\u4e86{#count}\u5904\uff01"},snapscreen:{"static":{lang_showMsg:"\u622a\u56fe\u529f\u80fd\u9700\u8981\u9996\u5148\u5b89\u88c5UEditor\u622a\u56fe\u63d2\u4ef6\uff01 ",lang_download:"\u70b9\u6b64\u4e0b\u8f7d",lang_step1:"\u7b2c\u4e00\u6b65\uff0c\u4e0b\u8f7dUEditor\u622a\u56fe\u63d2\u4ef6\u5e76\u8fd0\u884c\u5b89\u88c5\u3002",lang_step2:"\u7b2c\u4e8c\u6b65\uff0c\u63d2\u4ef6\u5b89\u88c5\u5b8c\u6210\u540e\u5373\u53ef\u4f7f\u7528\uff0c\u5982\u4e0d\u751f\u6548\uff0c\u8bf7\u91cd\u542f\u6d4f\u89c8\u5668\u540e\u518d\u8bd5\uff01"}},spechars:{"static":{},tsfh:"\u7279\u6b8a\u5b57\u7b26",lmsz:"\u7f57\u9a6c\u5b57\u7b26",szfh:"\u6570\u5b66\u5b57\u7b26",rwfh:"\u65e5\u6587\u5b57\u7b26",xlzm:"\u5e0c\u814a\u5b57\u6bcd",ewzm:"\u4fc4\u6587\u5b57\u7b26",pyzm:"\u62fc\u97f3\u5b57\u6bcd",yyyb:"\u82f1\u8bed\u97f3\u6807",zyzf:"\u5176\u4ed6"},edittable:{"static":{lang_tableStyle:"\u8868\u683c\u6837\u5f0f",lang_insertCaption:"\u6dfb\u52a0\u8868\u683c\u540d\u79f0\u884c",lang_insertTitle:"\u6dfb\u52a0\u8868\u683c\u6807\u9898\u884c",lang_insertTitleCol:"\u6dfb\u52a0\u8868\u683c\u6807\u9898\u5217",lang_orderbycontent:"\u4f7f\u8868\u683c\u5185\u5bb9\u53ef\u6392\u5e8f",lang_tableSize:"\u81ea\u52a8\u8c03\u6574\u8868\u683c\u5c3a\u5bf8",lang_autoSizeContent:"\u6309\u8868\u683c\u6587\u5b57\u81ea\u9002\u5e94",lang_autoSizePage:"\u6309\u9875\u9762\u5bbd\u5ea6\u81ea\u9002\u5e94",lang_example:"\u793a\u4f8b",lang_borderStyle:"\u8868\u683c\u8fb9\u6846",lang_color:"\u989c\u8272:"},captionName:"\u8868\u683c\u540d\u79f0",titleName:"\u6807\u9898",cellsName:"\u5185\u5bb9",errorMsg:"\u6709\u5408\u5e76\u5355\u5143\u683c\uff0c\u4e0d\u53ef\u6392\u5e8f"},edittip:{"static":{lang_delRow:"\u5220\u9664\u6574\u884c",lang_delCol:"\u5220\u9664\u6574\u5217"}},edittd:{"static":{lang_tdBkColor:"\u80cc\u666f\u989c\u8272:"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"\u8f6c\u5b58\u6b65\u9aa4",uploadBtn:{src:"upload.png",alt:"\u4e0a\u4f20"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1\u3001\u70b9\u51fb\u9876\u90e8\u590d\u5236\u6309\u94ae\uff0c\u5c06\u5730\u5740\u590d\u5236\u5230\u526a\u8d34\u677f\uff1b2\u3001\u70b9\u51fb\u6dfb\u52a0\u7167\u7247\u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u4f7f\u7528Ctrl+V\u7c98\u8d34\u5730\u5740\uff1b3\u3001\u70b9\u51fb\u6253\u5f00\u540e\u9009\u62e9\u56fe\u7247\u4e0a\u4f20\u6d41\u7a0b\u3002"},fileType:"\u56fe\u7247",flashError:"FLASH\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5FLASH\u63d2\u4ef6\u662f\u5426\u6b63\u786e\u5b89\u88c5\uff01",netError:"\u7f51\u7edc\u8fde\u63a5\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01",copySuccess:"\u56fe\u7247\u5730\u5740\u5df2\u7ecf\u590d\u5236\uff01",flashI18n:{}},autosave:{saving:"\u4fdd\u5b58\u4e2d...",success:"\u672c\u5730\u4fdd\u5b58\u6210\u529f"}};(function(){function Q(f,d,c){var b;d=d.toLowerCase();return(b=f.__allListeners||c&&(f.__allListeners={}))&&(b[d]||c&&(b[d]=[]))}function W(f,d,c,b,a,e){b=b&&f[d];var h;for(!b&&(b=f[c]);!b&&(h=(h||f).parentNode);){if("BODY"==h.tagName||e&&!e(h))return null;b=h[c]}return b&&a&&!a(b)?W(b,d,c,!1,a):b}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var t=window.baidu||{};window.baidu=t;window.UE=t.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.5.0";UE.I18N.lang=ueditor_lang;var K=UE.dom={},r=UE.browser=function(){var f=navigator.userAgent.toLowerCase(),d=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(f),opera:!!d&&d.version,webkit:-1<f.indexOf(" applewebkit/"),mac:-1<f.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie;var b=0;if(c.ie){var b=f.match(/(?:msie\s([\w.]+))/),a=f.match(/(?:trident.*rv:([\w.]+))/),b=b&&a&&b[1]&&a[1]?Math.max(1*b[1],1*a[1]):b&&b[1]?1*b[1]:a&&a[1]?1*a[1]:0;c.ie11Compat=11==document.documentMode;c.ie9Compat=9==document.documentMode;c.ie8=!!document.documentMode;c.ie8Compat=8==document.documentMode;c.ie7Compat=7==b&&!document.documentMode||7==document.documentMode;c.ie6Compat=7>b||c.quirks;c.ie9above=8<b;c.ie9below=9>b;c.ie11above=10<b;c.ie11below=11>b}c.gecko&&(a=f.match(/rv:([\d\.]+)/))&&(a=a[1].split("."),b=1E4*a[0]+100*(a[1]||0)+1*(a[2]||0));/chrome\/(\d+\.\d)/i.test(f)&&(c.chrome=+RegExp.$1);/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(f)&&!/chrome/i.test(f)&&(c.safari=+(RegExp.$1||RegExp.$2));c.opera&&(b=parseFloat(d.version()));c.webkit&&(b=parseFloat(f.match(/ applewebkit\/(\d+)/)[1]));c.version=b;c.isCompatible=!c.mobile&&(c.ie&&6<=b||c.gecko&&10801<=b||c.opera&&9.5<=b||c.air&&1<=b||c.webkit&&522<=b||!1);return c}(),L=r.ie,la=r.opera,n=UE.utils={each:function(f,d,c){if(null!=f)if(f.length===+f.length)for(var b=0,a=f.length;b<a;b++){if(!1===d.call(c,f[b],b,f))return!1}else for(b in f)if(f.hasOwnProperty(b)&&!1===d.call(c,f[b],b,f))return!1},makeInstance:function(f){var d=new Function;d.prototype=f;f=new d;d.prototype=null;return f},extend:function(f,d,c){if(d)for(var b in d)c&&f.hasOwnProperty(b)||(f[b]=d[b]);return f},extend2:function(f){for(var d=arguments,c=1;c<d.length;c++){var b=d[c],a;for(a in b)f.hasOwnProperty(a)||(f[a]=b[a])}return f},inherits:function(f,d){var c=f.prototype,b=n.makeInstance(d.prototype);n.extend(b,c,!0);f.prototype=b;return b.constructor=f},bind:function(f,d){return function(){return f.apply(d,arguments)}},defer:function(f,d,c){var b;return function(){c&&clearTimeout(b);b=setTimeout(f,d)}},indexOf:function(f,d,c){var b=-1;c=this.isNumber(c)?c:0;this.each(f,function(a,e){if(e>=c&&a===d)return b=e,!1});return b},removeItem:function(f,d){for(var c=0,b=f.length;c<b;c++)f[c]===d&&(f.splice(c,1),c--)},trim:function(f){return f.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(f){if(!f)return{};f=n.isArray(f)?f:f.split(",");for(var d=0,c,b={};c=f[d++];)b[c.toUpperCase()]=b[c]=1;return b},unhtml:function(f,d){return f?f.replace(d||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(c,b){return b?c:{"\x3c":"\x26lt;","\x26":"\x26amp;",'"':"\x26quot;","\x3e":"\x26gt;","'":"\x26#39;"}[c]}):""},unhtmlForUrl:function(f,d){return f?f.replace(d||/[<">']/g,function(c){return{"\x3c":"\x26lt;","\x26":"\x26amp;",'"':"\x26quot;","\x3e":"\x26gt;","'":"\x26#39;"}[c]}):""},html:function(f){return f?f.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(d){return{"\x26lt;":"\x3c","\x26amp;":"\x26","\x26quot;":'"',"\x26gt;":"\x3e","\x26#39;":"'","\x26nbsp;":" "}[d]}):""},cssStyleToDomStyle:function(){var f=document.createElement("div").style,d={"float":void 0!=f.cssFloat?"cssFloat":void 0!=f.styleFloat?"styleFloat":"float"};return function(c){return d[c]||(d[c]=c.toLowerCase().replace(/-./g,function(b){return b.charAt(1).toUpperCase()}))}}(),loadFile:function(){function f(c,b){try{for(var a=0,e;e=d[a++];)if(e.doc===c&&e.url==(b.src||b.href))return e}catch(h){return null}}var d=[];return function(c,b,a){var e=f(c,b);if(e)e.ready?a&&a():e.funs.push(a);else if(d.push({doc:c,url:b.src||b.href,funs:[a]}),!c.body){a=[];for(var h in b)"tag"!=h&&a.push(h+'\x3d"'+b[h]+'"');c.write("\x3c"+b.tag+" "+a.join(" ")+" \x3e\x3c/"+b.tag+"\x3e")}else if(!b.id||!c.getElementById(b.id)){var l=c.createElement(b.tag);delete b.tag;for(h in b)l.setAttribute(h,b[h]);l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){e=f(c,b);if(0<e.funs.length){e.ready=1;for(var a;a=e.funs.pop();)a()}l.onload=l.onreadystatechange=null}};l.onerror=function(){};c.getElementsByTagName("head")[0].appendChild(l)}}}(),isEmptyObject:function(f){if(null==f)return!0;if(this.isArray(f)||this.isString(f))return 0===f.length;for(var d in f)if(f.hasOwnProperty(d))return!1;return!0},fixColor:function(f,d){if(/color/i.test(f)&&/rgba?/.test(d)){var c=d.split(",");if(3<c.length)return"";d="#";for(var b=0,a;a=c[b++];)a=parseInt(a.replace(/[^\d]/gi,""),10).toString(16),d+=1==a.length?"0"+a:a;d=d.toUpperCase()}return d},optCss:function(f){function d(a,e){if(!a)return"";var b=a.top,c=a.bottom,d=a.left,f=a.right,m="";if(b&&d&&c&&f)m+=";"+e+":"+(b==c&&c==d&&d==f?b:b==c&&d==f?b+" "+d:d==f?b+" "+d+" "+c:b+" "+f+" "+c+" "+d)+";";else for(var g in a)m+=";"+e+"-"+g+":"+a[g]+";";return m}var c,b;f=f.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,e,d,l){if(1==l.split(" ").length)switch(e){case "padding":return!c&&(c={}),c[d]=l,"";case "margin":return!b&&(b={}),b[d]=l,"";case "border":return"initial"==l?"":a}return a});f+=d(c,"padding")+d(b,"margin");return f.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,e){return e?e+";;":";"})},clone:function(f,d){var c;d=d||{};for(var b in f)f.hasOwnProperty(b)&&(c=f[b],"object"==typeof c?(d[b]=n.isArray(c)?[]:{},n.clone(f[b],d[b])):d[b]=c);return d},transUnitToPx:function(f){if(!/(pt|cm)/.test(f))return f;var d;f.replace(/([\d.]+)(\w+)/,function(c,b,a){f=b;d=a});switch(d){case "cm":f=25*parseFloat(f);break;case "pt":f=Math.round(96*parseFloat(f)/72)}return f+(f?"px":"")},domReady:function(){function f(c){for(c.isReady=!0;c=d.pop();c());}var d=[];return function(c,b){b=b||window;var a=b.document;c&&d.push(c);"complete"===a.readyState?f(a):(a.isReady&&f(a),r.ie&&11!=r.version?(function(){if(!a.isReady){try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}f(a)}}(),b.attachEvent("onload",function(){f(a)})):(a.addEventListener("DOMContentLoaded",function(){a.removeEventListener("DOMContentLoaded",arguments.callee,!1);f(a)},!1),b.addEventListener("load",function(){f(a)},!1)))}}(),cssRule:r.ie&&11!=r.version?function(f,d,c){var b,a;if(void 0===d||d&&d.nodeType&&9==d.nodeType){if(c=d&&d.nodeType&&9==d.nodeType?d:c||document,b=c.indexList||(c.indexList={}),a=b[f],void 0!==a)return c.styleSheets[a].cssText}else{c=c||document;b=c.indexList||(c.indexList={});a=b[f];if(""===d)return void 0!==a?(c.styleSheets[a].cssText="",delete b[f],!0):!1;void 0!==a?sheetStyle=c.styleSheets[a]:(sheetStyle=c.createStyleSheet("",a=c.styleSheets.length),b[f]=a);sheetStyle.cssText=d}}:function(f,d,c){var b;if(void 0===d||d&&d.nodeType&&9==d.nodeType)return c=d&&d.nodeType&&9==d.nodeType?d:c||document,(b=c.getElementById(f))?b.innerHTML:void 0;c=c||document;b=c.getElementById(f);if(""===d)return b?(b.parentNode.removeChild(b),!0):!1;b?b.innerHTML=d:(b=c.createElement("style"),b.id=f,b.innerHTML=d,c.getElementsByTagName("head")[0].appendChild(b))},sort:function(f,d){d=d||function(a,e){return a.localeCompare(e)};for(var c=0,b=f.length;c<b;c++)for(var a=c,e=f.length;a<e;a++)if(0<d(f[c],f[a])){var h=f[c];f[c]=f[a];f[a]=h}return f},serializeParam:function(f){var d=[],c;for(c in f)if("method"!=c&&"timeout"!=c&&"async"!=c)if("function"!=(typeof f[c]).toLowerCase()&&"object"!=(typeof f[c]).toLowerCase())d.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(f[c]));else if(n.isArray(f[c]))for(var b=0;b<f[c].length;b++)d.push(encodeURIComponent(c)+"[]\x3d"+encodeURIComponent(f[c][b]));return d.join("\x26")},formatUrl:function(f){f=f.replace(/&&/g,"\x26");f=f.replace(/\?&/g,"?");f=f.replace(/&$/g,"");f=f.replace(/&#/g,"#");return f=f.replace(/&+/g,"\x26")},isCrossDomainUrl:function(f){var d=document.createElement("a");d.href=f;r.ie&&(d.href=d.href);return!(d.protocol==location.protocol&&d.hostname==location.hostname&&(d.port==location.port||"80"==d.port&&""==location.port||""==d.port&&"80"==location.port))},clearEmptyAttrs:function(f){for(var d in f)""===f[d]&&delete f[d];return f},str2json:function(f){return n.isString(f)?window.JSON?JSON.parse(f):(new Function("return "+n.trim(f||"")))():null},json2str:function(){if(window.JSON)return JSON.stringify;var f=function(b){return 10>b?"0"+b:b},d=function(b){/["\\\x00-\x1f]/.test(b)&&(b=b.replace(/["\\\x00-\x1f]/g,function(a){var e=c[a];if(e)return e;e=a.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)}));return'"'+b+'"'},c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(b){switch(typeof b){case "undefined":return"undefined";case "number":return isFinite(b)?String(b):"null";case "string":return d(b);case "boolean":return String(b);default:if(null===b)return"null";if(n.isArray(b)){var a=["["],e=b.length,c,l,k;for(l=0;l<e;l++)switch(k=b[l],typeof k){case "undefined":case "function":case "unknown":break;default:c&&a.push(","),a.push(n.json2str(k)),c=1}a.push("]");return a.join("")}if(n.isDate(b))return'"'+b.getFullYear()+"-"+f(b.getMonth()+1)+"-"+f(b.getDate())+"T"+f(b.getHours())+":"+f(b.getMinutes())+":"+f(b.getSeconds())+'"';c=["{"];l=n.json2str;for(e in b)if(Object.prototype.hasOwnProperty.call(b,e))switch(k=b[e],typeof k){case "undefined":case "unknown":case "function":break;default:a&&c.push(","),a=1,c.push(l(e)+":"+l(k))}c.push("}");return c.join("")}}}()};n.each("String Function Array Number RegExp Object Date".split(" "),function(f){UE.utils["is"+f]=function(d){return Object.prototype.toString.apply(d)=="[object "+f+"]"}});var aa=UE.EventBase=function(){};aa.prototype={addListener:function(f,d){f=n.trim(f).split(/\s+/);for(var c=0,b;b=f[c++];)Q(this,b,!0).push(d)},on:function(f,d){return this.addListener(f,d)},off:function(f,d){return this.removeListener(f,d)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(f,d){f=n.trim(f).split(/\s+/);for(var c=0,b;b=f[c++];)n.removeItem(Q(this,b)||[],d)},fireEvent:function(){for(var f=arguments[0],f=n.trim(f).split(" "),d=0,c;c=f[d++];){var b=Q(this,c),a,e,h;if(b)for(h=b.length;h--;)if(b[h]){e=b[h].apply(this,arguments);if(!0===e)return e;void 0!==e&&(a=e)}if(e=this["on"+c.toLowerCase()])a=e.apply(this,arguments)}return a}};var w=K.dtd=function(){function f(a){for(var e in a)a[e.toUpperCase()]=a[e];return a}var d=n.extend2,c=f({isindex:1,fieldset:1}),b=f({input:1,button:1,select:1,textarea:1,label:1}),a=d(f({a:1}),b),e=d({iframe:1},a),h=f({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),l=f({ins:1,del:1,script:1,style:1}),k=d(f({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),l),g=d(f({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),k),m=d(f({p:1}),g),b=d(f({iframe:1}),g,b),g=f({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),q=d(f({a:0}),b),u=f({tr:1}),y=f({"#":1}),z=d(f({param:1}),g),v=d(f({form:1}),c,e,h,m),C=f({li:1,ol:1,ul:1}),E=f({style:1,script:1}),F=f({base:1,link:1,meta:1,title:1}),E=d(F,E),H=f({head:1,body:1}),ca=f({html:1}),r=f({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),t=f({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return f({$nonBodyContent:d(ca,H,F),$block:r,$inline:q,$inlineWithA:d(f({a:1}),q),$body:d(f({script:1,style:1}),r),$cdata:f({script:1,style:1}),$empty:t,$nonChild:f({iframe:1,textarea:1}),$listItem:f({dd:1,dt:1,li:1}),$list:f({ul:1,ol:1,dl:1}),$isNotEmpty:f({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:f({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:f({p:1,div:1}),$tableContent:f({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:f({pre:1,script:1,style:1,textarea:1}),html:H,head:E,style:y,script:y,body:v,base:{},link:{},meta:{},title:y,col:{},tr:f({td:1,th:1}),img:{},embed:{},colgroup:f({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:q,button:d(m,h),basefont:{},h5:q,h4:q,samp:q,h6:q,ol:C,h1:q,h3:q,option:y,h2:q,form:d(c,e,h,m),select:f({optgroup:1,option:1}),font:q,ins:q,menu:C,abbr:q,label:q,table:f({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:q,tfoot:u,cite:q,li:v,input:{},iframe:v,strong:q,textarea:y,noframes:v,big:q,small:q,span:f({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:q,dt:q,sub:q,optgroup:f({option:1}),param:{},bdo:q,"var":q,div:v,object:z,sup:q,dd:v,strike:q,area:{},dir:C,map:d(f({area:1,form:1,p:1}),c,l,h),applet:z,dl:f({dt:1,dd:1}),del:q,isindex:{},fieldset:d(f({legend:1}),g),thead:u,ul:C,acronym:q,b:q,a:d(f({a:1}),b),blockquote:d(f({td:1,tr:1,tbody:1,li:1}),v),caption:q,i:q,u:q,tbody:u,s:q,address:d(e,m),tt:q,legend:q,q:q,pre:d(k,a),p:d(f({a:1}),q),em:q,dfn:q})}(),ja=L&&9>r.version?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},na=n.listToMap("-webkit-box -moz-box block list-item table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption".split(" ")),g=K.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:L&&"6"==r.version?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(f,d){if(f===d)return 0;var c,b=[f],a=[d];for(c=f;c=c.parentNode;){if(c===d)return 10;b.push(c)}for(c=d;c=c.parentNode;){if(c===f)return 20;a.push(c)}b.reverse();a.reverse();if(b[0]!==a[0])return 1;for(c=-1;c++,b[c]===a[c];);f=b[c];for(d=a[c];f=f.nextSibling;)if(f===d)return 4;return 2},getNodeIndex:function(f,d){for(var c=f,b=0;c=c.previousSibling;)d&&3==c.nodeType?c.nodeType!=c.nextSibling.nodeType&&b++:b++;return b},inDoc:function(f,d){return 10==g.getPosition(f,d)},findParent:function(f,d,c){if(f&&!g.isBody(f))for(f=c?f:f.parentNode;f;){if(!d||d(f)||g.isBody(f))return d&&!d(f)&&g.isBody(f)?null:f;f=f.parentNode}return null},findParentByTagName:function(f,d,c,b){d=n.listToMap(n.isArray(d)?d:[d]);return g.findParent(f,function(a){return d[a.tagName]&&!(b&&b(a))},c)},findParents:function(f,d,c,b){for(d=d&&(c&&c(f)||!c)?[f]:[];f=g.findParent(f,c);)d.push(f);return b?d:d.reverse()},insertAfter:function(f,d){return f.nextSibling?f.parentNode.insertBefore(d,f.nextSibling):f.parentNode.appendChild(d)},remove:function(f,d){var c=f.parentNode,b;if(c){if(d&&f.hasChildNodes())for(;b=f.firstChild;)c.insertBefore(b,f);c.removeChild(f)}return f},getNextDomNode:function(f,d,c,b){return W(f,"firstChild","nextSibling",d,c,b)},getPreDomNode:function(f,d,c,b){return W(f,"lastChild","previousSibling",d,c,b)},isBookmarkNode:function(f){return 1==f.nodeType&&f.id&&/^_baidu_bookmark_/i.test(f.id)},getWindow:function(f){f=f.ownerDocument||f;return f.defaultView||f.parentWindow},getCommonAncestor:function(f,d){if(f===d)return f;for(var c=[f],b=[d],a=f,e=-1;a=a.parentNode;){if(a===d)return a;c.push(a)}for(a=d;a=a.parentNode;){if(a===f)return a;b.push(a)}c.reverse();for(b.reverse();e++,c[e]===b[e];);return 0==e?null:c[e-1]},clearEmptySibling:function(f,d,c){function b(a,e){for(var b;a&&!g.isBookmarkNode(a)&&(g.isEmptyInlineElement(a)||!(new RegExp("[^\t\n\r"+g.fillChar+"]")).test(a.nodeValue));)b=a[e],g.remove(a),a=b}!d&&b(f.nextSibling,"nextSibling");!c&&b(f.previousSibling,"previousSibling")},split:function(f,d){var c=f.ownerDocument;if(r.ie&&d==f.nodeValue.length){var b=c.createTextNode("");return g.insertAfter(f,b)}b=f.splitText(d);r.ie8&&(c=c.createTextNode(""),g.insertAfter(b,c),g.remove(c));return b},isWhitespace:function(f){return!(new RegExp("[^ \t\n\r"+g.fillChar+"]")).test(f.nodeValue)},getXY:function(f){for(var d=0,c=0;f.offsetParent;)c+=f.offsetTop,d+=f.offsetLeft,f=f.offsetParent;return{x:d,y:c}},on:function(f,d,c){var b=n.isArray(d)?d:n.trim(d).split(/\s+/),a=b.length;if(a)for(;a--;)if(d=b[a],f.addEventListener)f.addEventListener(d,c,!1);else{c._d||(c._d={els:[]});var e=d+c.toString(),h=n.indexOf(c._d.els,f);c._d[e]&&-1!=h||(-1==h&&c._d.els.push(f),c._d[e]||(c._d[e]=function(a){return c.call(a.srcElement,a||window.event)}),f.attachEvent("on"+d,c._d[e]))}f=null},un:function(f,d,c){var b=n.isArray(d)?d:n.trim(d).split(/\s+/),a=b.length;if(a)for(;a--;)if(d=b[a],f.removeEventListener)f.removeEventListener(d,c,!1);else{var e=d+c.toString();try{f.detachEvent("on"+d,c._d?c._d[e]:c)}catch(h){}c._d&&c._d[e]&&(d=n.indexOf(c._d.els,f),-1!=d&&c._d.els.splice(d,1),0==c._d.els.length&&delete c._d[e])}},isSameElement:function(f,d){if(f.tagName!=d.tagName)return!1;var c=f.attributes,b=d.attributes;if(!L&&c.length!=b.length)return!1;for(var a,e,h=0,l=0,k=0;a=c[k++];){if("style"==a.nodeName)if(a.specified&&h++,g.isSameStyle(f,d))continue;else return!1;if(L)if(a.specified)h++,e=b.getNamedItem(a.nodeName);else continue;else e=d.attributes[a.nodeName];if(!e.specified||a.nodeValue!=e.nodeValue)return!1}if(L){for(k=0;e=b[k++];)e.specified&&l++;if(h!=l)return!1}return!0},isSameStyle:function(f,d){var c=f.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),b=d.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(r.opera){c=f.style;b=d.style;if(c.length!=b.length)return!1;for(var a in c)if(!/^(\d+|csstext)$/i.test(a)&&c[a]!=b[a])return!1;return!0}if(!c||!b)return c==b;c=c.split(";");b=b.split(";");if(c.length!=b.length)return!1;a=0;for(var e;e=c[a++];)if(-1==n.indexOf(b,e))return!1;return!0},isBlockElm:function(f){return 1==f.nodeType&&(w.$block[f.tagName]||na[g.getComputedStyle(f,"display")])&&!w.$nonChild[f.tagName]},isBody:function(f){return f&&1==f.nodeType&&"body"==f.tagName.toLowerCase()},breakParent:function(f,d){var c,b=f,a=f,e,h;do{b=b.parentNode;e?(c=b.cloneNode(!1),c.appendChild(e),e=c,c=b.cloneNode(!1),c.appendChild(h),h=c):(e=b.cloneNode(!1),h=e.cloneNode(!1));for(;c=a.previousSibling;)e.insertBefore(c,e.firstChild);for(;c=a.nextSibling;)h.appendChild(c);a=b}while(d!==b);c=d.parentNode;c.insertBefore(e,d);c.insertBefore(h,d);c.insertBefore(f,h);g.remove(d);return f},isEmptyInlineElement:function(f){if(1!=f.nodeType||!w.$removeEmpty[f.tagName])return 0;for(f=f.firstChild;f;){if(g.isBookmarkNode(f)||1==f.nodeType&&!g.isEmptyInlineElement(f)||3==f.nodeType&&!g.isWhitespace(f))return 0;f=f.nextSibling}return 1},trimWhiteTextNode:function(f){function d(c){for(var b;(b=f[c])&&3==b.nodeType&&g.isWhitespace(b);)f.removeChild(b)}d("firstChild");d("lastChild")},mergeChild:function(f,d,c){d=g.getElementsByTagName(f,f.tagName.toLowerCase());for(var b=0,a;a=d[b++];)if(a.parentNode&&!g.isBookmarkNode(a))if("span"==a.tagName.toLowerCase()){if(f===a.parentNode&&(g.trimWhiteTextNode(f),1==f.childNodes.length)){f.style.cssText=a.style.cssText+";"+f.style.cssText;g.remove(a,!0);continue}a.style.cssText=f.style.cssText+";"+a.style.cssText;if(c){var e=c.style;if(e)for(var e=e.split(";"),h=0,l;l=e[h++];)a.style[n.cssStyleToDomStyle(l.split(":")[0])]=l.split(":")[1]}g.isSameStyle(a,f)&&g.remove(a,!0)}else g.isSameElement(f,a)&&g.remove(a,!0)},getElementsByTagName:function(f,d,c){if(c&&n.isString(c)){var b=c;c=function(a){return g.hasClass(a,b)}}d=n.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var a=[],e=0,h;h=d[e++];){h=f.getElementsByTagName(h);for(var l=0,k;k=h[l++];)c&&!c(k)||a.push(k)}return a},mergeToParent:function(f){for(var d=f.parentNode;d&&w.$removeEmpty[d.tagName];){if(d.tagName==f.tagName||"A"==d.tagName){g.trimWhiteTextNode(d);if("SPAN"==d.tagName&&!g.isSameStyle(d,f)||"A"==d.tagName&&"SPAN"==f.tagName)if(1<d.childNodes.length||d!==f.parentNode){f.style.cssText=d.style.cssText+";"+f.style.cssText;d=d.parentNode;continue}else d.style.cssText+=";"+f.style.cssText,"A"==d.tagName&&(d.style.textDecoration="underline");if("A"!=d.tagName){d===f.parentNode&&g.remove(f,!0);break}}d=d.parentNode}},mergeSibling:function(f,d,c){function b(a,e,b){var c;if((c=b[a])&&!g.isBookmarkNode(c)&&1==c.nodeType&&g.isSameElement(b,c)){for(;c.firstChild;)"firstChild"==e?b.insertBefore(c.lastChild,b.firstChild):b.appendChild(c.firstChild);g.remove(c)}}!d&&b("previousSibling","firstChild",f);!c&&b("nextSibling","lastChild",f)},unSelectable:L&&r.ie9below||r.opera?function(f){f.onselectstart=function(){return!1};f.onclick=f.onkeyup=f.onkeydown=function(){return!1};f.unselectable="on";f.setAttribute("unselectable","on");for(var d=0,c;c=f.all[d++];)switch(c.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:c.unselectable="on",f.setAttribute("unselectable","on")}}:function(f){f.style.MozUserSelect=f.style.webkitUserSelect=f.style.msUserSelect=f.style.KhtmlUserSelect="none"},removeAttributes:function(f,d){d=n.isArray(d)?d:n.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b;b=d[c++];){b=ja[b]||b;switch(b){case "className":f[b]="";break;case "style":f.style.cssText="";var a=f.getAttributeNode("style");!r.ie&&a&&f.removeAttributeNode(a)}f.removeAttribute(b)}},createElement:function(f,d,c){return g.setAttributes(f.createElement(d),c)},setAttributes:function(f,d){for(var c in d)if(d.hasOwnProperty(c)){var b=d[c];switch(c){case "class":f.className=b;break;case "style":f.style.cssText=f.style.cssText+";"+b;break;case "innerHTML":f[c]=b;break;case "value":f.value=b;break;default:f.setAttribute(ja[c]||c,b)}}return f},getComputedStyle:function(f,d){if(-1<"width height top left".indexOf(d))return f["offset"+d.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";3==f.nodeType&&(f=f.parentNode);if(r.ie&&9>r.version&&"font-size"==d&&!f.style.fontSize&&!w.$empty[f.tagName]&&!w.$nonChild[f.tagName]){var c=f.ownerDocument.createElement("span");c.style.cssText="padding:0;border:0;font-family:simsun;";c.innerHTML=".";f.appendChild(c);var b=c.offsetHeight;f.removeChild(c);c=null;return b+"px"}try{c=g.getStyle(f,d)||(window.getComputedStyle?g.getWindow(f).getComputedStyle(f,"").getPropertyValue(d):(f.currentStyle||f.style)[n.cssStyleToDomStyle(d)])}catch(a){return""}return n.transUnitToPx(n.fixColor(d,c))},removeClasses:function(f,d){d=n.isArray(d)?d:n.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=f.className;b=d[c++];)a=a.replace(new RegExp("\\b"+b+"\\b"),"");(a=n.trim(a).replace(/[ ]{2,}/g," "))?f.className=a:g.removeAttributes(f,["class"])},addClass:function(f,d){if(f){d=n.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=f.className;b=d[c++];)(new RegExp("\\b"+b+"\\b")).test(a)||(a+=" "+b);f.className=n.trim(a)}},hasClass:function(f,d){if(n.isRegExp(d))return d.test(f.className);d=n.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=f.className;b=d[c++];)if(!(new RegExp("\\b"+b+"\\b","i")).test(a))return!1;return c-1==d.length},preventDefault:function(f){f.preventDefault?f.preventDefault():f.returnValue=!1},removeStyle:function(f,d){r.ie?("color"==d&&(d="(^|;)"+d),f.style.cssText=f.style.cssText.replace(new RegExp(d+"[^:]*:[^;]+;?","ig"),"")):f.style.removeProperty?f.style.removeProperty(d):f.style.removeAttribute(n.cssStyleToDomStyle(d));f.style.cssText||g.removeAttributes(f,["style"])},getStyle:function(f,d){var c=f.style[n.cssStyleToDomStyle(d)];return n.fixColor(d,c)},setStyle:function(f,d,c){f.style[n.cssStyleToDomStyle(d)]=c;n.trim(f.style.cssText)||this.removeAttributes(f,"style")},setStyles:function(f,d){for(var c in d)d.hasOwnProperty(c)&&g.setStyle(f,c,d[c])},removeDirtyAttr:function(f){for(var d=0,c,b=f.getElementsByTagName("*");c=b[d++];)c.removeAttribute("_moz_dirty");f.removeAttribute("_moz_dirty")},getChildCount:function(f,d){var c=0,b=f.firstChild;for(d=d||function(){return 1};b;)d(b)&&c++,b=b.nextSibling;return c},isEmptyNode:function(f){return!f.firstChild||0==g.getChildCount(f,function(d){return!g.isBr(d)&&!g.isBookmarkNode(d)&&!g.isWhitespace(d)})},clearSelectedArr:function(f){for(var d;d=f.pop();)g.removeAttributes(d,["class"])},scrollToView:function(f,d,c){var b=function(){var a=d.document,e="CSS1Compat"==a.compatMode;return{width:(e?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(e?a.documentElement.clientHeight:a.body.clientHeight)||0}}().height;c=-1*b+c+(f.offsetHeight||0);f=g.getXY(f);c+=f.y;f=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}}(d).y;(c>f||c<f-b)&&d.scrollTo(0,c+(0>c?-20:20))},isBr:function(f){return 1==f.nodeType&&"BR"==f.tagName},isFillChar:function(f,d){if(3!=f.nodeType)return!1;var c=f.nodeValue;return d?(new RegExp("^"+g.fillChar)).test(c):!c.replace(new RegExp(g.fillChar,"g"),"").length},isStartInblock:function(f){f=f.cloneRange();var d=0,c=f.startContainer,b;if(1==c.nodeType&&c.childNodes[f.startOffset])for(var c=c.childNodes[f.startOffset],a=c.previousSibling;a&&g.isFillChar(a);)c=a,a=a.previousSibling;this.isFillChar(c,!0)&&1==f.startOffset&&(f.setStartBefore(c),c=f.startContainer);for(;c&&g.isFillChar(c);)b=c,c=c.previousSibling;b&&(f.setStartBefore(b),c=f.startContainer);for(1==c.nodeType&&g.isEmptyNode(c)&&1==f.startOffset&&f.setStart(c,0).collapse(!0);!f.startOffset;){c=f.startContainer;if(g.isBlockElm(c)||g.isBody(c)){d=1;break}var a=f.startContainer.previousSibling,e;if(a){for(;a&&g.isFillChar(a);)e=a,a=a.previousSibling;e?f.setStartBefore(e):f.setStartBefore(f.startContainer)}else f.setStartBefore(f.startContainer)}return d&&!g.isBody(f.startContainer)?1:0},isEmptyBlock:function(f,d){if(1!=f.nodeType)return 0;d=d||new RegExp("[ \u00a0\t\r\n"+g.fillChar+"]","g");if(0<f[r.ie?"innerText":"textContent"].replace(d,"").length)return 0;for(var c in w.$isNotEmpty)if(f.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(f,d){var c=parseInt(f.style.left)|0,b=parseInt(f.style.top)|0,a=f.getBoundingClientRect(),e=d.left-a.left,a=d.top-a.top;e&&(f.style.left=c+e+"px");a&&(f.style.top=b+a+"px")},fillNode:function(f,d){var c=r.ie?f.createTextNode(g.fillChar):f.createElement("br");d.innerHTML="";d.appendChild(c)},moveChild:function(f,d,c){for(;f.firstChild;)c&&d.firstChild?d.insertBefore(f.lastChild,d.firstChild):d.appendChild(f.firstChild)},hasNoAttributes:function(f){return r.ie?/^<\w+\s*?>/.test(f.outerHTML):0==f.attributes.length},isCustomeNode:function(f){return 1==f.nodeType&&f.getAttribute("_ue_custom_node_")},isTagNode:function(f,d){return 1==f.nodeType&&(new RegExp("\\b"+f.tagName+"\\b","i")).test(d)},filterNodeList:function(f,d,c){var b=[];if(!n.isFunction(d)){var a=d;d=function(e){return-1!=n.indexOf(n.isArray(a)?a:a.split(" "),e.tagName.toLowerCase())}}n.each(f,function(a){d(a)&&b.push(a)});return 0==b.length?null:1!=b.length&&c?b:b[0]},isInNodeEndBoundary:function(f,d){var c=f.startContainer;if(3==c.nodeType&&f.startOffset!=c.nodeValue.length||1==c.nodeType&&f.startOffset!=c.childNodes.length)return 0;for(;c!==d;){if(c.nextSibling)return 0;c=c.parentNode}return 1},isBoundaryNode:function(f,d){for(var c;!g.isBody(f);)if(c=f,f=f.parentNode,c!==f[d])return!1;return!0},fillHtml:r.ie11below?"\x26nbsp;":"\x3cbr/\x3e"},P=new RegExp(g.fillChar,"g");(function(){function f(a){return!a.collapsed&&1==a.startContainer.nodeType&&a.startContainer===a.endContainer&&1==a.endOffset-a.startOffset}function d(a,e,b,c){1==e.nodeType&&(w.$empty[e.tagName]||w.$nonChild[e.tagName])&&(b=g.getNodeIndex(e)+(a?0:1),e=e.parentNode);a?(c.startContainer=e,c.startOffset=b,c.endContainer||c.collapse(!0)):(c.endContainer=e,c.endOffset=b,c.startContainer||c.collapse(!1));c.collapsed=c.startContainer&&c.endContainer&&c.startContainer===c.endContainer&&c.startOffset==c.endOffset;return c}function c(a,e){var b=a.startContainer,c=a.endContainer,d=a.startOffset,h=a.endOffset,k=a.document,l=k.createDocumentFragment(),m,f;1==b.nodeType&&(b=b.childNodes[d]||(m=b.appendChild(k.createTextNode(""))));1==c.nodeType&&(c=c.childNodes[h]||(f=c.appendChild(k.createTextNode(""))));if(b===c&&3==b.nodeType)return l.appendChild(k.createTextNode(b.substringData(d,h-d))),e&&(b.deleteData(d,h-d),a.collapse(!0)),l;for(var p,n,r=l,t=g.findParents(b,!0),w=g.findParents(c,!0),G=0;t[G]==w[G];)G++;for(var O=G,B;B=t[O];O++){p=B.nextSibling;B==b?m||(3==a.startContainer.nodeType?(r.appendChild(k.createTextNode(b.nodeValue.slice(d))),e&&b.deleteData(d,b.nodeValue.length-d)):r.appendChild(e?b:b.cloneNode(!0))):(n=B.cloneNode(!1),r.appendChild(n));for(;p&&p!==c&&p!==w[O];)B=p.nextSibling,r.appendChild(e?p:p.cloneNode(!0)),p=B;r=n}r=l;t[G]||(r.appendChild(t[G-1].cloneNode(!1)),r=r.firstChild);for(O=G;d=w[O];O++){p=d.previousSibling;d==c?f||3!=a.endContainer.nodeType||(r.appendChild(k.createTextNode(c.substringData(0,h))),e&&c.deleteData(0,h)):(n=d.cloneNode(!1),r.appendChild(n));if(O!=G||!t[G])for(;p&&p!==b;)d=p.previousSibling,r.insertBefore(e?p:p.cloneNode(!0),r.firstChild),p=d;r=n}e&&a.setStartBefore(w[G]?t[G]?w[G]:t[G-1]:w[G-1]).collapse(!0);m&&g.remove(m);f&&g.remove(f);return l}function b(a,e){try{if(l&&g.inDoc(l,a))if(l.nodeValue.replace(P,"").length)l.nodeValue=l.nodeValue.replace(P,"");else{var b=l.parentNode;for(g.remove(l);b&&g.isEmptyInlineElement(b)&&(r.safari?!(g.getPosition(b,e)&g.POSITION_CONTAINS):!b.contains(e));)l=b.parentNode,g.remove(b),b=l}}catch(u){}}function a(a,e){var b;for(a=a[e];a&&g.isFillChar(a);)b=a[e],g.remove(a),a=b}var e=0,h=g.fillChar,l,k=K.Range=function(a){this.startContainer=this.startOffset=this.endContainer=this.endOffset=null;this.document=a;this.collapsed=!0};k.prototype={cloneContents:function(){return this.collapsed?null:c(this,0)},deleteContents:function(){var a;this.collapsed||c(this,1);r.webkit&&(a=this.startContainer,3!=a.nodeType||a.nodeValue.length||(this.setStartBefore(a).collapse(!0),g.remove(a)));return this},extractContents:function(){return this.collapsed?null:c(this,2)},setStart:function(a,e){return d(!0,a,e,this)},setEnd:function(a,e){return d(!1,a,e,this)},setStartAfter:function(a){return this.setStart(a.parentNode,g.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,g.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,g.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,g.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){return(new k(this.document)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset);this.collapsed=!0;return this},shrinkBoundary:function(a){function e(a){return 1==a.nodeType&&!g.isBookmarkNode(a)&&!w.$empty[a.tagName]&&!w.$nonChild[a.tagName]}for(var b,c=this.collapsed;1==this.startContainer.nodeType&&(b=this.startContainer.childNodes[this.startOffset])&&e(b);)this.setStart(b,0);if(c)return this.collapse(!0);if(!a)for(;1==this.endContainer.nodeType&&0<this.endOffset&&(b=this.endContainer.childNodes[this.endOffset-1])&&e(b);)this.setEnd(b,b.childNodes.length);return this},getCommonAncestor:function(a,e){var b=this.startContainer,c=this.endContainer;return b===c?a&&f(this)&&(b=b.childNodes[this.startOffset],1==b.nodeType)?b:e&&3==b.nodeType?b.parentNode:b:g.getCommonAncestor(b,c)},trimBoundary:function(a){this.txtToElmBoundary();var e=this.startContainer,b=this.startOffset,c=this.collapsed,d=this.endContainer;if(3==e.nodeType){if(0==b)this.setStartBefore(e);else if(b>=e.nodeValue.length)this.setStartAfter(e);else{var h=g.split(e,b);e===d?this.setEnd(h,this.endOffset-b):e.parentNode===d&&(this.endOffset+=1);this.setStartBefore(h)}if(c)return this.collapse(!0)}a||(b=this.endOffset,d=this.endContainer,3==d.nodeType&&(0==b?this.setEndBefore(d):(b<d.nodeValue.length&&g.split(d,b),this.setEndAfter(d))));return this},txtToElmBoundary:function(a){function e(a,e){var b=a[e+"Container"],c=a[e+"Offset"];if(3==b.nodeType)if(!c)a["set"+e.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](b);else if(c>=b.nodeValue.length)a["set"+e.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](b)}if(a||!this.collapsed)e(this,"start"),e(this,"end");return this},insertNode:function(a){var e=a,b=1;11==a.nodeType&&(e=a.firstChild,b=a.childNodes.length);this.trimBoundary(!0);var c=this.startContainer,d=c.childNodes[this.startOffset];d?c.insertBefore(a,d):c.appendChild(a);e.parentNode===this.endContainer&&(this.endOffset+=b);return this.setStartBefore(e)},setCursor:function(a,e){return this.collapse(!a).select(e)},createBookmark:function(a,b){var c,d=this.document.createElement("span");d.style.cssText="display:none;line-height:0px;";d.appendChild(this.document.createTextNode("\u200d"));d.id="_baidu_bookmark_start_"+(b?"":e++);this.collapsed||(c=d.cloneNode(!0),c.id="_baidu_bookmark_end_"+(b?"":e++));this.insertNode(d);c&&this.collapse().insertNode(c).setEndBefore(c);this.setStartAfter(d);return{start:a?d.id:d,end:c?a?c.id:c:null,id:a}},moveToBookmark:function(a){var e=a.id?this.document.getElementById(a.start):a.start;a=a.end&&a.id?this.document.getElementById(a.end):a.end;this.setStartBefore(e);g.remove(e);a?(this.setEndBefore(a),g.remove(a)):this.collapse(!0);return this},enlarge:function(a,e){var b=g.isBody,c,d,h=this.document.createTextNode("");if(a){d=this.startContainer;1==d.nodeType?d.childNodes[this.startOffset]?c=d=d.childNodes[this.startOffset]:(d.appendChild(h),c=d=h):c=d;for(;;){if(g.isBlockElm(d)){for(d=c;(c=d.previousSibling)&&!g.isBlockElm(c);)d=c;this.setStartBefore(d);break}c=d;d=d.parentNode}d=this.endContainer;1==d.nodeType?((c=d.childNodes[this.endOffset])?d.insertBefore(h,c):d.appendChild(h),c=d=h):c=d;for(;;){if(g.isBlockElm(d)){for(d=c;(c=d.nextSibling)&&!g.isBlockElm(c);)d=c;this.setEndAfter(d);break}c=d;d=d.parentNode}h.parentNode===this.endContainer&&this.endOffset--;g.remove(h)}if(!this.collapsed){for(;!(0!=this.startOffset||e&&e(this.startContainer)||b(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||e&&e(this.endContainer)||b(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(a){for(;!g.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!a)for(;!g.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!g.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!g.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,e,b){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(a){return 1==a.nodeType&&g.isBlockElm(a)}).adjustmentBoundary();for(var c=this.createBookmark(),d=c.end,h=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase():!g.isWhitespace(a)},k=g.getNextDomNode(c.start,!1,h),l,f,m=this.cloneRange();k&&g.getPosition(k,d)&g.POSITION_PRECEDING;)if(3==k.nodeType||w[a][k.tagName]){m.setStartBefore(k);for(l=k;l&&(3==l.nodeType||w[a][l.tagName])&&l!==d;)f=l,l=g.getNextDomNode(l,1==l.nodeType,null,function(e){return w[a][e.tagName]});var k=m.setEndAfter(f).extractContents(),p;if(b&&0<b.length){var q;q=p=b[0].cloneNode(!1);for(var n=1,r;r=b[n++];)p.appendChild(r.cloneNode(!1)),p=p.firstChild}else p=m.document.createElement(a);e&&g.setAttributes(p,e);p.appendChild(k);m.insertNode(b?q:p);var t;"span"==a&&e.style&&/text\-decoration/.test(e.style)&&(t=g.findParentByTagName(p,"a",!0))?(g.setAttributes(t,e),g.remove(p,!0),p=t):(g.mergeSibling(p),g.clearEmptySibling(p));g.mergeChild(p,e);k=g.getNextDomNode(p,!1,h);g.mergeToParent(p);if(l===d)break}else k=g.getNextDomNode(k,!0,h);return this.moveToBookmark(c)},removeInlineStyle:function(a){if(this.collapsed)return this;a=n.isArray(a)?a:[a];this.shrinkBoundary().adjustmentBoundary();for(var e=this.startContainer,b=this.endContainer;;){if(1==e.nodeType){if(-1<n.indexOf(a,e.tagName.toLowerCase()))break;if("body"==e.tagName.toLowerCase()){e=null;break}}e=e.parentNode}for(;;){if(1==b.nodeType){if(-1<n.indexOf(a,b.tagName.toLowerCase()))break;if("body"==b.tagName.toLowerCase()){b=null;break}}b=b.parentNode}var c=this.createBookmark(),d,h;e&&(h=this.cloneRange().setEndBefore(c.start).setStartBefore(e),d=h.extractContents(),h.insertNode(d),g.clearEmptySibling(e,!0),e.parentNode.insertBefore(c.start,e));b&&(h=this.cloneRange().setStartAfter(c.end).setEndAfter(b),d=h.extractContents(),h.insertNode(d),g.clearEmptySibling(b,!1,!0),b.parentNode.insertBefore(c.end,b.nextSibling));for(e=g.getNextDomNode(c.start,!1,function(a){return 1==a.nodeType});e&&e!==c.end;)b=g.getNextDomNode(e,!0,function(a){return 1==a.nodeType}),-1<n.indexOf(a,e.tagName.toLowerCase())&&g.remove(e,!0),e=b;return this.moveToBookmark(c)},getClosedNode:function(){var a;if(!this.collapsed){var e=this.cloneRange().adjustmentBoundary().shrinkBoundary();f(e)&&(e=e.startContainer.childNodes[e.startOffset])&&1==e.nodeType&&(w.$empty[e.tagName]||w.$nonChild[e.tagName])&&(a=e)}return a},select:r.ie?function(e,c){var d;this.collapsed||this.shrinkBoundary();var k=this.getClosedNode();if(k&&!c){try{d=this.document.body.createControlRange(),d.addElement(k),d.select()}catch(C){}return this}var k=this.createBookmark(),f=k.start;d=this.document.body.createTextRange();d.moveToElementText(f);d.moveStart("character",1);if(!this.collapsed){var m=this.document.body.createTextRange(),f=k.end;m.moveToElementText(f);d.setEndPoint("EndToEnd",m)}else if(!e&&3!=this.startContainer.nodeType){var m=this.document.createTextNode(h),p=this.document.createElement("span");p.appendChild(this.document.createTextNode(h));f.parentNode.insertBefore(p,f);f.parentNode.insertBefore(m,f);b(this.document,m);l=m;a(p,"previousSibling");a(f,"nextSibling");d.moveStart("character",-1);d.collapse(!0)}this.moveToBookmark(k);p&&g.remove(p);try{d.select()}catch(C){}return this}:function(e){function c(a){function e(e,b,c){3==e.nodeType&&e.nodeValue.length<b&&(a[c+"Offset"]=e.nodeValue.length)}e(a.startContainer,a.startOffset,"start");e(a.endContainer,a.endOffset,"end")}var d=g.getWindow(this.document),k=d.getSelection();r.gecko?this.document.body.focus():d.focus();if(k){k.removeAllRanges();this.collapsed&&!e&&(e=d=this.startContainer,1==d.nodeType&&(e=d.childNodes[this.startOffset]),3==d.nodeType&&this.startOffset||(e?e.previousSibling&&3==e.previousSibling.nodeType:d.lastChild&&3==d.lastChild.nodeType)||(e=this.document.createTextNode(h),this.insertNode(e),b(this.document,e),a(e,"previousSibling"),a(e,"nextSibling"),l=e,this.setStart(e,r.webkit?1:0).collapse(!0)));d=this.document.createRange();if(this.collapsed&&r.opera&&1==this.startContainer.nodeType)if(e=this.startContainer.childNodes[this.startOffset]){for(;e&&g.isBlockElm(e);)if(1==e.nodeType&&e.childNodes[0])e=e.childNodes[0];else break;e&&this.setStartBefore(e).collapse(!0)}else(e=this.startContainer.lastChild)&&g.isBr(e)&&this.setStartBefore(e).collapse(!0);c(this);d.setStart(this.startContainer,this.startOffset);d.setEnd(this.endContainer,this.endOffset);k.addRange(d)}return this},scrollToView:function(a,e){a=a?window:g.getWindow(this.document);var b=this.document.createElement("span");b.innerHTML="\x26nbsp;";this.cloneRange().insertNode(b);g.scrollToView(b,a,e);g.remove(b);return this},inFillChar:function(){var a=this.startContainer;return this.collapsed&&3==a.nodeType&&a.nodeValue.replace(new RegExp("^"+g.fillChar),"").length+1==a.nodeValue.length?!0:!1},createAddress:function(a,e){function b(a){for(var b=a?d.startContainer:d.endContainer,c=g.findParents(b,!0,function(a){return!g.isBody(a)}),h=[],k=0,l;l=c[k++];)h.push(g.getNodeIndex(l,e));c=0;if(e)if(3==b.nodeType){for(b=b.previousSibling;b&&3==b.nodeType;)c+=b.nodeValue.replace(P,"").length,b=b.previousSibling;c+=a?d.startOffset:d.endOffset}else if(b=b.childNodes[a?d.startOffset:d.endOffset])c=g.getNodeIndex(b,e);else for(b=a?d.startContainer:d.endContainer,a=b.firstChild;a;)if(g.isFillChar(a))a=a.nextSibling;else if(c++,3==a.nodeType)for(;a&&3==a.nodeType;)a=a.nextSibling;else a=a.nextSibling;else c=a?g.isFillChar(b)?0:d.startOffset:d.endOffset;0>c&&(c=0);h.push(c);return h}var c={},d=this;c.startAddress=b(!0);a||(c.endAddress=d.collapsed?[].concat(c.startAddress):b());return c},moveToAddress:function(a,e){function b(a,e){for(var b=c.document.body,d,h,k=0,l,f=a.length;k<f;k++)if(l=a[k],d=b,b=b.childNodes[l],!b){h=l;break}e?b?c.setStartBefore(b):c.setStart(d,h):b?c.setEndBefore(b):c.setEnd(d,h)}var c=this;b(a.startAddress,!0);!e&&a.endAddress&&b(a.endAddress);return c},equals:function(a){for(var e in this)if(this.hasOwnProperty(e)&&this[e]!==a[e])return!1;return!0},traversal:function(a,e){if(this.collapsed)return this;for(var b=this.createBookmark(),c=b.end,d=g.getNextDomNode(b.start,!1,e);d&&d!==c&&g.getPosition(d,c)&g.POSITION_PRECEDING;){var h=g.getNextDomNode(d,!1,e);a(d);d=h}return this.moveToBookmark(b)}}})();(function(){function f(b,a){var e=g.getNodeIndex;b=b.duplicate();b.collapse(a);var c=b.parentElement();if(!c.hasChildNodes())return{container:c,offset:0};for(var d=c.children,k,f=b.duplicate(),m=0,q=d.length-1,u=-1;m<=q;){u=Math.floor((m+q)/2);k=d[u];f.moveToElementText(k);var y=f.compareEndPoints("StartToStart",b);if(0<y)q=u-1;else if(0>y)m=u+1;else return{container:c,offset:e(k)}}if(-1==u){f.moveToElementText(c);f.setEndPoint("StartToStart",b);f=f.text.replace(/(\r\n|\r)/g,"\n").length;d=c.childNodes;if(!f)return k=d[d.length-1],{container:k,offset:k.nodeValue.length};for(e=d.length;0<f;)f-=d[--e].nodeValue.length;return{container:d[e],offset:-f}}f.collapse(0<y);f.setEndPoint(0<y?"StartToStart":"EndToStart",b);f=f.text.replace(/(\r\n|\r)/g,"\n").length;if(!f)return w.$empty[k.tagName]||w.$nonChild[k.tagName]?{container:c,offset:e(k)+(0<y?0:1)}:{container:k,offset:0<y?0:k.childNodes.length};for(;0<f;)try{d=k,k=k[0<y?"previousSibling":"nextSibling"],f-=k.nodeValue.length}catch(z){return{container:c,offset:e(d)}}return{container:k,offset:0<y?-f:k.nodeValue.length+f}}function d(b,a){if(b.item)a.selectNode(b.item(0));else{var e=f(b,!0);a.setStart(e.container,e.offset);0!=b.compareEndPoints("StartToEnd",b)&&(e=f(b,!1),a.setEnd(e.container,e.offset))}return a}function c(b){var a;try{a=b.getNative().createRange()}catch(h){return null}var e=a.item?a.item(0):a.parentElement();return(e.ownerDocument||e)===b.document?a:null}(K.Selection=function(b){var a=this;a.document=b;r.ie9below&&(b=g.getWindow(b).frameElement,g.on(b,"beforedeactivate",function(){a._bakIERange=a.getIERange()}),g.on(b,"activate",function(){try{!c(a)&&a._bakIERange&&a._bakIERange.select()}catch(e){}a._bakIERange=null}));b=b=null}).prototype={rangeInBody:function(b,a){var e=r.ie9below||a?b.item?b.item():b.parentElement():b.startContainer;return e===this.document.body||g.inDoc(e,this.document)},getNative:function(){var b=this.document;try{return b?r.ie9below?b.selection:g.getWindow(b).getSelection():null}catch(a){return null}},getIERange:function(){var b=c(this);return!b&&this._bakIERange?this._bakIERange:b},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var b=this.getStart();return b?g.findParents(b,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(r.ie9below){var b=c(this);return!(!b||!this.rangeInBody(b))}return!!this.getNative().rangeCount}catch(a){return!1}},getRange:function(){function b(e){for(var b=a.document.body.firstChild,c=e.collapsed;b&&b.firstChild;)e.setStart(b,0),b=b.firstChild;e.startContainer||e.setStart(a.document.body,0);c&&e.collapse(!0)}var a=this;if(null!=a._cachedRange)return this._cachedRange;var e=new t.editor.dom.Range(a.document);if(r.ie9below){var c=a.getIERange();if(c)try{d(c,e)}catch(k){b(e)}else b(e)}else{var l=a.getNative();if(l&&l.rangeCount)c=l.getRangeAt(0),l=l.getRangeAt(l.rangeCount-1),e.setStart(c.startContainer,c.startOffset).setEnd(l.endContainer,l.endOffset),e.collapsed&&g.isBody(e.startContainer)&&!e.startOffset&&b(e);else{if(this._bakRange&&g.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;b(e)}}return this._bakRange=e},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var b=r.ie9below?this.getIERange():this.getRange(),a,e;if(r.ie9below){if(!b)return this.document.body.firstChild;if(b.item)return b.item(0);a=b.duplicate();0<a.text.length&&a.moveStart("character",1);a.collapse(1);a=a.parentElement();for(e=b=b.parentElement();b=b.parentNode;)if(b==a){a=e;break}}else if(b.shrinkBoundary(),a=b.startContainer,1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,b.startOffset)]),3==a.nodeType)return a.parentNode;return a},getText:function(){var b;return this.isFocus()&&(b=this.getNative())?(b=r.ie9below?b.createRange():b.getRangeAt(0),r.ie9below?b.text:b.toString()):""},clearRange:function(){this.getNative()[r.ie9below?"empty":"removeAllRanges"]()}}})();(function(){function f(a,e){var b;if(e.textarea)if(n.isString(e.textarea))for(var c=0,d,f=g.getElementsByTagName(a,"textarea");d=f[c++];){if(d.id=="ueditor_textarea_"+e.options.textarea){b=d;break}}else b=e.textarea;b||(a.appendChild(b=g.createElement(document,"textarea",{name:e.options.textarea,id:"ueditor_textarea_"+e.options.textarea,style:"display:none"})),e.textarea=b);!b.getAttribute("name")&&b.setAttribute("name",e.options.textarea);b.value=e.hasContents()?e.options.allHtmlEnabled?e.getAllHtml():e.getContent(null,null,!0):""}var d=0,c,b=UE.Editor=function(a){this.uid=d++;aa.call(this);this.commands={};this.options=n.extend(n.clone(a||{}),UEDITOR_CONFIG,!0);this.shortcutkeys={};this.inputRules=[];this.outputRules=[];this.setOpt(b.defaultOptions(this));this.loadServerConfig();if(!n.isEmptyObject(UE.I18N)){a=this.options;var e;a:{var c=UE.I18N;for(e in c)break a;e=void 0}a.lang=e;UE.plugin.load(this);this.langIsReady=!0;this.fireEvent("langReady")}UE.instants["ueditorInstant"+this.uid]=this};b.prototype={registerCommand:function(a,e){this.commands[a]=e},ready:function(a){a&&(this.isReady?a.apply(this):this.addListener("ready",a))},setOpt:function(a,e){var b={};n.isString(a)?b[a]=e:b=a;n.extend(this.options,b,!0)},getOpt:function(a){return this.options[a]},destroy:function(){this.fireEvent("destroy");var a=this.container.parentNode,e=this.textarea;e?e.style.display="":(e=document.createElement("textarea"),a.parentNode.insertBefore(e,a));e.style.width=this.iframe.offsetWidth+"px";e.style.height=this.iframe.offsetHeight+"px";e.value=this.getContent();e.id=this.key;a.innerHTML="";g.remove(a);var a=this.key,b;for(b in this)this.hasOwnProperty(b)&&delete this[b];UE.delEditor(a)},render:function(a){var e=this.options;n.isString(a)&&(a=document.getElementById(a));if(a){e.minFrameWidth=e.initialFrameWidth?e.initialFrameWidth:e.initialFrameWidth=a.offsetWidth;e.initialFrameHeight?e.minFrameHeight=e.initialFrameHeight:e.initialFrameHeight=e.minFrameHeight=a.offsetHeight;a.style.width=/%$/.test(e.initialFrameWidth)?"100%":e.initialFrameWidth-parseInt(g.getComputedStyle(a,"padding-left"))-parseInt(g.getComputedStyle(a,"padding-right"))+"px";a.style.height=/%$/.test(e.initialFrameHeight)?"100%":e.initialFrameHeight-parseInt(g.getComputedStyle(a,"padding-top"))-parseInt(g.getComputedStyle(a,"padding-bottom"))+"px";a.style.zIndex=e.zIndex;var b=(L&&9>r.version?"":"\x3c!DOCTYPE html\x3e")+"\x3chtml xmlns\x3d'http://www.w3.org/1999/xhtml' class\x3d'view' \x3e\x3chead\x3e\x3cstyle type\x3d'text/css'\x3e.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}\x3c/style\x3e"+(e.iframeCssUrl?"\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+n.unhtml(e.iframeCssUrl)+"'/\x3e":"")+(e.initialStyle?"\x3cstyle\x3e"+e.initialStyle+"\x3c/style\x3e":"")+"\x3c/head\x3e\x3cbody class\x3d'view' \x3e\x3c/body\x3e\x3cscript type\x3d'text/javascript' "+(L?"defer\x3d'defer'":"")+" id\x3d'_initialScript'\x3esetTimeout(function(){editor \x3d window.parent.UE.instants['ueditorInstant"+this.uid+"'];editor._setup(document);},0);var _tmpScript \x3d document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);\x3c/script\x3e\x3c/html\x3e";a.appendChild(g.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(e.customDomain&&document.domain!=location.hostname?'document.domain\x3d"'+document.domain+'";':"")+'document.write("'+b+'");document.close();}())'}));a.style.overflow="hidden";setTimeout(function(){/%$/.test(e.initialFrameWidth)&&(e.minFrameWidth=e.initialFrameWidth=a.offsetWidth);/%$/.test(e.initialFrameHeight)&&(e.minFrameHeight=e.initialFrameHeight=a.offsetHeight,a.style.height=e.initialFrameHeight+"px")})}},_setup:function(a){var e=this,b=e.options;L?(a.body.disabled=!0,a.body.contentEditable=!0,a.body.disabled=!1):a.body.contentEditable=!0;a.body.spellcheck=!1;e.document=a;e.window=a.defaultView||a.parentWindow;e.iframe=e.window.frameElement;e.body=a.body;e.selection=new K.Selection(a);var c;r.gecko&&(c=this.selection.getNative())&&c.removeAllRanges();this._initEvents();for(var d=this.iframe.parentNode;!g.isBody(d);d=d.parentNode)if("FORM"==d.tagName){e.form=d;if(e.options.autoSyncData)g.on(e.window,"blur",function(){f(d,e)});else g.on(d,"submit",function(){f(this,e)});break}if(b.initialContent)if(b.autoClearinitialContent){var p=e.execCommand;e.execCommand=function(){e.fireEvent("firstBeforeExecCommand");return p.apply(e,arguments)};this._setDefaultContent(b.initialContent)}else this.setContent(b.initialContent,!1,!0);g.isEmptyNode(e.body)&&(e.body.innerHTML="");b.focus&&setTimeout(function(){e.focus(e.options.focusInEnd);!e.options.autoClearinitialContent&&e._selectionChange()},0);e.container||(e.container=this.iframe.parentNode);b.fullscreen&&e.ui&&e.ui.setFullScreen(!0);try{e.document.execCommand("2D-position",!1,!1)}catch(m){}try{e.document.execCommand("enableInlineTableEditing",!1,!1)}catch(m){}try{e.document.execCommand("enableObjectResizing",!1,!1)}catch(m){}e._bindshortcutKeys();e.isReady=1;e.fireEvent("ready");b.onready&&b.onready.call(e);if(!r.ie9below)g.on(e.window,["blur","focus"],function(a){if("blur"==a.type){e._bakRange=e.selection.getRange();try{e._bakNativeRange=e.selection.getNative().getRangeAt(0),e.selection.getNative().removeAllRanges()}catch(q){e._bakNativeRange=null}}else try{e._bakRange&&e._bakRange.select()}catch(q){}});r.gecko&&10902>=r.version&&(e.body.contentEditable=!1,setTimeout(function(){e.body.contentEditable=!0},100),setInterval(function(){e.body.style.height=e.iframe.offsetHeight-20+"px"},100));!b.isShow&&e.setHide();b.readonly&&e.setDisabled()},sync:function(a){(a=a?document.getElementById(a):g.findParent(this.iframe.parentNode,function(a){return"FORM"==a.tagName},!0))&&f(a,this)},setHeight:function(a,e){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px");!e&&(this.options.minFrameHeight=this.options.initialFrameHeight=a);this.body.style.height=a+"px";!e&&this.trigger("setHeight")},addshortcutkey:function(a,e){var b={};e?b[a]=e:b=a;n.extend(this.shortcutkeys,b)},_bindshortcutKeys:function(){var a=this,e=this.shortcutkeys;a.addListener("keydown",function(b,c){var d=c.keyCode||c.which,h;for(h in e)for(var l=e[h].split(","),f=0,u;u=l[f++];){u=u.split(":");var y=u[0];u=u[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(y.toLowerCase())||/^(\d+)$/.test(y))if("ctrl"==RegExp.$1&&(c.ctrlKey||c.metaKey)&&(""!=RegExp.$2?c[RegExp.$2.slice(1)+"Key"]:1)&&d==RegExp.$3||d==RegExp.$1)-1!=a.queryCommandState(h,u)&&a.execCommand(h,u),g.preventDefault(c)}})},getContent:function(a,e,b,c,d){a&&n.isFunction(a)&&(e=a,a="");if(e?!e():!this.hasContents())return"";this.fireEvent("beforegetcontent");e=UE.htmlparser(this.body.innerHTML,c);this.filterOutputRule(e);this.fireEvent("aftergetcontent",a,e);return e.toHtml(d)},getAllHtml:function(){var a=[];this.fireEvent("getAllHtml",a);if(r.ie&&8<r.version){var b="";n.each(this.document.styleSheets,function(a){b+=a.href?'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+a.href+'" /\x3e':"\x3cstyle\x3e"+a.cssText+"\x3c/style\x3e"});n.each(this.document.getElementsByTagName("script"),function(a){b+=a.outerHTML})}return"\x3chtml\x3e\x3chead\x3e"+(this.options.charset?'\x3cmeta http-equiv\x3d"Content-Type" content\x3d"text/html; charset\x3d'+this.options.charset+'"/\x3e':"")+(b||this.document.getElementsByTagName("head")[0].innerHTML)+a.join("\n")+"\x3c/head\x3e\x3cbody "+(L&&9>r.version?'class\x3d"view"':"")+"\x3e"+this.getContent(null,null,!0)+"\x3c/body\x3e\x3c/html\x3e"},getPlainTxt:function(){var a=new RegExp(g.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,""),b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,e){return w.$block[e]?"\n":b?b:""});return b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){return this.body[r.ie?"innerText":"textContent"].replace(new RegExp(g.fillChar,"g"),"").replace(/\u00a0/g," ")},setContent:function(a,b,c){this.fireEvent("beforesetcontent",a);a=UE.htmlparser(a);this.filterInputRule(a);a=a.toHtml();this.body.innerHTML=(b?this.body.innerHTML:"")+a;if("p"==this.options.enterTag)if(b=this.body.firstChild,!b||1==b.nodeType&&(w.$cdata[b.tagName]||"DIV"==b.tagName&&b.getAttribute("cdata_tag")||g.isCustomeNode(b))&&b===this.body.lastChild)this.body.innerHTML=""+this.body.innerHTML;else for(var e=this.document.createElement("p");b;){for(;b&&(3==b.nodeType||1==b.nodeType&&w.p[b.tagName]&&!w.$cdata[b.tagName]);)a=b.nextSibling,e.appendChild(b),b=a;if(e.firstChild)if(b)b.parentNode.insertBefore(e,b),e=this.document.createElement("p");else{this.body.appendChild(e);break}b=b.nextSibling}this.fireEvent("aftersetcontent");this.fireEvent("contentchange");!c&&this._selectionChange();this._bakRange=this._bakIERange=this._bakNativeRange=null;var d;r.gecko&&(d=this.selection.getNative())&&d.removeAllRanges();this.options.autoSyncData&&this.form&&f(this.form,this)},focus:function(a){try{var b=this.selection.getRange();if(a){var c=this.body.lastChild;c&&1==c.nodeType&&!w.$empty[c.tagName]&&(g.isEmptyBlock(c)?b.setStartAtFirst(c):b.setStartAtLast(c),b.collapse(!0));b.setCursor(!0)}else!b.collapsed&&g.isBody(b.startContainer)&&0==b.startOffset&&(c=this.body.firstChild)&&1==c.nodeType&&!w.$empty[c.tagName]&&b.setStartAtFirst(c).collapse(!0),b.select(!0);this.fireEvent("focus selectionchange")}catch(l){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var a=this.selection.getNative();if(a.empty&&r.ie){var b=document.body.createTextRange();b.moveToElementText(document.body);b.collapse(!0);b.select();a.empty()}else a.removeAllRanges()},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=n.bind(a._proxyDomEvent,a);g.on(b,"click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart".split(" "),a._proxyDomEvent);g.on(c,["focus","blur"],a._proxyDomEvent);g.on(a.body,"drop",function(b){r.gecko&&b.stopPropagation&&b.stopPropagation();a.fireEvent("contentchange")});g.on(b,["mouseup","keydown"],function(b){"keydown"==b.type&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)||2!=b.button&&a._selectionChange(250,b)})},_proxyDomEvent:function(a){return!1===this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())||!1===this.fireEvent(a.type.replace(/^on/,""),a)?!1:this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(a,b){var e=this,d=!1,k,f;r.ie&&9>r.version&&b&&"mouseup"==b.type&&!this.selection.getRange().collapsed&&(d=!0,k=b.clientX,f=b.clientY);clearTimeout(c);c=setTimeout(function(){if(e.selection&&e.selection.getNative()){var a;if(d&&"None"==e.selection.getNative().type){a=e.document.body.createTextRange();try{a.moveToPoint(k,f)}catch(u){a=null}}var c;a&&(c=e.selection.getIERange,e.selection.getIERange=function(){return a});e.selection.cache();c&&(e.selection.getIERange=c);e.selection._cachedRange&&e.selection._cachedStartElement&&(e.fireEvent("beforeselectionchange"),e.fireEvent("selectionchange",!!b),e.fireEvent("afterselectionchange"),e.selection.clear())}},a||50)},_callCmdFn:function(a,b){var e=b[0].toLowerCase(),c;c=(e=this.commands[e]||UE.commands[e])&&e[a];if(!(e&&c||"queryCommandState"!=a))return 0;if(c)return c.apply(this,b)},execCommand:function(a){a=a.toLowerCase();var b,c=this.commands[a]||UE.commands[a];if(!c||!c.execCommand)return null;c.notNeedUndo||this.__hasEnterExecCommand?(b=this._callCmdFn("execCommand",arguments),this.__hasEnterExecCommand||c.ignoreContentChange||this._ignoreContentChange||this.fireEvent("contentchange")):(this.__hasEnterExecCommand=!0,-1!=this.queryCommandState.apply(this,arguments)&&(this.fireEvent("saveScene"),this.fireEvent.apply(this,["beforeexeccommand",a].concat(arguments)),b=this._callCmdFn("execCommand",arguments),this.fireEvent.apply(this,["afterexeccommand",a].concat(arguments)),this.fireEvent("saveScene")),this.__hasEnterExecCommand=!1);this.__hasEnterExecCommand||c.ignoreContentChange||this._ignoreContentChange||this._selectionChange();return b},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){if(a)for(var b=0,c;c=a[b++];)if(0<this.document.getElementsByTagName(c).length)return!0;if(!g.isEmptyBlock(this.body))return!0;a=["div"];for(b=0;c=a[b++];){c=g.getElementsByTagName(this.document,c);for(var d=0,k;k=c[d++];)if(g.isCustomeNode(k))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var a;if("false"==this.body.contentEditable){this.body.contentEditable=!0;a=this.selection.getRange();try{a.moveToBookmark(this.lastBk),delete this.lastBk}catch(e){a.setStartAtFirst(this.body).collapse(!0)}a.select(!0);this.bkqueryCommandState&&(this.queryCommandState=this.bkqueryCommandState,delete this.bkqueryCommandState);this.bkqueryCommandValue&&(this.queryCommandValue=this.bkqueryCommandValue,delete this.bkqueryCommandValue);this.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var b=this;a=a?n.isArray(a)?a:[a]:[];"true"==b.body.contentEditable&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.bkqueryCommandValue=b.queryCommandValue,b.queryCommandState=function(e){return-1!=n.indexOf(a,e)?b.bkqueryCommandState.apply(b,arguments):-1},b.queryCommandValue=function(e){return-1!=n.indexOf(a,e)?b.bkqueryCommandValue.apply(b,arguments):null},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var b=this;b.document.getElementById("initContent")&&(b.body.innerHTML="",b.removeListener("firstBeforeExecCommand focus",a),setTimeout(function(){b.focus();b._selectionChange()},0))}return function(b){this.body.innerHTML='\x3cp id\x3d"initContent"\x3e'+b+"\x3c/p\x3e";this.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this.selection.getRange();if("none"==this.container.style.display){try{a.moveToBookmark(this.lastBk),delete this.lastBk}catch(e){a.setStartAtFirst(this.body).collapse(!0)}setTimeout(function(){a.select(!0)},100);this.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||(this.lastBk=this.selection.getRange().createBookmark(!0));this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(a){var b=UE.I18N[this.options.lang];if(!b)throw Error("not import language file");a=(a||"").split(".");for(var c=0,d;(d=a[c++])&&(b=b[d],b););return b},getContentLength:function(a,b){var e=this.getContent(!1,!1,!0).length;if(a){b=(b||[]).concat(["hr","img","iframe"]);for(var e=this.getContentTxt().replace(/[\t\r\n]+/g,"").length,c=0,d;d=b[c++];)e+=this.document.getElementsByTagName(d).length}return e},addInputRule:function(a){this.inputRules.push(a)},filterInputRule:function(a){for(var b=0,c;c=this.inputRules[b++];)c.call(this,a)},addOutputRule:function(a){this.outputRules.push(a)},filterOutputRule:function(a){for(var b=0,c;c=this.outputRules[b++];)c.call(this,a)},getActionUrl:function(a){a=this.getOpt(a)||a;var b=this.getOpt("imageUrl"),c=this.getOpt("serverUrl");!c&&b&&(c=b.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));return c?(c=c+(-1==c.indexOf("?")?"?":"\x26")+"action\x3d"+(a||""),n.formatUrl(c)):""}};n.inherits(b,aa)})();UE.Editor.defaultOptions=function(f){f=f.options.UEDITOR_ROOT_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:f+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:f+"lang/",theme:"default",themePath:f+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){function f(c){console&&console.error(c)}var d=this;setTimeout(function(){try{d.options.imageUrl&&d.setOpt("serverUrl",d.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var c=d.getActionUrl("config"),b=n.isCrossDomainUrl(c);d._serverConfigLoaded=!1;c&&UE.ajax.request(c,{method:"GET",dataType:b?"jsonp":"",onsuccess:function(a){try{var e=b?a:eval("("+a.responseText+")");n.extend(d.options,e);d.fireEvent("serverConfigLoaded");d._serverConfigLoaded=!0}catch(h){f(d.getLang("loadconfigFormatError"))}},onerror:function(){f(d.getLang("loadconfigHttpError"))}})}catch(a){f(d.getLang("loadconfigError"))}})};UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1};UE.Editor.prototype.afterConfigReady=function(f){if(f&&n.isFunction(f)){var d=this,c=function(){f.apply(d,arguments);d.removeListener("serverConfigLoaded",c)};d.isServerConfigLoaded()?f.call(d,"serverConfigLoaded"):d.addListener("serverConfigLoaded",c)}}})();UE.ajax=function(){function f(a){var b=[],e;for(e in a)if("method"!=e&&"timeout"!=e&&"async"!=e&&"dataType"!=e&&"callback"!=e&&void 0!=a[e]&&null!=a[e])if("function"!=(typeof a[e]).toLowerCase()&&"object"!=(typeof a[e]).toLowerCase())b.push(encodeURIComponent(e)+"\x3d"+encodeURIComponent(a[e]));else if(n.isArray(a[e]))for(var c=0;c<a[e].length;c++)b.push(encodeURIComponent(e)+"[]\x3d"+encodeURIComponent(a[e][c]));return b.join("\x26")}function d(b,c){var e=a(),d=!1,h={method:"POST",timeout:5E3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};"object"===typeof b&&(c=b,b=c.url);if(e&&b){var m=c?n.extend(h,c):h,h=f(m);n.isEmptyObject(m.data)||(h+=(h?"\x26":"")+f(m.data));var g=setTimeout(function(){4!=e.readyState&&(d=!0,e.abort(),clearTimeout(g))},m.timeout),u=m.method.toUpperCase(),y=b+(-1==b.indexOf("?")?"?":"\x26")+("POST"==u?"":h+"\x26noCache\x3d"+ +new Date);e.open(u,y,m.async);e.onreadystatechange=function(){if(4==e.readyState)if(d||200!=e.status)m.onerror(e);else m.onsuccess(e)};"POST"==u?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(h)):e.send(null)}}function c(a,b){function e(a){return function(){try{if(a)h.onerror&&h.onerror();else try{clearTimeout(v),c.apply(window,arguments)}catch(H){}}catch(H){h.onerror&&h.onerror.call(window,H)}finally{h.oncomplete&&h.oncomplete.apply(window,arguments);d.parentNode&&d.parentNode.removeChild(d);window[y]=null;try{delete window[y]}catch(H){}}}}var c=b.onsuccess||function(){},d=document.createElement("SCRIPT"),h=b||{},g=h.charset,u=h.jsonp||"callback",y,z=h.timeOut||0,v,C=new RegExp("(\\?|\x26)"+u+"\x3d([^\x26]*)"),E;if(n.isFunction(c))y="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[y]=e(0);else if(n.isString(c))y=c;else if(E=C.exec(a))y=E[2];a=a.replace(C,"$1"+u+"\x3d"+y);0>a.search(C)&&(a+=(0>a.indexOf("?")?"?":"\x26")+u+"\x3d"+y);u=f(b);n.isEmptyObject(b.data)||(u+=(u?"\x26":"")+f(b.data));u&&(a=a.replace(/\?/,"?"+u+"\x26"));d.onerror=e(1);z&&(v=setTimeout(e(1),z));(function(a,b,e){a.setAttribute("type","text/javascript");a.setAttribute("defer","defer");e&&a.setAttribute("charset",e);a.setAttribute("src",b);document.getElementsByTagName("head")[0].appendChild(a)})(d,a,g)}var b="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),b="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),b="ActiveXObject('Microsoft.XMLHTTP')"}catch(h){}}var a=new Function("return new "+b);return{request:function(a,b){b&&"jsonp"==b.dataType?c(a,b):d(a,b)},getJSONP:function(a,b,d){c(a,{data:b,oncomplete:d})}}}();UE.filterWord=function(){function f(c){return c=c.replace(/[\d.]+\w+/g,function(b){return n.transUnitToPx(b)})}function d(c){return c.replace(/[\t\r\n]+/g," ").replace(/\x3c!--[\s\S]*?--\x3e/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(b){if(r.opera)return"";try{if(/Bitmap/i.test(b))return"";var a=b.match(/width:([ \d.]*p[tx])/i)[1],e=b.match(/height:([ \d.]*p[tx])/i)[1],c=b.match(/src=\s*"([^"]*)"/i)[1];return'\x3cimg width\x3d"'+f(a)+'" height\x3d"'+f(e)+'" src\x3d"'+c+'" /\x3e'}catch(l){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"\x3cp\x3e\x3cstrong\x3e$1\x3c/strong\x3e\x3c/p\x3e").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(b,a,e,c){return"class"==a&&"MsoListParagraph"==c?b:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(b,a,e){return e.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(b,a,e,c){b=[];c=c.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(a){return n.transUnitToPx(a)}).split(/;\s*/g);e=0;for(var d;d=c[e];e++){var h,g=d.split(":");if(2==g.length&&(d=g[0].toLowerCase(),h=g[1].toLowerCase(),!(/^(background)\w*/.test(d)&&0==h.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(d)&&/^0\w+$/.test(h)))){switch(d){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":/<table/.test(a)||(b[e]=d.replace(/^mso-|-alt$/g,"")+":"+f(h));continue;case "horiz-align":b[e]="text-align:"+h;continue;case "vert-align":b[e]="vertical-align:"+h;continue;case "font-color":case "mso-foreground":b[e]="color:"+h;continue;case "mso-background":case "mso-highlight":b[e]="background:"+h;continue;case "mso-default-height":b[e]="min-height:"+f(h);continue;case "mso-default-width":b[e]="min-width:"+f(h);continue;case "mso-padding-between-alt":b[e]="border-collapse:separate;border-spacing:"+f(h);continue;case "text-line-through":if("single"==h||"double"==h)b[e]="text-decoration:line-through";continue;case "mso-zero-height":"yes"==h&&(b[e]="display:none");continue;case "margin":if(!/[1-9]/.test(h))continue}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(d)||/text\-indent|padding|margin/.test(d)&&/\-[\d.]+/.test(h)||(b[e]=d+":"+g[1])}}return a+(b.length?' style\x3d"'+b.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(c){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(c)?d(c):c}}();(function(){function f(a,b,e){a.push("\n");return b+(e?1:-1)}function d(a,b){for(var e=0;e<b;e++)a.push("    ")}function c(a,e,h,k){switch(a.type){case "root":for(var l=0,m;m=a.children[l++];)h&&"element"==m.type&&!w.$inlineWithA[m.tagName]&&1<l&&(f(e,k,!0),d(e,k)),c(m,e,h,k);break;case "text":"pre"==a.parentNode.tagName?e.push(a.data):e.push(g[a.parentNode.tagName]?n.html(a.data):a.data.replace(/[ ]{2}/g," \x26nbsp;"));break;case "element":b(a,e,h,k);break;case "comment":e.push("\x3c!--"+a.data+"--\x3e")}return e}function b(a,b,e,h){var l="";if(a.attrs){var l=[],g=a.attrs,m;for(m in g)l.push(m+(void 0!==g[m]?'\x3d"'+(k[m]?n.html(g[m]).replace(/["]/g,function(a){return"\x26quot;"}):n.unhtml(g[m]))+'"':""));l=l.join(" ")}b.push("\x3c"+a.tagName+(l?" "+l:"")+(w.$empty[a.tagName]?"/":"")+"\x3e");e&&!w.$inlineWithA[a.tagName]&&"pre"!=a.tagName&&a.children&&a.children.length&&(h=f(b,h,!0),d(b,h));if(a.children&&a.children.length)for(l=0;g=a.children[l++];)e&&"element"==g.type&&!w.$inlineWithA[g.tagName]&&1<l&&(f(b,h),d(b,h)),c(g,b,e,h);w.$empty[a.tagName]||(e&&!w.$inlineWithA[a.tagName]&&"pre"!=a.tagName&&a.children&&a.children.length&&(h=f(b,h),d(b,h)),b.push("\x3c/"+a.tagName+"\x3e"))}function a(b,e){var c;if("element"==b.type&&b.getAttr("id")==e)return b;if(b.children&&b.children.length)for(var d=0;c=b.children[d++];)if(c=a(c,e))return c}function e(a,b,c){"element"==a.type&&a.tagName==b&&c.push(a);if(a.children&&a.children.length)for(var d=0,h;h=a.children[d++];)e(h,b,c)}function h(a,b){if(a.children&&a.children.length)for(var e=0,c;c=a.children[e];)h(c,b),c.parentNode&&(c.children&&c.children.length&&b(c),c.parentNode&&e++);else b(a)}var l=UE.uNode=function(a){this.type=a.type;this.data=a.data;this.tagName=a.tagName;this.parentNode=a.parentNode;this.attrs=a.attrs||{};this.children=a.children},k={href:1,src:1,_src:1,_href:1,cdata_data:1},g={style:1,script:1};l.createElement=function(a){return/[<>]/.test(a)?UE.htmlparser(a).children[0]:new l({type:"element",children:[],tagName:a})};l.createText=function(a,b){return new UE.uNode({type:"text",data:b?a:n.unhtml(a||"")})};l.prototype={toHtml:function(a){var b=[];c(this,b,a,0);return b.join("")},innerHTML:function(a){if("element"!=this.type||w.$empty[this.tagName])return this;if(n.isString(a)){if(this.children)for(var b=0,e;e=this.children[b++];)e.parentNode=null;this.children=[];a=UE.htmlparser(a);for(b=0;e=a.children[b++];)this.children.push(e),e.parentNode=this;return this}a=new UE.uNode({type:"root",children:this.children});return a.toHtml()},innerText:function(a,b){if("element"!=this.type||w.$empty[this.tagName])return this;if(a){if(this.children)for(var e=0,c;c=this.children[e++];)c.parentNode=null;this.children=[];this.appendChild(l.createText(a,b));return this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var a=this.parentNode,b=0,e;e=a.children[b];b++)if(e===this)return 0==b?null:a.children[b-1]},nextSibling:function(){for(var a=this.parentNode,b=0,e;e=a.children[b++];)if(e===this)return a.children[b]},replaceChild:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var e=0,c;c=this.children[e];e++)if(c===b)return this.children.splice(e,1,a),b.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if("root"==this.type||"element"==this.type&&!w.$empty[this.tagName]){this.children||(this.children=[]);a.parentNode&&a.parentNode.removeChild(a);for(var b=0,e;e=this.children[b];b++)if(e===a){this.children.splice(b,1);break}this.children.push(a);a.parentNode=this;return a}},insertBefore:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var e=0,c;c=this.children[e];e++)if(c===b)return this.children.splice(e,0,a),a.parentNode=this,a}},insertAfter:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var e=0,c;c=this.children[e];e++)if(c===b)return this.children.splice(e+1,0,a),a.parentNode=this,a}},removeChild:function(a,b){if(this.children)for(var e=0,c;c=this.children[e];e++)if(c===a){this.children.splice(e,1);c.parentNode=null;if(b&&c.children&&c.children.length)for(var d=0,h;h=c.children[d];d++)this.children.splice(e+d,0,h),h.parentNode=this;return c}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,b){if(a)if(this.attrs||(this.attrs={}),n.isObject(a))for(var e in a)a[e]?this.attrs[e.toLowerCase()]=a[e]:delete this.attrs[e];else b?this.attrs[a.toLowerCase()]=b:delete this.attrs[a];else delete this.attrs},getIndex:function(){for(var a=this.parentNode,b=0,e;e=a.children[b];b++)if(e===this)return b;return-1},getNodeById:function(b){var e;if(this.children&&this.children.length)for(var c=0;e=this.children[c++];)if(e=a(e,b))return e},getNodesByTagName:function(a){a=n.trim(a).replace(/[ ]{2,}/g," ").split(" ");var b=[],c=this;n.each(a,function(a){if(c.children&&c.children.length)for(var d=0,h;h=c.children[d++];)e(h,a,b)});return b},getStyle:function(a){var b=this.getAttr("style");return b?(a=b.match(new RegExp("(^|;)\\s*"+a+":([^;]+)","i")))&&a[0]?a[2]:"":""},setStyle:function(a,b){function e(a,b){c=c.replace(new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi"),"$1");b&&(c=a+":"+n.unhtml(b)+";"+c)}var c=this.getAttr("style");c||(c="");if(n.isObject(a))for(var d in a)e(d,a[d]);else e(a,b);this.setAttr("style",n.trim(c))},traversal:function(a){this.children&&this.children.length&&h(this,a);return this}}})();UE.htmlparser=function(f,d){function c(a,b){if(m[a.tagName]){var e=k.createElement(m[a.tagName]);a.appendChild(e);e.appendChild(k.createText(b))}else a.appendChild(k.createText(b))}function b(a,c,d){var h;if(h=p[c]){for(var f=a,g;"root"!=f.type;){if(n.isArray(h)?-1!=n.indexOf(h,f.tagName):h==f.tagName){a=f;g=!0;break}f=f.parentNode}g||(a=b(a,n.isArray(h)?h[0]:h))}h=new k({parentNode:a,type:"element",tagName:c.toLowerCase(),children:w.$empty[c]?null:[]});if(d){for(f={};g=e.exec(d);)f[g[1].toLowerCase()]=l[g[1].toLowerCase()]?g[2]||g[3]||g[4]:n.unhtml(g[2]||g[3]||g[4]);h.attrs=f}a.children.push(h);return w.$empty[c]?a:h}var a=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,h={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};f=f.replace(new RegExp(g.fillChar,"g"),"");d||(f=f.replace(new RegExp("[\\r\\t\\n"+(d?"":" ")+"]*\x3c/?(\\w+)\\s*(?:[^\x3e]*)\x3e[\\r\\t\\n"+(d?"":" ")+"]*","g"),function(a,b){return b&&h[b.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(d?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(d?"":" ")+"]+$"),"")}));for(var l={href:1,src:1},k=UE.uNode,p={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},m={ol:"li",ul:"li"},q,u=0,y=0,z=new k({type:"root",children:[]}),v=z;q=a.exec(f);){u=q.index;try{if(u>y&&c(v,f.slice(y,u)),q[3])w.$cdata[v.tagName]?c(v,q[0]):v=b(v,q[3].toLowerCase(),q[4]);else if(q[1]){if("root"!=v.type)if(w.$cdata[v.tagName]&&!w.$cdata[q[1]])c(v,q[0]);else{for(u=v;"element"==v.type&&v.tagName!=q[1].toLowerCase();)if(v=v.parentNode,"root"==v.type)throw v=u,"break";v=v.parentNode}}else q[2]&&v.children.push(new k({type:"comment",data:q[2],parentNode:v}))}catch(C){}y=a.lastIndex}y<f.length&&c(v,f.slice(y));return z};UE.filterNode=function(){function f(d,c){switch(d.type){case "element":var b;if(b=c[d.tagName])if("-"===b)d.parentNode.removeChild(d);else if(n.isFunction(b)){var a=d.parentNode,e=d.getIndex();b(d);if(d.parentNode){if(d.children)for(b=0;e=d.children[b];)f(e,c),e.parentNode&&b++}else for(b=e;e=a.children[b];)f(e,c),e.parentNode&&b++}else{if((b=b.$)&&d.attrs){var e={},h;for(a in b){h=d.getAttr(a);if("style"==a&&n.isArray(b[a])){var l=[];n.each(b[a],function(a){var b;(b=d.getStyle(a))&&l.push(a+":"+b)});h=l.join(";")}h&&(e[a]=h)}d.attrs=e}if(d.children)for(b=0;e=d.children[b];)f(e,c),e.parentNode&&b++}else if(w.$cdata[d.tagName])d.parentNode.removeChild(d);else for(a=d.parentNode,e=d.getIndex(),d.parentNode.removeChild(d,!0),b=e;e=a.children[b];)f(e,c),e.parentNode&&b++;break;case "comment":d.parentNode.removeChild(d)}}return function(d,c){if(n.isEmptyObject(c))return d;var b;(b=c["-"])&&n.each(b.split(" "),function(a){c[a]="-"});b=0;for(var a;a=d.children[b];)f(a,c),a.parentNode&&b++;return d}}();UE.plugin=function(){var f={};return{register:function(d,c,b,a){b&&n.isFunction(b)&&(a=b,b=null);f[d]={optionName:b||d,execFn:c,afterDisabled:a}},load:function(d){n.each(f,function(c){var b=c.execFn.call(d);!1!==d.options[c.optionName]?b&&n.each(b,function(a,b){switch(b.toLowerCase()){case "shortcutkey":d.addshortcutkey(a);break;case "bindevents":n.each(a,function(a,b){d.addListener(b,a)});break;case "bindmultievents":n.each(n.isArray(a)?a:[a],function(a){var b=n.trim(a.type).split(/\s+/);n.each(b,function(b){d.addListener(b,a.handler)})});break;case "commands":n.each(a,function(a,b){d.commands[b]=a});break;case "outputrule":d.addOutputRule(a);break;case "inputrule":d.addInputRule(a);break;case "defaultoptions":d.setOpt(a)}}):c.afterDisabled&&c.afterDisabled.call(d)});n.each(UE.plugins,function(c){c.call(d)})},run:function(d,c){var b=f[d];b&&b.exeFn.call(c)}}}();var ha=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"\x3d":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},X=UE.LocalStorage=function(){function f(){var b=document.createElement("div");b.style.display="none";if(!b.addBehavior)return null;b.addBehavior("#default#userdata");return{getItem:function(a){var e=null;try{document.body.appendChild(b),b.load(c),e=b.getAttribute(a),document.body.removeChild(b)}catch(h){}return e},setItem:function(a,e){document.body.appendChild(b);b.setAttribute(a,e);b.save(c);document.body.removeChild(b)},removeItem:function(a){document.body.appendChild(b);b.removeAttribute(a);b.save(c);document.body.removeChild(b)}}}var d=window.localStorage||f()||null,c="localStorage";return{saveLocalData:function(b,a){return d&&a?(d.setItem(b,a),!0):!1},getLocalData:function(b){return d?d.getItem(b):null},removeItem:function(b){d&&d.removeItem(b)}}}();(function(){UE.Editor.prototype.setPreferences=function(f,d){var c={};n.isString(f)?c[f]=d:c=f;var b=X.getLocalData("ueditor_preference");b&&(b=n.str2json(b))?n.extend(b,c):b=c;b&&X.saveLocalData("ueditor_preference",n.json2str(b))};UE.Editor.prototype.getPreferences=function(f){var d=X.getLocalData("ueditor_preference");return d&&(d=n.str2json(d))?f?d[f]:d:null};UE.Editor.prototype.removePreferences=function(f){var d=X.getLocalData("ueditor_preference");d&&(d=n.str2json(d))&&(d[f]=void 0,delete d[f]);d&&X.saveLocalData("ueditor_preference",n.json2str(d))}})();UE.plugins.defaultfilter=function(){var f=this;f.setOpt({disabledTableInTable:!0});f.addInputRule(function(d){function c(a){for(;a&&"element"==a.type;){if("td"==a.tagName)return!0;a=a.parentNode}return!1}var b=this.options.allowDivTransToP,a;d.traversal(function(e){if("element"==e.type)if(w.$cdata[e.tagName]||!f.options.autoClearEmptyNode||!w.$inline[e.tagName]||w.$empty[e.tagName]||e.attrs&&!n.isEmptyObject(e.attrs))switch(e.tagName){case "style":case "script":e.setAttr({cdata_tag:e.tagName,cdata_data:e.innerHTML()||"",_ue_custom_node_:"true"});e.tagName="div";e.innerHTML("");break;case "a":(a=e.getAttr("href"))&&e.setAttr("_href",a);break;case "img":if((a=e.getAttr("src"))&&/^data:/.test(a)){e.parentNode.removeChild(e);break}e.setAttr("_src",e.getAttr("src"));break;case "span":r.webkit&&(a=e.getStyle("white-space"))&&/nowrap|normal/.test(a)&&(e.setStyle("white-space",""),f.options.autoClearEmptyNode&&n.isEmptyObject(e.attrs)&&e.parentNode.removeChild(e,!0));(a=e.getAttr("id"))&&/^_baidu_bookmark_/i.test(a)&&e.parentNode.removeChild(e);break;case "p":if(a=e.getAttr("align"))e.setAttr("align"),e.setStyle("text-align",a);n.each(e.children,function(a){if("element"==a.type&&"p"==a.tagName){var b=a.nextSibling();for(e.parentNode.insertAfter(a,e);b;){var c=b.nextSibling();e.parentNode.insertAfter(b,a);a=b;b=c}return!1}});e.firstChild()||e.innerHTML(r.ie?"\x26nbsp;":"\x3cbr/\x3e");break;case "div":if(e.getAttr("cdata_tag"))break;if((a=e.getAttr("class"))&&/^line number\d+/.test(a))break;if(!b)break;for(var d,l=UE.uNode.createElement("p");d=e.firstChild();)"text"!=d.type&&UE.dom.dtd.$block[d.tagName]?l.firstChild()?(e.parentNode.insertBefore(l,e),l=UE.uNode.createElement("p")):e.parentNode.insertBefore(d,e):l.appendChild(d);l.firstChild()&&e.parentNode.insertBefore(l,e);e.parentNode.removeChild(e);break;case "dl":e.tagName="ul";break;case "dt":case "dd":e.tagName="li";break;case "li":(d=e.getAttr("class"))&&/list\-/.test(d)||e.setAttr();d=e.getNodesByTagName("ol ul");UE.utils.each(d,function(a){e.parentNode.insertAfter(a,e)});break;case "td":case "th":case "caption":e.children&&e.children.length||e.appendChild(r.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case "table":f.options.disabledTableInTable&&c(e)&&(e.parentNode.insertBefore(UE.uNode.createText(e.innerText()),e),e.parentNode.removeChild(e))}else e.firstChild()?"span"!=e.tagName||e.attrs&&!n.isEmptyObject(e.attrs)||e.parentNode.removeChild(e,!0):e.parentNode.removeChild(e)})});f.addOutputRule(function(d){var c;d.traversal(function(b){if("element"==b.type)if(!f.options.autoClearEmptyNode||!w.$inline[b.tagName]||w.$empty[b.tagName]||b.attrs&&!n.isEmptyObject(b.attrs))switch(b.tagName){case "div":if(c=b.getAttr("cdata_tag"))b.tagName=c,b.appendChild(UE.uNode.createText(b.getAttr("cdata_data"))),b.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""});break;case "a":(c=b.getAttr("_href"))&&b.setAttr({href:n.html(c),_href:""});break;case "span":(c=b.getAttr("id"))&&/^_baidu_bookmark_/i.test(c)&&b.parentNode.removeChild(b);break;case "img":(c=b.getAttr("_src"))&&b.setAttr({src:b.getAttr("_src"),_src:""})}else b.firstChild()?"span"!=b.tagName||b.attrs&&!n.isEmptyObject(b.attrs)||b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b)})})};UE.commands.inserthtml={execCommand:function(f,d,c){var b=this,a;if(d&&!0!==b.fireEvent("beforeinserthtml",d)){a=b.selection.getRange();f=a.document.createElement("div");f.style.display="inline";c||(c=UE.htmlparser(d),b.options.filterRules&&UE.filterNode(c,b.options.filterRules),b.filterInputRule(c),d=c.toHtml());f.innerHTML=n.trim(d);if(!a.collapsed&&(c=a.startContainer,g.isFillChar(c)&&a.setStartBefore(c),c=a.endContainer,g.isFillChar(c)&&a.setEndAfter(c),a.txtToElmBoundary(),a.endContainer&&1==a.endContainer.nodeType&&(c=a.endContainer.childNodes[a.endOffset])&&g.isBr(c)&&a.setEndAfter(c),0==a.startOffset&&(c=a.startContainer,g.isBoundaryNode(c,"firstChild")&&(c=a.endContainer,a.endOffset==(3==c.nodeType?c.nodeValue.length:c.childNodes.length)&&g.isBoundaryNode(c,"lastChild")&&(b.body.innerHTML="",a.setStart(b.body.firstChild,0).collapse(!0)))),!a.collapsed&&a.deleteContents(),1==a.startContainer.nodeType)){c=a.startContainer.childNodes[a.startOffset];var e;if(c&&g.isBlockElm(c)&&(e=c.previousSibling)&&g.isBlockElm(e)){for(a.setEnd(e,e.childNodes.length).collapse();c.firstChild;)e.appendChild(c.firstChild);g.remove(c)}}var h,l,k=0,p;a.inFillChar()&&(c=a.startContainer,g.isFillChar(c)?(a.setStartBefore(c).collapse(!0),g.remove(c)):g.isFillChar(c,!0)&&(c.nodeValue=c.nodeValue.replace(P,""),a.startOffset--,a.collapsed&&a.collapse(!0)));var m=g.findParentByTagName(a.startContainer,"li",!0);if(m){for(var q;c=f.firstChild;){for(;c&&(3==c.nodeType||!g.isBlockElm(c)||"HR"==c.tagName);)q=c.nextSibling,a.insertNode(c).collapse(),h=c,c=q;if(c)if(/^(ol|ul)$/i.test(c.tagName)){for(;c.firstChild;)h=c.firstChild,g.insertAfter(m,c.firstChild),m=m.nextSibling;g.remove(c)}else q=c.nextSibling,e=b.document.createElement("li"),g.insertAfter(m,e),e.appendChild(c),h=c,c=q,m=e}m=g.findParentByTagName(a.startContainer,"li",!0);g.isEmptyBlock(m)&&g.remove(m);h&&a.setStartAfter(h).collapse(!0).select(!0)}else{for(;c=f.firstChild;){if(k){for(h=b.document.createElement("p");c&&(3==c.nodeType||!w.$block[c.tagName]);)p=c.nextSibling,h.appendChild(c),c=p;h.firstChild&&(c=h)}a.insertNode(c);p=c.nextSibling;if(!k&&c.nodeType==g.NODE_ELEMENT&&g.isBlockElm(c)&&(h=g.findParent(c,function(a){return g.isBlockElm(a)}))&&"body"!=h.tagName.toLowerCase()&&(!w[h.tagName][c.nodeName]||c.parentNode!==h)){if(w[h.tagName][c.nodeName])for(l=c.parentNode;l!==h;)e=l,l=l.parentNode;else e=h;g.breakParent(c,e||l);e=c.previousSibling;g.trimWhiteTextNode(e);e.childNodes.length||g.remove(e);!r.ie&&(q=c.nextSibling)&&g.isBlockElm(q)&&q.lastChild&&!g.isBr(q.lastChild)&&q.appendChild(b.document.createElement("br"));k=1}q=c.nextSibling;if(!f.firstChild&&q&&g.isBlockElm(q)){a.setStart(q,0).collapse(!0);break}a.setEndAfter(c).collapse()}c=a.startContainer;p&&g.isBr(p)&&g.remove(p);if(g.isBlockElm(c)&&g.isEmptyNode(c))if(p=c.nextSibling)g.remove(c),1==p.nodeType&&w.$block[p.tagName]&&a.setStart(p,0).collapse(!0).shrinkBoundary();else try{c.innerHTML=r.ie?g.fillChar:"\x3cbr/\x3e"}catch(u){a.setStartBefore(c),g.remove(c)}try{a.select(!0)}catch(u){}}setTimeout(function(){a=b.selection.getRange();a.scrollToView(b.autoHeightEnabled,b.autoHeightEnabled?g.getXY(b.iframe).y:0);b.fireEvent("afterinserthtml",d)},200)}}};UE.plugins.autotypeset=function(){function f(a,b){if(!a||3==a.nodeType)return 0;if(g.isBr(a))return 1;if(a&&a.parentNode&&l[a.tagName.toLowerCase()])return k&&k.contains(a)||a.getAttribute("pagebreak")?0:b?!g.isEmptyBlock(a):g.isEmptyBlock(a,new RegExp("[\\s"+g.fillChar+"]","g"))}function d(a){a.style.cssText||(g.removeAttributes(a,["style"]),"span"==a.tagName.toLowerCase()&&g.hasNoAttributes(a)&&g.remove(a,!0))}function c(b,c){var l;if(c){if(!a.pasteFilter)return;l=this.document.createElement("div");l.innerHTML=c.html}else l=this.document.body;for(var m=g.getElementsByTagName(l,"*"),p=0,z;z=m[p++];)if(!0!==this.fireEvent("excludeNodeinautotype",z)){a.clearFontSize&&z.style.fontSize&&(g.removeStyle(z,"font-size"),d(z));a.clearFontFamily&&z.style.fontFamily&&(g.removeStyle(z,"font-family"),d(z));if(f(z)){if(a.mergeEmptyline)for(var v=z.nextSibling,C,E=g.isBr(z);f(v);){C=v;v=C.nextSibling;if(E&&(!v||v&&!g.isBr(v)))break;g.remove(C)}if(a.removeEmptyline&&g.inDoc(z,l)&&!h[z.parentNode.tagName.toLowerCase()]){if(g.isBr(z)&&(v=z.nextSibling)&&!g.isBr(v))continue;g.remove(z);continue}}f(z,!0)&&"SPAN"!=z.tagName&&(a.indent&&(z.style.textIndent=a.indentValue),a.textAlign&&(z.style.textAlign=a.textAlign));if(a.removeClass&&z.className&&!e[z.className.toLowerCase()]){if(k&&k.contains(z))continue;g.removeAttributes(z,["class"])}if(a.imageBlockLine&&"img"==z.tagName.toLowerCase()&&!z.getAttribute("emotion"))if(c)switch(E=z,a.imageBlockLine){case "left":case "right":case "none":for(var v=E.parentNode,F;w.$inline[v.tagName]||"A"==v.tagName;)v=v.parentNode;C=v;if("P"==C.tagName&&"center"==g.getStyle(C,"text-align")&&!g.isBody(C)&&1==g.getChildCount(C,function(a){return!g.isBr(a)&&!g.isWhitespace(a)}))if(F=C.previousSibling,v=C.nextSibling,F&&v&&1==F.nodeType&&1==v.nodeType&&F.tagName==v.tagName&&g.isBlockElm(F)){for(F.appendChild(C.firstChild);v.firstChild;)F.appendChild(v.firstChild);g.remove(C);g.remove(v)}else g.setStyle(C,"text-align","");g.setStyle(E,"float",a.imageBlockLine);break;case "center":if("center"!=this.queryCommandValue("imagefloat")){v=E.parentNode;g.setStyle(E,"float","none");for(C=E;v&&1==g.getChildCount(v,function(a){return!g.isBr(a)&&!g.isWhitespace(a)})&&(w.$inline[v.tagName]||"A"==v.tagName);)C=v,v=v.parentNode;v=this.document.createElement("p");g.setAttributes(v,{style:"text-align:center"});C.parentNode.insertBefore(v,C);v.appendChild(C);g.setStyle(C,"float","")}}else this.selection.getRange().selectNode(z).select(),this.execCommand("imagefloat",a.imageBlockLine);a.removeEmptyNode&&a.removeTagNames[z.tagName.toLowerCase()]&&g.hasNoAttributes(z)&&g.isEmptyBlock(z)&&g.remove(z)}a.tobdc&&(m=UE.htmlparser(l.innerHTML),m.traversal(function(a){if("text"==a.type){for(var b=a.data,b=n.html(b),e="",c=0;c<b.length;c++)e=32==b.charCodeAt(c)?e+String.fromCharCode(12288):127>b.charCodeAt(c)?e+String.fromCharCode(b.charCodeAt(c)+65248):e+b.charAt(c);a.data=e}}),l.innerHTML=m.toHtml());a.bdc2sb&&(m=UE.htmlparser(l.innerHTML),m.traversal(function(a){if("text"==a.type){for(var b=a.data,e="",c=0;c<b.length;c++)var d=b.charCodeAt(c),e=65281<=d&&65373>=d?e+String.fromCharCode(b.charCodeAt(c)-65248):12288==d?e+String.fromCharCode(b.charCodeAt(c)-12288+32):e+b.charAt(c);a.data=e}}),l.innerHTML=m.toHtml());c&&(c.html=l.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:n.extend({div:1},w.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var b=this,a=b.options.autotypeset,e={selectTdClass:1,pagebreak:1,anchorclass:1},h={li:1},l={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},k;a&&(function(){var a=b.getPreferences("autotypeset");n.extend(b.options.autotypeset,a)}(),a.pasteFilter&&b.addListener("beforepaste",c),b.commands.autotypeset={execCommand:function(){b.removeListener("beforepaste",c);a.pasteFilter&&b.addListener("beforepaste",c);c.call(b);b.sync()}})};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var f=g.findParentByTagName(this.iframe,"form",!1);f&&!1!==this.fireEvent("beforesubmit")&&(this.sync(),f.submit())}}}}});UE.plugin.register("background",function(){function f(a){var b={};a=a.split(";");n.each(a,function(a){var e=a.indexOf(":"),c=n.trim(a.substr(0,e)).toLowerCase();c&&(b[c]=n.trim(a.substr(e+1)||""))});return b}function d(a){if(a){var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push(e+":"+a[e]+"; ");n.cssRule("editor_background",b.length?"body{"+b.join("")+"}":"",c.document)}else n.cssRule("editor_background","",c.document)}var c=this,b,a=/body[\s]*\{(.+)\}/i,e=c.hasContents;c.hasContents=function(){return c.queryCommandValue("background")?!0:e.apply(c,arguments)};return{bindEvents:{getAllHtml:function(a,b){var e=this.body,d=g.getComputedStyle(e,"background-image"),h;h=0<d.indexOf(c.options.imagePath)?d.substring(d.indexOf(c.options.imagePath),d.length-1).replace(/"|\(|\)/ig,""):"none"!=d?d.replace(/url\("?|"?\)/ig,""):"";var d='\x3cstyle type\x3d"text/css"\x3ebody{',e={"background-color":g.getComputedStyle(e,"background-color")||"#ffffff","background-image":h?"url("+h+")":"","background-repeat":g.getComputedStyle(e,"background-repeat")||"","background-position":r.ie?g.getComputedStyle(e,"background-position-x")+" "+g.getComputedStyle(e,"background-position-y"):g.getComputedStyle(e,"background-position"),height:g.getComputedStyle(e,"height")},f;for(f in e)e.hasOwnProperty(f)&&(d+=f+":"+e[f]+"; ");b.push(d+"}\x3c/style\x3e ")},aftersetcontent:function(){0==b&&d()}},inputRule:function(a){b=!1;n.each(a.getNodesByTagName("p"),function(a){var e=a.getAttr("data-background");e&&(b=!0,d(f(e)),a.parentNode.removeChild(a))})},outputRule:function(b){var e=(n.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(a);e&&b.appendChild(UE.uNode.createElement('\x3cp style\x3d"display:none;" data-background\x3d"'+n.trim(e[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"\x3e\x3cbr/\x3e\x3c/p\x3e'))},commands:{background:{execCommand:function(a,b){d(b)},queryCommandValue:function(){var b=(n.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(a);return b?f(b[1]):null},notNeedUndo:!0}}}});UE.commands.imagefloat={execCommand:function(f,d){var c=this.selection.getRange();if(!c.collapsed){var b=c.getClosedNode();if(b&&"IMG"==b.tagName)switch(d){case "left":case "right":case "none":for(var a=b.parentNode,e,h;w.$inline[a.tagName]||"A"==a.tagName;)a=a.parentNode;e=a;if("P"==e.tagName&&"center"==g.getStyle(e,"text-align")){if(!g.isBody(e)&&1==g.getChildCount(e,function(a){return!g.isBr(a)&&!g.isWhitespace(a)}))if(a=e.previousSibling,h=e.nextSibling,a&&h&&1==a.nodeType&&1==h.nodeType&&a.tagName==h.tagName&&g.isBlockElm(a)){for(a.appendChild(e.firstChild);h.firstChild;)a.appendChild(h.firstChild);g.remove(e);g.remove(h)}else g.setStyle(e,"text-align","");c.selectNode(b).select()}g.setStyle(b,"float","none"==d?"":d);"none"==d&&g.removeAttributes(b,"align");break;case "center":if("center"!=this.queryCommandValue("imagefloat")){a=b.parentNode;g.setStyle(b,"float","");g.removeAttributes(b,"align");for(e=b;a&&1==g.getChildCount(a,function(a){return!g.isBr(a)&&!g.isWhitespace(a)})&&(w.$inline[a.tagName]||"A"==a.tagName);)e=a,a=a.parentNode;c.setStartBefore(e).setCursor(!1);a=this.document.createElement("div");a.appendChild(e);g.setStyle(e,"float","");this.execCommand("insertHtml",'\x3cp id\x3d"_img_parent_tmp" style\x3d"text-align:center"\x3e'+a.innerHTML+"\x3c/p\x3e");e=this.document.getElementById("_img_parent_tmp");null!=e&&e.hasOwnProperty("id")&&(e.removeAttribute("id"),e=e.firstChild,c.selectNode(e).select(),(h=e.parentNode.nextSibling)&&g.isEmptyNode(h)&&g.remove(h))}}}},queryCommandValue:function(){var f=this.selection.getRange(),d;return f.collapsed?"none":(f=f.getClosedNode())&&1==f.nodeType&&"IMG"==f.tagName?(d=g.getComputedStyle(f,"float")||f.getAttribute("align"),"none"==d&&(d="center"==g.getComputedStyle(f.parentNode,"text-align")?"center":d),{left:1,right:1,center:1}[d]?d:"none"):"none"},queryCommandState:function(){var f=this.selection.getRange();return f.collapsed?-1:(f=f.getClosedNode())&&1==f.nodeType&&"IMG"==f.tagName?0:-1}};UE.commands.insertimage={execCommand:function(f,d){function c(a){n.each(["width","height","border","hspace","vspace"],function(b){a[b]&&(a[b]=parseInt(a[b],10)||0)});n.each(["src","_src"],function(b){a[b]&&(a[b]=n.unhtmlForUrl(a[b]))});n.each(["title","alt"],function(b){a[b]&&(a[b]=n.unhtml(a[b]))})}d=n.isArray(d)?d:[d];if(d.length){var b=this.selection.getRange(),a=b.getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",d)){if(!a||!/img/i.test(a.tagName)||"edui-faked-video"==a.className&&-1==a.className.indexOf("edui-upload-video")||a.getAttribute("word_img")){var b=[],a="",e;e=d[0];if(1==d.length)c(e),a='\x3cimg src\x3d"'+e.src+'" '+(e._src?' _src\x3d"'+e._src+'" ':"")+("left"==e.floatStyle||"right"==e.floatStyle?' style\x3d"float:'+e.floatStyle+';"':"")+(e.width?'width\x3d"'+e.width+'" ':"")+(e.height?' height\x3d"'+e.height+'" ':"")+(e.title&&""!=e.title?' title\x3d"'+e.title+'"':"")+(e.border&&"0"!=e.border?' border\x3d"'+e.border+'"':"")+(e.alt&&""!=e.alt?' alt\x3d"'+e.alt+'"':"")+(e.hspace&&"0"!=e.hspace?' hspace \x3d "'+e.hspace+'"':"")+(e.vspace&&"0"!=e.vspace?' vspace \x3d "'+e.vspace+'"':"")+"/\x3e","center"==e.floatStyle&&(a='\x3cp style\x3d"text-align: center"\x3e'+a+"\x3c/p\x3e"),b.push(a);else for(var h=0;e=d[h++];)c(e),a="\x3cp "+("center"==e.floatStyle?'style\x3d"text-align: center" ':"")+'\x3e\x3cimg src\x3d"'+e.src+'" '+(e._src?' _src\x3d"'+e._src+'" ':"")+(e.width?'width\x3d"'+e.width+'" ':"")+(e._src?' _src\x3d"'+e._src+'" ':"")+(e.height?' height\x3d"'+e.height+'" ':"")+' style\x3d"'+(e.floatStyle&&"center"!=e.floatStyle?"float:"+e.floatStyle+";":"")+(e.border||"")+'" '+(e.title?' title\x3d"'+e.title+'"':"")+" /\x3e\x3c/p\x3e",b.push(a);this.execCommand("insertHtml",b.join(""))}else e=d.shift(),h=e.floatStyle,delete e.floatStyle,g.setAttributes(a,e),this.execCommand("imagefloat",h),0<d.length&&(b.setStartAfter(a).setCursor(!1,!0),this.execCommand("insertimage",d));this.fireEvent("afterinsertimage",d)}}}};UE.plugins.justify=function(){var f=g.isBlockElm,d={left:1,right:1,center:1,justify:1},c=function(b,a){var e=b.createBookmark(),c=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!g.isBookmarkNode(a):!g.isWhitespace(a)};b.enlarge(!0);for(var d=b.createBookmark(),k=g.getNextDomNode(d.start,!1,c),p=b.cloneRange(),m;k&&!(g.getPosition(k,d.end)&g.POSITION_FOLLOWING);)if(3!=k.nodeType&&f(k))k=g.getNextDomNode(k,!0,c);else{for(p.setStartBefore(k);k&&k!==d.end&&!f(k);)m=k,k=g.getNextDomNode(k,!1,null,function(a){return!f(a)});p.setEndAfter(m);k=p.getCommonAncestor();if(!g.isBody(k)&&f(k))g.setStyles(k,n.isString(a)?{"text-align":a}:a);else{k=b.document.createElement("p");g.setStyles(k,n.isString(a)?{"text-align":a}:a);var q=p.extractContents();k.appendChild(q);p.insertNode(k)}k=g.getNextDomNode(k,!1,c)}return b.moveToBookmark(d).moveToBookmark(e)};UE.commands.justify={execCommand:function(b,a){var e=this.selection.getRange(),d;e.collapsed&&(d=this.document.createTextNode("p"),e.insertNode(d));c(e,a);d&&(e.setStartBefore(d).collapse(!0),g.remove(d));e.select();return!0},queryCommandValue:function(){var b=this.selection.getStart(),b=g.getComputedStyle(b,"text-align");return d[b]?b:"left"},queryCommandState:function(){var b=this.selection.getStart();return b&&g.findParentByTagName(b,["td","th","caption"],!0)?-1:0}}};UE.plugins.font=function(){function f(a){for(var b;b=a.parentNode;)if("SPAN"==b.tagName&&1==g.getChildCount(b,function(a){return!g.isBookmarkNode(a)&&!g.isBr(a)}))b.style.cssText+=a.style.cssText,g.remove(a,!0),a=b;else break}function d(a,b,c){if(e[b]&&(a.adjustmentBoundary(),!a.collapsed&&1==a.startContainer.nodeType)){var d=a.startContainer.childNodes[a.startOffset];if(d&&g.isTagNode(d,"span")){var h=a.createBookmark();n.each(g.getElementsByTagName(d,"span"),function(a){!a.parentNode||g.isBookmarkNode(a)||"backcolor"==b&&g.getComputedStyle(a,"background-color").toLowerCase()===c||(g.removeStyle(a,e[b]),0==a.style.cssText.replace(/^\s+$/,"").length&&g.remove(a,!0))});a.moveToBookmark(h)}}}function c(a,b,e){var c=a.collapsed,h=a.createBookmark();if(c)for(c=h.start.parentNode;w.$inline[c.tagName];)c=c.parentNode;else c=g.getCommonAncestor(h.start,h.end);n.each(g.getElementsByTagName(c,"span"),function(a){if(a.parentNode&&!g.isBookmarkNode(a))if(/\s*border\s*:\s*none;?\s*/i.test(a.style.cssText))/^\s*border\s*:\s*none;?\s*$/.test(a.style.cssText)?g.remove(a,!0):g.removeStyle(a,"border");else{/border/i.test(a.style.cssText)&&"SPAN"==a.parentNode.tagName&&/border/i.test(a.parentNode.style.cssText)&&(a.style.cssText=a.style.cssText.replace(/border[^:]*:[^;]+;?/gi,""));if("fontborder"!=b||"none"!=e)for(var c=a.nextSibling;c&&1==c.nodeType&&"SPAN"==c.tagName;){if(g.isBookmarkNode(c)&&"fontborder"==b)a.appendChild(c);else if(c.style.cssText==a.style.cssText&&(g.moveChild(c,a),g.remove(c)),a.nextSibling===c)break;c=a.nextSibling}f(a);r.ie&&8<r.version&&(c=g.findParent(a,function(a){return"SPAN"==a.tagName&&/background-color/.test(a.style.cssText)}))&&!/background-color/.test(a.style.cssText)&&(a.style.backgroundColor=c.style.backgroundColor)}});a.moveToBookmark(h);d(a,b,e)}var b={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},a={underline:1,strikethrough:1,fontborder:1},e={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};this.setOpt({fontfamily:[{name:"songti",val:"\u5b8b\u4f53,SimSun"},{name:"yahei",val:"\u5fae\u8f6f\u96c5\u9ed1,Microsoft YaHei"},{name:"kaiti",val:"\u6977\u4f53,\u6977\u4f53_GB2312, SimKai"},{name:"heiti",val:"\u9ed1\u4f53, SimHei"},{name:"lishu",val:"\u96b6\u4e66, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});this.addInputRule(function(a){n.each(a.getNodesByTagName("u s del font strike"),function(a){if("font"==a.tagName){var b=[],e;for(e in a.attrs)switch(e){case "size":b.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[a.attrs[e]]||a.attrs[e])+"px");break;case "color":b.push("color:"+a.attrs[e]);break;case "face":b.push("font-family:"+a.attrs[e]);break;case "style":b.push(a.attrs[e])}a.attrs={style:b.join(";")}}else b="u"==a.tagName?"underline":"line-through",a.attrs={style:(a.getAttr("style")||"")+"text-decoration:"+b+";"};a.tagName="span"})});for(var h in b)(function(b,e){UE.commands[b]={execCommand:function(d,h){h=h||(this.queryCommandState(d)?"none":"underline"==d?"underline":"fontborder"==d?"1px solid #000":"line-through");var k=this.selection.getRange(),f;if("default"==h)k.collapsed&&(f=this.document.createTextNode("font"),k.insertNode(f).select()),this.execCommand("removeFormat","span,a",e),f&&(k.setStartBefore(f).collapse(!0),g.remove(f)),c(k,d,h),k.select();else if(k.collapsed){var l=g.findParentByTagName(k.startContainer,"span",!0);f=this.document.createTextNode("font");if(!l||l.children.length||l[r.ie?"innerText":"textContent"].replace(P,"").length){k.insertNode(f);k.selectNode(f).select();l=k.document.createElement("span");if(a[b]){if(g.findParentByTagName(f,"a",!0)){k.setStartBefore(f).setCursor();g.remove(f);return}this.execCommand("removeFormat","span,a",e)}l.style.cssText=e+":"+h;f.parentNode.insertBefore(l,f);if(!r.ie||r.ie&&9==r.version)for(var m=l.parentNode;!g.isBlockElm(m);)"SPAN"==m.tagName&&(l.style.cssText=m.style.cssText+";"+l.style.cssText),m=m.parentNode;la?setTimeout(function(){k.setStart(l,0).collapse(!0);c(k,d,h);k.select()}):(k.setStart(l,0).collapse(!0),c(k,d,h),k.select())}else k.insertNode(f),a[b]&&(k.selectNode(f).select(),this.execCommand("removeFormat","span,a",e,null),l=g.findParentByTagName(f,"span",!0),k.setStartBefore(f)),l&&(l.style.cssText+=";"+e+":"+h),k.collapse(!0).select();g.remove(f)}else a[b]&&this.queryCommandValue(b)&&this.execCommand("removeFormat","span,a",e),k=this.selection.getRange(),k.applyInlineStyle("span",{style:e+":"+h}),c(k,d,h),k.select();return!0},queryCommandValue:function(a){var b=this.selection.getStart();if("underline"==a||"strikethrough"==a){for(var c=b;c&&!g.isBlockElm(c)&&!g.isBody(c);){if(1==c.nodeType&&(a=g.getComputedStyle(c,e),"none"!=a))return a;c=c.parentNode}return"none"}if("fontborder"==a){for(a=b;a&&w.$inline[a.tagName];){if((c=g.getComputedStyle(a,"border"))&&/1px/.test(c)&&/solid/.test(c))return c;a=a.parentNode}return""}return"FontSize"==a?(c=g.getComputedStyle(b,e),(a=/^([\d\.]+)(\w+)$/.exec(c))?Math.floor(a[1])+a[2]:c):g.getComputedStyle(b,e)},queryCommandState:function(b){if(!a[b])return 0;var e=this.queryCommandValue(b);return"fontborder"==b?/1px/.test(e)&&/solid/.test(e):"underline"==b?/underline/.test(e):/line\-through/.test(e)}}})(h,b[h])};UE.plugins.link=function(){function f(d){var c=d.startContainer,b=d.endContainer;(c=g.findParentByTagName(c,"a",!0))&&d.setStartBefore(c);(b=g.findParentByTagName(b,"a",!0))&&d.setEndAfter(b)}UE.commands.unlink={execCommand:function(){var d=this.selection.getRange(),c;if(!d.collapsed||g.findParentByTagName(d.startContainer,"a",!0))c=d.createBookmark(),f(d),d.removeInlineStyle("a").moveToBookmark(c).select()},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};UE.commands.link={execCommand:function(d,c){var b;c._href&&(c._href=n.unhtml(c._href,/[<">]/g));c.href&&(c.href=n.unhtml(c.href,/[<">]/g));c.textValue&&(c.textValue=n.unhtml(c.textValue,/[<">]/g));var a=b=this.selection.getRange(),e=a.cloneRange(),h=this.queryCommandValue("link");f(a=a.adjustmentBoundary());var l=a.startContainer;1==l.nodeType&&h&&(l=l.childNodes[a.startOffset])&&1==l.nodeType&&"A"==l.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(l[r.ie?"innerText":"textContent"])&&(l[r.ie?"innerText":"textContent"]=n.html(c.textValue||c.href));if(!e.collapsed||h)a.removeInlineStyle("a"),e=a.cloneRange();if(e.collapsed){var h=a.document.createElement("a"),k;c.textValue?(k=n.html(c.textValue),delete c.textValue):k=n.html(c.href);g.setAttributes(h,c);(l=g.findParentByTagName(e.startContainer,"a",!0))&&g.isInNodeEndBoundary(e,l)&&a.setStartAfter(l).collapse(!0);h[r.ie?"innerText":"textContent"]=k;a.insertNode(h).selectNode(h)}else a.applyInlineStyle("a",c);b.collapse().select(!0)},queryCommandValue:function(){var d=this.selection.getRange(),c;if(d.collapsed){if(c=d.startContainer,(c=1==c.nodeType?c:c.parentNode)&&(c=g.findParentByTagName(c,"a",!0))&&!g.isInNodeEndBoundary(d,c))return c}else{d.shrinkBoundary();var b=3!=d.startContainer.nodeType&&d.startContainer.childNodes[d.startOffset]?d.startContainer.childNodes[d.startOffset]:d.startContainer,a=3==d.endContainer.nodeType||0==d.endOffset?d.endContainer:d.endContainer.childNodes[d.endOffset-1],d=d.getCommonAncestor();c=g.findParentByTagName(d,"a",!0);if(!c&&1==d.nodeType)for(var d=d.getElementsByTagName("a"),e,h,f=0,k;k=d[f++];)if(e=g.getPosition(k,b),h=g.getPosition(k,a),(e&g.POSITION_FOLLOWING||e&g.POSITION_CONTAINS)&&(h&g.POSITION_PRECEDING||h&g.POSITION_CONTAINS)){c=k;break}return c}},queryCommandState:function(){var d=this.selection.getRange().getClosedNode();return!d||"edui-faked-video"!=d.className&&-1==d.className.indexOf("edui-upload-video")?0:-1}}};UE.plugins.insertframe=function(){var f=this;f.addListener("selectionchange",function(){f._iframe&&delete f._iframe})};UE.commands.scrawl={queryCommandState:function(){return r.ie&&8>=r.version?-1:0}};UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});this.commands.removeformat={execCommand:function(f,d,c,b,a){function e(a){if(3==a.nodeType||"span"!=a.tagName.toLowerCase())return 0;if(r.ie){var b=a.attributes;if(b.length){a=0;for(var e=b.length;a<e;a++)if(b[a].specified)return 0;return 1}}return!a.attributes.length}var h=new RegExp("^(?:"+(d||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),l=c?[]:(b||this.options.removeFormatAttributes).split(",");f=new K.Range(this.document);var k,p,m=function(a){return 1==a.nodeType};f=this.selection.getRange();(function(b){var d=b.createBookmark();b.collapsed&&b.enlarge(!0);if(!a){var f=g.findParentByTagName(b.startContainer,"a",!0);f&&b.setStartBefore(f);(f=g.findParentByTagName(b.endContainer,"a",!0))&&b.setEndAfter(f)}k=b.createBookmark();for(f=k.start;(p=f.parentNode)&&!g.isBlockElm(p);)g.breakParent(f,p),g.clearEmptySibling(f);if(k.end){for(f=k.end;(p=f.parentNode)&&!g.isBlockElm(p);)g.breakParent(f,p),g.clearEmptySibling(f);for(var f=g.getNextDomNode(k.start,!1,m),q;f&&f!=k.end;)q=g.getNextDomNode(f,!0,m),w.$empty[f.tagName.toLowerCase()]||g.isBookmarkNode(f)||(h.test(f.tagName)?c?(g.removeStyle(f,c),e(f)&&"text-decoration"!=c&&g.remove(f,!0)):g.remove(f,!0):w.$tableContent[f.tagName]||w.$list[f.tagName]||(g.removeAttributes(f,l),e(f)&&g.remove(f,!0))),f=q}f=k.start.parentNode;!g.isBlockElm(f)||w.$tableContent[f.tagName]||w.$list[f.tagName]||g.removeAttributes(f,l);f=k.end.parentNode;k.end&&g.isBlockElm(f)&&!w.$tableContent[f.tagName]&&!w.$list[f.tagName]&&g.removeAttributes(f,l);b.moveToBookmark(k).moveToBookmark(d);f=b.startContainer;for(q=b.collapsed;1==f.nodeType&&g.isEmptyNode(f)&&w.$removeEmpty[f.tagName];)d=f.parentNode,b.setStartBefore(f),b.startContainer===b.endContainer&&b.endOffset--,g.remove(f),f=d;if(!q)for(f=b.endContainer;1==f.nodeType&&g.isEmptyNode(f)&&w.$removeEmpty[f.tagName];)d=f.parentNode,b.setEndBefore(f),g.remove(f),f=d})(f);f.select()}}};UE.plugins.blockquote=function(){this.commands.blockquote={execCommand:function(f,d){var c=this.selection.getRange(),b=g.filterNodeList(this.selection.getStartElementPath(),"blockquote"),a=w.blockquote,e=c.createBookmark();if(b){var a=c.startContainer,a=g.isBlockElm(a)?a:g.findParent(a,function(a){return g.isBlockElm(a)}),h=c.endContainer,h=g.isBlockElm(h)?h:g.findParent(h,function(a){return g.isBlockElm(a)}),a=g.findParentByTagName(a,"li",!0)||a,h=g.findParentByTagName(h,"li",!0)||h;"LI"==a.tagName||"TD"==a.tagName||a===b||g.isBody(a)?g.remove(b,!0):g.breakParent(a,b);a!==h&&(b=g.findParentByTagName(h,"blockquote"))&&("LI"==h.tagName||"TD"==h.tagName||g.isBody(h)?b.parentNode&&g.remove(b,!0):g.breakParent(h,b));for(var l=g.getElementsByTagName(this.document,"blockquote"),b=0,k;k=l[b++];)k.childNodes.length?g.getPosition(k,a)&g.POSITION_FOLLOWING&&g.getPosition(k,h)&g.POSITION_PRECEDING&&g.remove(k,!0):g.remove(k)}else{b=c.cloneRange();l=h=1==b.startContainer.nodeType?b.startContainer:b.startContainer.parentNode;for(k=1;;){if(g.isBody(h)){l!==h?c.collapsed?(b.selectNode(l),k=0):b.setStartBefore(l):b.setStart(h,0);break}if(!a[h.tagName]){c.collapsed?b.selectNode(l):b.setStartBefore(l);break}l=h;h=h.parentNode}if(k)for(l=h=h=1==b.endContainer.nodeType?b.endContainer:b.endContainer.parentNode;;){if(g.isBody(h)){l!==h?b.setEndAfter(l):b.setEnd(h,h.childNodes.length);break}if(!a[h.tagName]){b.setEndAfter(l);break}l=h;h=h.parentNode}h=c.document.createElement("blockquote");g.setAttributes(h,d);h.appendChild(b.extractContents());b.insertNode(h);a=g.getElementsByTagName(h,"blockquote");for(b=0;h=a[b++];)h.parentNode&&g.remove(h,!0)}c.moveToBookmark(e).select()},queryCommandState:function(){return g.filterNodeList(this.selection.getStartElementPath(),"blockquote")?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(f){var d=this.selection.getRange();if(d.collapsed)return d;for(var c=d.createBookmark(),b=c.end,a=function(a){return!g.isBr(a)&&!g.isWhitespace(a)},e=g.getNextDomNode(c.start,!1,a);e&&g.getPosition(e,b)&g.POSITION_PRECEDING&&(3==e.nodeType&&(e.nodeValue=e.nodeValue["touppercase"==f?"toUpperCase":"toLowerCase"]()),e=g.getNextDomNode(e,!0,a),e!==b););d.moveToBookmark(c).select()}};UE.commands.indent={execCommand:function(){var f=this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+f})},queryCommandState:function(){var f=g.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return f&&f.style.textIndent&&parseInt(f.style.textIndent)?1:0}};UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands.preview={execCommand:function(){var f=window.open("","_blank","").document;f.open();f.write('\x3c!DOCTYPE html\x3e\x3chtml\x3e\x3chead\x3e\x3cmeta charset\x3d"utf-8"/\x3e\x3cscript src\x3d"'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"\x3e\x3c/script\x3e\x3cscript\x3esetTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3cdiv\x3e"+this.getContent(null,null,!0)+"\x3c/div\x3e\x3c/body\x3e\x3c/html\x3e");f.close()},notNeedUndo:1};UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var f=this.body,d=this.selection.getRange();d.selectNodeContents(f);g.isEmptyBlock(f)&&(r.opera&&f.firstChild&&1==f.firstChild.nodeType&&d.setStartAtFirst(f.firstChild),d.collapse(!0));d.select(!0)},notNeedUndo:1};this.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var f=g.isBlockElm,d=["TD","LI","PRE"],c=function(b,a,e,c){var h=b.createBookmark(),k=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!g.isBookmarkNode(a):!g.isWhitespace(a)},p;b.enlarge(!0);var m=b.createBookmark();p=g.getNextDomNode(m.start,!1,k);for(var q=b.cloneRange(),u;p&&!(g.getPosition(p,m.end)&g.POSITION_FOLLOWING);)if(3!=p.nodeType&&f(p))p=g.getNextDomNode(p,!0,k);else{for(q.setStartBefore(p);p&&p!==m.end&&!f(p);)u=p,p=g.getNextDomNode(p,!1,null,function(a){return!f(a)});q.setEndAfter(u);p=b.document.createElement(a);e&&(g.setAttributes(p,e),c&&"customstyle"==c&&e.style&&(p.style.cssText=e.style));p.appendChild(q.extractContents());g.isEmptyNode(p)&&g.fillChar(b.document,p);q.insertNode(p);var y=p.parentNode;f(y)&&!g.isBody(p.parentNode)&&-1==n.indexOf(d,y.tagName)&&(c&&"customstyle"==c||(y.getAttribute("dir")&&p.setAttribute("dir",y.getAttribute("dir")),y.style.cssText&&(p.style.cssText=y.style.cssText+";"+p.style.cssText),y.style.textAlign&&!p.style.textAlign&&(p.style.textAlign=y.style.textAlign),y.style.textIndent&&!p.style.textIndent&&(p.style.textIndent=y.style.textIndent),y.style.padding&&!p.style.padding&&(p.style.padding=y.style.padding)),e&&/h\d/i.test(y.tagName)&&!/h\d/i.test(p.tagName)?(g.setAttributes(y,e),c&&"customstyle"==c&&e.style&&(y.style.cssText=e.style),g.remove(p,!0),p=y):g.remove(p.parentNode,!0));p=-1!=n.indexOf(d,y.tagName)?y:p;p=g.getNextDomNode(p,!1,k)}return b.moveToBookmark(m).moveToBookmark(h)};this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});this.commands.paragraph={execCommand:function(b,a,e,d){b=this.selection.getRange();if(b.collapsed){var h=this.document.createTextNode("p");b.insertNode(h);if(r.ie){var f=h.previousSibling;f&&g.isWhitespace(f)&&g.remove(f);(f=h.nextSibling)&&g.isWhitespace(f)&&g.remove(f)}}b=c(b,a,e,d);h&&(b.setStartBefore(h).collapse(!0),pN=h.parentNode,g.remove(h),g.isBlockElm(pN)&&g.isEmptyNode(pN)&&g.fillNode(this.document,pN));r.gecko&&b.collapsed&&1==b.startContainer.nodeType&&(e=b.startContainer.childNodes[b.startOffset])&&1==e.nodeType&&e.tagName.toLowerCase()==a&&b.setStart(e,0).collapse(!0);b.select();return!0},queryCommandValue:function(){var b=g.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return b?b.tagName.toLowerCase():""}}};(function(){var f=g.isBlockElm,d=function(b){return g.filterNodeList(b.selection.getStartElementPath(),function(a){return a&&1==a.nodeType&&a.getAttribute("dir")})},c=function(b,a,e){var c=function(a){return 1==a.nodeType?!g.isBookmarkNode(a):!g.isWhitespace(a)};if((a=d(a))&&b.collapsed)return a.setAttribute("dir",e),b;a=b.createBookmark();b.enlarge(!0);for(var l=b.createBookmark(),k=g.getNextDomNode(l.start,!1,c),p=b.cloneRange(),m;k&&!(g.getPosition(k,l.end)&g.POSITION_FOLLOWING);)if(3!=k.nodeType&&f(k))k=g.getNextDomNode(k,!0,c);else{for(p.setStartBefore(k);k&&k!==l.end&&!f(k);)m=k,k=g.getNextDomNode(k,!1,null,function(a){return!f(a)});p.setEndAfter(m);k=p.getCommonAncestor();if(!g.isBody(k)&&f(k))k.setAttribute("dir",e);else{k=b.document.createElement("p");k.setAttribute("dir",e);var q=p.extractContents();k.appendChild(q);p.insertNode(k)}k=g.getNextDomNode(k,!1,c)}return b.moveToBookmark(l).moveToBookmark(a)};UE.commands.directionality={execCommand:function(b,a){var e=this.selection.getRange();if(e.collapsed){var d=this.document.createTextNode("d");e.insertNode(d)}c(e,this,a);d&&(e.setStartBefore(d).collapse(!0),g.remove(d));e.select();return!0},queryCommandValue:function(){var b=d(this);return b?b.getAttribute("dir"):"ltr"}}})();UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(f){if(-1!==this.queryCommandState(f)){this.execCommand("insertHtml","\x3chr\x3e");f=this.selection.getRange();var d=f.startContainer;if(1==d.nodeType&&!d.childNodes[f.startOffset]){var c;(c=d.childNodes[f.startOffset-1])&&1==c.nodeType&&"HR"==c.tagName&&("p"==this.options.enterTag?(c=this.document.createElement("p"),f.insertNode(c),f.setStart(c,0).setCursor()):(c=this.document.createElement("br"),f.insertNode(c),f.setStartBefore(c).setCursor()))}return!0}},queryCommandState:function(){return g.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};this.addListener("delkeydown",function(f,d){var c=this.selection.getRange();c.txtToElmBoundary(!0);if(g.isStartInblock(c)){var b=c.startContainer.previousSibling;if(b&&g.isTagNode(b,"hr"))return g.remove(b),c.select(),g.preventDefault(d),!0}})};UE.commands.time=UE.commands.date={execCommand:function(f,d){function c(a,b){var e=("0"+a.getHours()).slice(-2),c=("0"+a.getMinutes()).slice(-2),d=("0"+a.getSeconds()).slice(-2);return(b||"hh:ii:ss").replace(/hh/ig,e).replace(/ii/ig,c).replace(/ss/ig,d)}function b(a,b){var e=("000"+a.getFullYear()).slice(-4),c=e.slice(-2),d=("0"+(a.getMonth()+1)).slice(-2),h=("0"+a.getDate()).slice(-2);return(b||"yyyy-mm-dd").replace(/yyyy/ig,e).replace(/yy/ig,c).replace(/mm/ig,d).replace(/dd/ig,h)}var a=new Date;this.execCommand("insertHtml","time"==f?c(a,d):b(a,d))}};UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});this.commands.rowspacing={execCommand:function(f,d,c){this.execCommand("paragraph","p",{style:"margin-"+c+":"+d+"px"});return!0},queryCommandValue:function(f,d){var c=g.filterNodeList(this.selection.getStartElementPath(),function(b){return g.isBlockElm(b)});return c?(c=g.getComputedStyle(c,"margin-"+d).replace(/[^\d]/g,""))?c:0:0}}};UE.plugins.lineheight=function(){this.setOpt({lineheight:"1 1.5 1.75 2 3 4 5".split(" ")});this.commands.lineheight={execCommand:function(f,d){this.execCommand("paragraph","p",{style:"line-height:"+("1"==d?"normal":d+"em")});return!0},queryCommandValue:function(){var f=g.filterNodeList(this.selection.getStartElementPath(),function(d){return g.isBlockElm(d)});if(f)return f=g.getComputedStyle(f,"line-height"),"normal"==f?1:f.replace(/[^\d.]*/ig,"")}}};UE.plugins.insertcode=function(){var f=this;f.ready(function(){n.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",f.document)});f.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});f.commands.insertcode={execCommand:function(d,c){var b=this.selection.getRange(),a=g.findParentByTagName(b.startContainer,"pre",!0);if(a)a.className="brush:"+c+";toolbar:false;";else{var e="";b.collapsed?e=r.ie&&r.ie11below?8>=r.version?"\x26nbsp;":"":"\x3cbr/\x3e":(a=b.extractContents(),b=this.document.createElement("div"),b.appendChild(a),n.each(UE.filterNode(UE.htmlparser(b.innerHTML.replace(/[\r\t]/g,"")),this.options.filterTxtRules).children,function(a){r.ie&&r.ie11below&&8<r.version?("element"==a.type?"br"==a.tagName?e+="\n":w.$empty[a.tagName]||(n.each(a.children,function(b){"element"==b.type?"br"==b.tagName?e+="\n":w.$empty[a.tagName]||(e+=b.innerText()):e+=b.data}),/\n$/.test(e)||(e+="\n")):e+=a.data+"\n",!a.nextSibling()&&/\n$/.test(e)&&(e=e.replace(/\n$/,""))):r.ie&&r.ie11below?("element"==a.type?"br"==a.tagName?e+="\x3cbr\x3e":w.$empty[a.tagName]||(n.each(a.children,function(b){"element"==b.type?"br"==b.tagName?e+="\x3cbr\x3e":w.$empty[a.tagName]||(e+=b.innerText()):e+=b.data}),/br>$/.test(e)||(e+="\x3cbr\x3e")):e+=a.data+"\x3cbr\x3e",!a.nextSibling()&&/<br>$/.test(e)&&(e=e.replace(/<br>$/,""))):(e+="element"==a.type?w.$empty[a.tagName]?"":a.innerText():a.data,!/br\/?\s*>$/.test(e)&&a.nextSibling()&&(e+="\x3cbr\x3e"))}));this.execCommand("inserthtml",'\x3cpre id\x3d"coder" class\x3d"brush:'+c+';toolbar:false"\x3e'+e+"\x3c/pre\x3e",!0);a=this.document.getElementById("coder");g.removeAttributes(a,"id");(b=a.previousSibling)&&(3==b.nodeType&&1==b.nodeValue.length&&r.ie&&6==r.version||g.isEmptyBlock(b))&&g.remove(b);b=this.selection.getRange();g.isEmptyBlock(a)?b.setStart(a,0).setCursor(!1,!0):b.selectNodeContents(a).select()}},queryCommandValue:function(){var d=this.selection.getStartElementPath(),c="";n.each(d,function(b){if("PRE"==b.nodeName)return c=(b=b.className.match(/brush:([^;]+)/))&&b[1]?b[1]:"",!1});return c}};f.addInputRule(function(d){n.each(d.getNodesByTagName("pre"),function(c){var b=c.getNodesByTagName("br");b.length?r.ie&&r.ie11below&&8<r.version&&n.each(b,function(a){var b=UE.uNode.createText("\n");a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}):r.ie&&r.ie11below&&8<r.version||(b=c.innerText().split(/\n/),c.innerHTML(""),n.each(b,function(a){a.length&&c.appendChild(UE.uNode.createText(a));c.appendChild(UE.uNode.createElement("br"))}))})});f.addOutputRule(function(d){n.each(d.getNodesByTagName("pre"),function(c){var b="";n.each(c.children,function(a){b="text"==a.type?b+a.data.replace(/[ ]/g,"\x26nbsp;").replace(/\n$/,""):"br"==a.tagName?b+"\n":b+(w.$empty[a.tagName]?a.innerText():"")});c.innerText(b.replace(/(&nbsp;|\n)+$/,""))})});f.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,drafts:1,pagebreak:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};f.queryCommandState=function(d){return!this.notNeedCodeQuery[d.toLowerCase()]&&this.selection&&this.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)};f.addListener("beforeenterkeydown",function(){var d=f.selection.getRange(),c=g.findParentByTagName(d.startContainer,"pre",!0);if(c){f.fireEvent("saveScene");d.collapsed||d.deleteContents();if(!r.ie||r.ie9above){c=f.document.createElement("br");d.insertNode(c).setStartAfter(c).collapse(!0);c.nextSibling||r.ie&&!(10<r.version)?d.setStartAfter(c):d.insertNode(c.cloneNode(!1));for(var c=c.previousSibling,b;c;)if(b=c,c=c.previousSibling,!c||"BR"==c.nodeName){c=b;break}if(c){for(b="";c&&"BR"!=c.nodeName&&(new RegExp("^[\\s"+g.fillChar+"]*$")).test(c.nodeValue);)b+=c.nodeValue,c=c.nextSibling;"BR"!=c.nodeName&&(c=c.nodeValue.match(new RegExp("^([\\s"+g.fillChar+"]+)")))&&c[1]&&(b+=c[1]);b&&(b=f.document.createTextNode(b),d.insertNode(b).setStartAfter(b))}d.collapse(!0).select(!0)}else if(8<r.version)if(c=f.document.createTextNode("\n"),b=d.startContainer,0==d.startOffset){if(b.previousSibling){d.insertNode(c);var a=f.document.createTextNode(" ");d.setStartAfter(c).insertNode(a).setStart(a,0).collapse(!0).select(!0)}}else d.insertNode(c).setStartAfter(c),a=f.document.createTextNode(" "),(b=d.startContainer.childNodes[d.startOffset])&&!/^\n/.test(b.nodeValue)&&d.setStartBefore(c),d.insertNode(a).setStart(a,0).collapse(!0).select(!0);else{c=f.document.createElement("br");d.insertNode(c);d.insertNode(f.document.createTextNode(g.fillChar));d.setStartAfter(c);for(c=c.previousSibling;c;)if(b=c,c=c.previousSibling,!c||"BR"==c.nodeName){c=b;break}if(c){for(b="";c&&"BR"!=c.nodeName&&(new RegExp("^[ "+g.fillChar+"]*$")).test(c.nodeValue);)b+=c.nodeValue,c=c.nextSibling;"BR"!=c.nodeName&&(c=c.nodeValue.match(new RegExp("^([ "+g.fillChar+"]+)")))&&c[1]&&(b+=c[1]);b=f.document.createTextNode(b);d.insertNode(b).setStartAfter(b)}d.collapse(!0).select()}f.fireEvent("saveScene");return!0}});f.addListener("tabkeydown",function(d,c){var b=f.selection.getRange(),a=g.findParentByTagName(b.startContainer,"pre",!0);if(a){f.fireEvent("saveScene");if(!c.shiftKey)if(b.collapsed)a=f.document.createTextNode("    "),b.insertNode(a).setStartAfter(a).collapse(!0).select(!0);else{for(var e=b.createBookmark(),h=e.start.previousSibling;h;){if(a.firstChild===h&&!g.isBr(h)){a.insertBefore(f.document.createTextNode("    "),h);break}if(g.isBr(h)){a.insertBefore(f.document.createTextNode("    "),h.nextSibling);break}h=h.previousSibling}var l=e.end,h=e.start.nextSibling;for(a.firstChild===e.start&&a.insertBefore(f.document.createTextNode("    "),h.nextSibling);h&&h!==l;){if(g.isBr(h)&&h.nextSibling){if(h.nextSibling===l)break;a.insertBefore(f.document.createTextNode("    "),h.nextSibling)}h=h.nextSibling}b.moveToBookmark(e).select()}f.fireEvent("saveScene");return!0}});f.addListener("beforeinserthtml",function(d,c){var b=this,a=b.selection.getRange();if(g.findParentByTagName(a.startContainer,"pre",!0)){a.collapsed||a.deleteContents();var e="";if(r.ie&&8<r.version){n.each(UE.filterNode(UE.htmlparser(c),b.options.filterTxtRules).children,function(a){"element"==a.type?"br"==a.tagName?e+="\n":w.$empty[a.tagName]||(n.each(a.children,function(b){"element"==b.type?"br"==b.tagName?e+="\n":w.$empty[a.tagName]||(e+=b.innerText()):e+=b.data}),/\n$/.test(e)||(e+="\n")):e+=a.data+"\n";!a.nextSibling()&&/\n$/.test(e)&&(e=e.replace(/\n$/,""))});var h=b.document.createTextNode(n.html(e.replace(/&nbsp;/g," ")));a.insertNode(h).selectNode(h).select()}else{var f=b.document.createDocumentFragment();n.each(UE.filterNode(UE.htmlparser(c),b.options.filterTxtRules).children,function(a){"element"==a.type?"br"==a.tagName?f.appendChild(b.document.createElement("br")):w.$empty[a.tagName]||(n.each(a.children,function(c){"element"==c.type?"br"==c.tagName?f.appendChild(b.document.createElement("br")):w.$empty[a.tagName]||f.appendChild(b.document.createTextNode(n.html(c.innerText().replace(/&nbsp;/g," ")))):f.appendChild(b.document.createTextNode(n.html(c.data.replace(/&nbsp;/g," "))))}),"BR"!=f.lastChild.nodeName&&f.appendChild(b.document.createElement("br"))):f.appendChild(b.document.createTextNode(n.html(a.data.replace(/&nbsp;/g," "))));a.nextSibling()||"BR"!=f.lastChild.nodeName||f.removeChild(f.lastChild)});a.insertNode(f).select()}return!0}});f.addListener("keydown",function(d,c){if(40==(c.keyCode||c.which)){var b=this.selection.getRange(),a,e=b.startContainer;if(b.collapsed&&(a=g.findParentByTagName(b.startContainer,"pre",!0))&&!a.nextSibling){for(var h=a.lastChild;h&&"BR"==h.nodeName;)h=h.previousSibling;if(h===e||b.startContainer===a&&b.startOffset==a.childNodes.length)this.execCommand("insertparagraph"),g.preventDefault(c)}}});f.addListener("delkeydown",function(d,c){var b=this.selection.getRange();b.txtToElmBoundary(!0);var a=b.startContainer;if(g.isTagNode(a,"pre")&&b.collapsed&&g.isStartInblock(b)){var e=f.document.createElement("p");g.fillNode(f.document,e);a.parentNode.insertBefore(e,a);g.remove(a);b.setStart(e,0).setCursor(!1,!0);g.preventDefault(c);return!0}})};UE.commands.cleardoc={execCommand:function(f){var d=this;f=d.options.enterTag;var c=d.selection.getRange();"br"==f?(d.body.innerHTML="\x3cbr/\x3e",c.setStart(d.body,0).setCursor()):(d.body.innerHTML="",c.setStart(d.body.firstChild,0).setCursor(!1,!0));setTimeout(function(){d.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){n.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(f){n.each(f.getNodesByTagName("img"),function(d){var c;if(c=d.getAttr("anchorname"))d.tagName="a",d.setAttr({anchorname:"",name:c,"class":""})})},inputRule:function(f){n.each(f.getNodesByTagName("a"),function(d){d.getAttr("name")&&!d.getAttr("href")&&(d.tagName="img",d.setAttr({anchorname:d.getAttr("name"),"class":"anchorclass"}),d.setAttr("name"))})},commands:{anchor:{execCommand:function(f,d){var c=this.selection.getRange(),b=c.getClosedNode();b&&b.getAttribute("anchorname")?d?b.setAttribute("anchorname",d):(c.setStartBefore(b).setCursor(),g.remove(b)):d&&(b=this.document.createElement("img"),c.collapse(!0),g.setAttributes(b,{anchorname:d,"class":"anchorclass"}),c.insertNode(b).setStartAfter(b).setCursor(!1,!0))}}}}});UE.plugins.wordcount=function(){var f=this;f.setOpt("wordCount",!0);f.addListener("contentchange",function(){f.fireEvent("wordcount")});var d;f.addListener("ready",function(){var c=this;g.on(c.body,"keyup",function(b){(b.keyCode||b.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(d),d=setTimeout(function(){c.fireEvent("wordcount")},200))})})};UE.plugins.pagebreak=function(){function f(a){if(g.isEmptyBlock(a)){for(var b=a.firstChild,d;b&&1==b.nodeType&&g.isEmptyBlock(b);)d=b,b=b.firstChild;!d&&(d=a);g.fillNode(c.document,d)}}function d(a){return a&&1==a.nodeType&&"HR"==a.tagName&&"pagebreak"==a.className}var c=this,b=["td"];c.setOpt("pageBreakTag","_ueditor_page_break_tag_");c.ready(function(){n.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",c.document)});c.addInputRule(function(a){a.traversal(function(a){if("text"==a.type&&a.data==c.options.pageBreakTag){var b=UE.uNode.createElement('\x3chr class\x3d"pagebreak" noshade\x3d"noshade" size\x3d"5" style\x3d"-webkit-user-select: none;"\x3e');a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}})});c.addOutputRule(function(a){n.each(a.getNodesByTagName("hr"),function(a){if("pagebreak"==a.getAttr("class")){var b=UE.uNode.createText(c.options.pageBreakTag);a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}})});c.commands.pagebreak={execCommand:function(){var a=c.selection.getRange(),e=c.document.createElement("hr");g.setAttributes(e,{"class":"pagebreak",noshade:"noshade",size:"5"});g.unSelectable(e);var h=g.findParentByTagName(a.startContainer,b,!0);if(h)switch(h.tagName){case "TD":h=h.parentNode,h.previousSibling?(h.parentNode.insertBefore(e,h),a=g.findParents(e)):(a=g.findParentByTagName(h,"table"),a.parentNode.insertBefore(e,a),a=g.findParents(e,!0)),h=a[1],e!==h&&g.breakParent(e,h),c.fireEvent("afteradjusttable",c.document)}else{if(!a.collapsed)for(a.deleteContents(),h=a.startContainer;!g.isBody(h)&&g.isBlockElm(h)&&g.isEmptyNode(h);)a.setStartBefore(h).collapse(!0),g.remove(h),h=a.startContainer;a.insertNode(e);for(h=e.parentNode;!g.isBody(h);)g.breakParent(e,h),(h=e.nextSibling)&&g.isEmptyBlock(h)&&g.remove(h),h=e.parentNode;var h=e.nextSibling,l=e.previousSibling;d(l)?g.remove(l):l&&f(l);h?(d(h)?g.remove(h):f(h),a.setEndAfter(e).collapse(!1)):(h=c.document.createElement("p"),e.parentNode.appendChild(h),g.fillNode(c.document,h),a.setStart(h,0).collapse(!0));a.select(!0)}}}};UE.plugin.register("wordimage",function(){var f=this,d=[];return{commands:{wordimage:{execCommand:function(){for(var c=g.getElementsByTagName(f.body,"img"),b=[],a=0,e;e=c[a++];)(e=e.getAttribute("word_img"))&&b.push(e);return b},queryCommandState:function(){d=g.getElementsByTagName(f.body,"img");for(var c=0,b;b=d[c++];)if(b.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(c){n.each(c.getNodesByTagName("img"),function(b){var a=b.attrs,c=128>parseInt(a.width)||43>parseInt(a.height),d=f.options,g=d.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";a.src&&/^(?:(file:\/+))/.test(a.src)&&b.setAttr({width:a.width,height:a.height,alt:a.alt,word_img:a.src,src:g,style:"background:url("+(c?d.themePath+d.theme+"/images/word.gif":d.langPath+d.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}});UE.plugins.dragdrop=function(){var f=this;f.ready(function(){g.on(this.body,"dragend",function(){var d=f.selection.getRange(),c=d.getClosedNode()||f.selection.getStart();if(c&&"IMG"==c.tagName){for(var b=c.previousSibling,a;(a=c.nextSibling)&&1==a.nodeType&&"SPAN"==a.tagName&&!a.firstChild;)g.remove(a);(!b||1!=b.nodeType||g.isEmptyBlock(b))&&b||a&&(!a||g.isEmptyBlock(a))||(b&&"P"==b.tagName&&!g.isEmptyBlock(b)?(b.appendChild(c),g.moveChild(a,b),g.remove(a)):a&&"P"==a.tagName&&!g.isEmptyBlock(a)&&a.insertBefore(c,a.firstChild),b&&"P"==b.tagName&&g.isEmptyBlock(b)&&g.remove(b),a&&"P"==a.tagName&&g.isEmptyBlock(a)&&g.remove(a),d.selectNode(c).select(),f.fireEvent("saveScene"))}})});f.addListener("keyup",function(d,c){if(13==(c.keyCode||c.which)){var b=f.selection.getRange(),a;(a=g.findParentByTagName(b.startContainer,"p",!0))&&"center"==g.getComputedStyle(a,"text-align")&&g.removeStyle(a,"text-align")}})};UE.plugins.undo=function(){function f(a,b){if(a.length!=b.length)return 0;for(var c=0,e=a.length;c<e;c++)if(a[c]!=b[c])return 0;return 1}var d,c=this,b=c.options.maxUndoCount||20,a=c.options.maxInputCount||20,e=new RegExp(g.fillChar+"|\x3c/hr\x3e","gi"),h={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},l=c.options.autoClearEmptyNode;c.undoManger=new function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.undo=function(){if(this.hasUndo)if(this.list[this.index-1]||1!=this.list.length){for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}else this.reset()};this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}};this.restore=function(){var a=this.editor,b=this.list[this.index],c=UE.htmlparser(b.content.replace(e,""));a.options.autoClearEmptyNode=!1;a.filterInputRule(c);a.options.autoClearEmptyNode=l;a.document.body.innerHTML=c.toHtml();a.fireEvent("afterscencerestore");r.ie&&n.each(g.getElementsByTagName(a.document,"td th caption p"),function(b){g.isEmptyNode(b)&&g.fillNode(a.document,b)});try{var d=(new K.Range(a.document)).moveToAddress(b.address);d.select(h[d.startContainer.nodeName.toLowerCase()])}catch(C){}this.update();this.clearKey();a.fireEvent("reset",!0)};this.getScene=function(){var a=this.editor,b=a.selection.getRange().createAddress(!1,!0);a.fireEvent("beforegetscene");var c=UE.htmlparser(a.body.innerHTML);a.options.autoClearEmptyNode=!1;a.filterOutputRule(c);a.options.autoClearEmptyNode=l;c=c.toHtml();a.fireEvent("aftergetscene");return{address:b,content:c}};this.save=function(a,e){clearTimeout(d);var h=this.getScene(e),k=this.list[this.index];k&&k.content!=h.content&&c.trigger("contentchange");var g;if(g=k&&k.content==h.content)a?k=1:(k=k.address,g=h.address,k=k.collapsed!=g.collapsed?0:f(k.startAddress,g.startAddress)&&f(k.endAddress,g.endAddress)?1:0),g=k;g||(this.list=this.list.slice(0,this.index+1),this.list.push(h),this.list.length>b&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.clearKey()};this.clearKey=function(){p=0}};c.undoManger.editor=c;c.addListener("saveScene",function(){var a=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,a)});c.addListener("reset",function(a,b){b||this.undoManger.reset()});c.commands.redo=c.commands.undo={execCommand:function(a){this.undoManger[a]()},queryCommandState:function(a){return this.undoManger["has"+("undo"==a.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var k={16:1,17:1,18:1,37:1,38:1,39:1,40:1},p=0,m=!1;c.addListener("ready",function(){g.on(this.body,"compositionstart",function(){m=!0});g.on(this.body,"compositionend",function(){m=!1})});c.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var q=!0;c.addListener("keydown",function(b,c){var e=this;if(!(k[c.keyCode||c.which]||c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var h=function(a){a.undoManger.save(!1,!0);a.fireEvent("selectionchange")};m||(e.selection.getRange().collapsed?(0==e.undoManger.list.length&&e.undoManger.save(!0),clearTimeout(d),d=setTimeout(function(){if(m)var a=setInterval(function(){m||(h(e),clearInterval(a))},300);else h(e)},200),p++,p>=a&&h(e)):(e.undoManger.save(!1,!0),q=!1))}});c.addListener("keyup",function(a,b){k[b.keyCode||b.which]||b.ctrlKey||b.metaKey||b.shiftKey||b.altKey||m||q||(this.undoManger.save(!1,!0),q=!0)});c.stopCmdUndo=function(){c.__hasEnterExecCommand=!0};c.startCmdUndo=function(){c.__hasEnterExecCommand=!1}};UE.plugin.register("copy",function(){return{bindEvents:{ready:function(){}},commands:{copy:{execCommand:function(f){}}}}});UE.plugins.paste=function(){function f(a){var b=this.document;if(!b.getElementById("baidu_pastebin")){var c=this.selection.getRange(),e=c.createBookmark(),d=b.createElement("div");d.id="baidu_pastebin";r.webkit&&d.appendChild(b.createTextNode(g.fillChar+g.fillChar));b.body.appendChild(d);e.start.style.display="";d.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+g.getXY(e.start).y+"px";c.selectNodeContents(d).select(!0);setTimeout(function(){if(r.webkit)for(var h=0,f=b.querySelectorAll("#baidu_pastebin"),k;k=f[h++];)if(g.isEmptyNode(k))g.remove(k);else{d=k;break}try{d.parentNode.removeChild(d)}catch(v){}c.moveToBookmark(e).select(!0);a(d)},0)}}function d(a){return a.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,b,c,e){c=c.toLowerCase();if({img:1}[c])return a;e=e.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(a,b,c){return{src:1,href:1,name:1}[b.toLowerCase()]?b+"\x3d"+c+" ":""});return{span:1,div:1}[c]?"":"\x3c"+b+c+" "+n.trim(e)+"\x3e"})}function c(c){var f;if(c.firstChild){var l=g.getElementsByTagName(c,"span");f=0;for(var m;m=l[f++];)"_baidu_cut_start"!=m.id&&"_baidu_cut_end"!=m.id||g.remove(m);if(r.webkit){m=c.querySelectorAll("div br");for(f=0;l=m[f++];)l=l.parentNode,"DIV"==l.tagName&&1==l.childNodes.length&&(l.innerHTML="",g.remove(l));l=c.querySelectorAll("#baidu_pastebin");for(f=0;m=l[f++];){var q=b.document.createElement("p");for(m.parentNode.insertBefore(q,m);m.firstChild;)q.appendChild(m.firstChild);g.remove(m)}m=c.querySelectorAll("meta");for(f=0;l=m[f++];)g.remove(l);m=c.querySelectorAll("br");for(f=0;l=m[f++];)/^apple-/i.test(l.className)&&g.remove(l)}if(r.gecko)for(m=c.querySelectorAll("[_moz_dirty]"),f=0;l=m[f++];)l.removeAttribute("_moz_dirty");if(!r.ie)for(m=c.querySelectorAll("span.Apple-style-span"),f=0;l=m[f++];)g.remove(l,!0);f=c.innerHTML;f=UE.filterWord(f);c=UE.htmlparser(f);b.options.filterRules&&UE.filterNode(c,b.options.filterRules);b.filterInputRule(c);r.webkit&&((f=c.lastChild())&&"element"==f.type&&"br"==f.tagName&&c.removeChild(f),n.each(b.body.querySelectorAll("div"),function(a){g.isEmptyBlock(a)&&g.remove(a,!0)}));f={html:c.toHtml()};b.fireEvent("beforepaste",f,c);f.html&&(c=UE.htmlparser(f.html,!0),1===b.queryCommandState("pasteplain")?b.execCommand("insertHtml",UE.filterNode(c,b.options.filterTxtRules).toHtml(),!0):(UE.filterNode(c,b.options.filterTxtRules),a=c.toHtml(),e=f.html,h=b.selection.getRange().createAddress(!0),b.execCommand("insertHtml",!0===b.getOpt("retainOnlyLabelPasted")?d(e):e,!0)),b.fireEvent("afterpaste",f))}}var b=this;b.setOpt({retainOnlyLabelPasted:!1});var a,e,h;b.addListener("pasteTransfer",function(c,f){if(h&&a&&e&&a!=e){var k=b.selection.getRange();k.moveToAddress(h,!0);if(!k.collapsed){for(;!g.isBody(k.startContainer);){var l=k.startContainer;if(1==l.nodeType){l=l.childNodes[k.startOffset];if(!l){k.setStartBefore(k.startContainer);continue}(l=l.previousSibling)&&3==l.nodeType&&(new RegExp("^[\n\r\t "+g.fillChar+"]*$")).test(l.nodeValue)&&k.setStartBefore(l)}if(0==k.startOffset)k.setStartBefore(k.startContainer);else break}for(;!g.isBody(k.endContainer);){l=k.endContainer;if(1==l.nodeType){l=l.childNodes[k.endOffset];if(!l){k.setEndAfter(k.endContainer);continue}(l=l.nextSibling)&&3==l.nodeType&&(new RegExp("^[\n\r\t"+g.fillChar+"]*$")).test(l.nodeValue)&&k.setEndAfter(l)}if(k.endOffset==k.endContainer[3==k.endContainer.nodeType?"nodeValue":"childNodes"].length)k.setEndAfter(k.endContainer);else break}}k.deleteContents();k.select(!0);b.__hasEnterExecCommand=!0;k=e;2===f?k=d(k):f&&(k=a);b.execCommand("inserthtml",k,!0);b.__hasEnterExecCommand=!1;for(k=b.selection.getRange();!g.isBody(k.startContainer)&&!k.startOffset&&k.startContainer[3==k.startContainer.nodeType?"nodeValue":"childNodes"].length;)k.setStartBefore(k.startContainer);k=k.createAddress(!0);h.endAddress=k.startAddress}});b.addListener("ready",function(){g.on(b.body,"cut",function(){!b.selection.getRange().collapsed&&b.undoManger&&b.undoManger.save()});g.on(b.body,r.ie||r.opera?"keydown":"paste",function(a){(!r.ie&&!r.opera||(a.ctrlKey||a.metaKey)&&"86"==a.keyCode)&&f.call(b,function(a){c(a)})})});b.commands.paste={execCommand:function(a){r.ie?(f.call(b,function(a){c(a)}),b.document.execCommand("paste")):alert(b.getLang("pastemsg"))}}};UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function d(b){b.tagName="p";b.setStyle()}function c(b){b.parentNode.removeChild(b,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(b){for(var a,c=UE.uNode.createElement("p");a=b.firstChild();)"text"!=a.type&&UE.dom.dtd.$block[a.tagName]?c.firstChild()?(b.parentNode.insertBefore(c,b),c=UE.uNode.createElement("p")):b.parentNode.insertBefore(a,b):c.appendChild(a);c.firstChild()&&b.parentNode.insertBefore(c,b);b.parentNode.removeChild(b)},ol:c,ul:c,dl:c,dt:c,dd:c,li:c,caption:d,th:d,tr:d,h1:d,h2:d,h3:d,h4:d,h5:d,h6:d,td:function(b){b.innerText()&&b.parentNode.insertAfter(UE.uNode.createText(" \x26nbsp; \x26nbsp;"),b);b.parentNode.removeChild(b,b.innerText())}}}()});var f=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return f?1:0},execCommand:function(){f=!f|0},notNeedUndo:1}};UE.plugins.list=function(){function f(a){var b=[],c;for(c in a)b.push(c);return b}function d(a){var b=a.className;return g.hasClass(a,/custom_/)?b.match(/custom_(\w+)/)[1]:g.getStyle(a,"list-style-type")}function c(c,e){n.each(g.getElementsByTagName(c,"ol ul"),function(h){if(g.inDoc(h,c)){var f=h.parentNode;if(f.tagName==h.tagName){var k=d(h)||("OL"==h.tagName?"decimal":"disc"),l=d(f)||("OL"==f.tagName?"decimal":"disc");k==l&&(k=n.indexOf(m[h.tagName],k),k=k+1==m[h.tagName].length?0:k+1,a(h,m[h.tagName][k]))}var q=0,k=2;g.hasClass(h,/custom_/)?/[ou]l/i.test(f.tagName)&&g.hasClass(f,/custom_/)||(k=1):/[ou]l/i.test(f.tagName)&&g.hasClass(f,/custom_/)&&(k=3);(f=g.getStyle(h,"list-style-type"))&&(h.style.cssText="list-style-type:"+f);h.className=n.trim(h.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+k;n.each(g.getElementsByTagName(h,"li"),function(a){a.style.cssText&&(a.style.cssText="");if(!a.firstChild)g.remove(a);else if(a.parentNode===h){q++;if(g.hasClass(h,/custom_/)){var b=1,c=d(h);if("OL"==h.tagName){if(c)switch(c){case "cn":case "cn1":case "cn2":10<q&&(0==q%10||10<q&&20>q)?b=2:20<q&&(b=3);break;case "num2":9<q&&(b=2)}a.className="list-"+p[c]+q+" list-"+c+"-paddingleft-"+b}else a.className="list-"+p[c]+" list-"+c+"-paddingleft"}else a.className=a.className.replace(/list-[\w\-]+/gi,"");b=a.getAttribute("class");null===b||b.replace(/\s/g,"")||g.removeAttributes(a,"class")}});!e&&b(h,h.tagName.toLowerCase(),d(h)||g.getStyle(h,"list-style-type"),!0)}})}function b(a,b,e,h){var f=a.nextSibling;f&&1==f.nodeType&&f.tagName.toLowerCase()==b&&(d(f)||g.getStyle(f,"list-style-type")||("ol"==b?"decimal":"disc"))==e&&(g.moveChild(f,a),0==f.childNodes.length&&g.remove(f));f&&g.isFillChar(f)&&g.remove(f);(f=a.previousSibling)&&1==f.nodeType&&f.tagName.toLowerCase()==b&&(d(f)||g.getStyle(f,"list-style-type")||("ol"==b?"decimal":"disc"))==e&&g.moveChild(a,f);f&&g.isFillChar(f)&&g.remove(f);!h&&g.isEmptyBlock(a)&&g.remove(a);d(a)&&c(a.ownerDocument,!0)}function a(a,b){p[b]&&(a.className="custom_"+b);try{g.setStyle(a,"list-style-type",b)}catch(v){}}function e(a){var b=a.previousSibling;b&&g.isEmptyBlock(b)&&g.remove(b);(b=a.nextSibling)&&g.isEmptyBlock(b)&&g.remove(b)}function h(a){for(;a&&!g.isBody(a);){if("TABLE"==a.nodeName)return null;if("LI"==a.nodeName)return a;a=a.parentNode}}var l=this,k={TD:1,PRE:1,BLOCKQUOTE:1},p={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};l.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var m={OL:f(l.options.insertorderedlist),UL:f(l.options.insertunorderedlist)},q=l.options.listiconpath,u;for(u in p)l.options.insertorderedlist.hasOwnProperty(u)||l.options.insertunorderedlist.hasOwnProperty(u)||delete p[u];l.ready(function(){var a=[],b;for(b in p){if("dash"==b||"dot"==b)a.push("li.list-"+p[b]+"{background-image:url("+q+p[b]+".gif)}"),a.push("ul.custom_"+b+"{list-style:none;}ul.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var c=0;99>c;c++)a.push("li.list-"+p[b]+c+"{background-image:url("+q+"list-"+p[b]+c+".gif)}");a.push("ol.custom_"+b+"{list-style:none;}ol.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(b){case "cn":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");break;case "cn1":a.push("li.list-"+b+"-paddingleft-1{padding-left:30px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");break;case "cn2":a.push("li.list-"+b+"-paddingleft-1{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:55px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:68px}");break;case "num":case "num1":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}");break;case "num2":a.push("li.list-"+b+"-paddingleft-1{padding-left:35px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");break;case "dash":a.push("li.list-"+b+"-paddingleft{padding-left:35px}");break;case "dot":a.push("li.list-"+b+"-paddingleft{padding-left:20px}")}}a.push(".list-paddingleft-1{padding-left:0}");a.push(".list-paddingleft-2{padding-left:"+l.options.listDefaultPaddingLeft+"px}");a.push(".list-paddingleft-3{padding-left:"+2*l.options.listDefaultPaddingLeft+"px}");n.cssRule("list","ol,ul{margin:0;pading:0;"+(r.ie?"":"width:95%")+"}li{clear:both;}"+a.join("\n"),l.document)});l.ready(function(){g.on(l.body,"cut",function(){setTimeout(function(){var a=l.selection.getRange(),b;if(!a.collapsed&&(b=g.findParentByTagName(a.startContainer,"li",!0))&&!b.nextSibling&&g.isEmptyBlock(b)){b=b.parentNode;var c;(c=b.previousSibling)?(g.remove(b),a.setStartAtLast(c).collapse(!0)):(c=b.nextSibling)?(g.remove(b),a.setStartAtFirst(c).collapse(!0)):(c=l.document.createElement("p"),g.fillNode(l.document,c),b.parentNode.insertBefore(c,b),g.remove(b),a.setStart(c,0).collapse(!0));a.select(!0)}})})});l.addListener("beforepaste",function(a,b){var c=this.selection.getRange(),e=UE.htmlparser(b.html,!0);if(c=g.findParentByTagName(c.startContainer,"li",!0)){var h=c.parentNode;n.each(e.getNodesByTagName("OL"==h.tagName?"ul":"ol"),function(b){b.tagName=h.tagName;b.setAttr();if(b.parentNode===e)a=d(h)||("OL"==h.tagName?"decimal":"disc");else{var c=b.parentNode.getAttr("class");(a=c&&/custom_/.test(c)?c.match(/custom_(\w+)/)[1]:b.parentNode.getStyle("list-style-type"))||(a="OL"==h.tagName?"decimal":"disc")}c=n.indexOf(m[h.tagName],a);b.parentNode!==e&&(c=c+1==m[h.tagName].length?0:c+1);c=m[h.tagName][c];p[c]?b.setAttr("class","custom_"+c):b.setStyle("list-style-type",c)})}b.html=e.toHtml()});!0===l.getOpt("disablePInList")&&l.addOutputRule(function(a){n.each(a.getNodesByTagName("li"),function(a){var b=[],c=0;n.each(a.children,function(e){if("p"==e.tagName){for(var d;d=e.children.pop();)b.splice(c,0,d),d.parentNode=a,lastNode=d;d=b[b.length-1];d&&"element"==d.type&&"br"==d.tagName||(e=UE.uNode.createElement("br"),e.parentNode=a,b.push(e));c=b.length}});b.length&&(a.children=b)})});l.addInputRule(function(a){n.each(a.getNodesByTagName("li"),function(a){for(var b=UE.uNode.createElement("p"),c=0,e;e=a.children[c];)"text"==e.type||w.p[e.tagName]?b.appendChild(e):b.firstChild()?(a.insertBefore(b,e),b=UE.uNode.createElement("p"),c+=2):c++;(b.firstChild()&&!b.parentNode||!a.firstChild())&&a.appendChild(b);b.firstChild()||b.innerHTML(r.ie?"\x26nbsp;":"\x3cbr/\x3e");a=a.firstChild();(b=a.lastChild())&&"text"==b.type&&/^\s*$/.test(b.data)&&a.removeChild(b)});if(l.options.autoTransWordToList){var b=function(a,b){var d=b.firstChild();if(d&&"element"==d.type&&"span"==d.tagName&&/Wingdings|Symbol/.test(d.getStyle("font-family"))){for(var h in e)if(e[h]==d.data)return h;return"disc"}for(h in c)if(c[h].test(a))return h},c={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},e={square:"n"};n.each(a.getNodesByTagName("p"),function(a){if("MsoListParagraph"==a.getAttr("class")){a.setStyle("margin","");a.setStyle("margin-left","");a.setAttr("class","");var e,d,h=a;if("li"!=a.parentNode.tagName&&(d=b(a.innerText(),a))){var f=UE.uNode.createElement(l.options.insertorderedlist.hasOwnProperty(d)?"ol":"ul");for(p[d]?f.setAttr("class","custom_"+d):f.setStyle("list-style-type",d);a&&"li"!=a.parentNode.tagName&&b(a.innerText(),a);){(e=a.nextSibling())||a.parentNode.insertBefore(f,a);var k=f,g=d;if("ol"==k.tagName)if(r.ie){var m=a.firstChild();"element"==m.type&&"span"==m.tagName&&c[g].test(m.innerText())&&a.removeChild(m)}else a.innerHTML(a.innerHTML().replace(c[g],""));else a.removeChild(a.firstChild());g=UE.uNode.createElement("li");g.appendChild(a);k.appendChild(g);a=e}!f.parentNode&&a&&a.parentNode&&a.parentNode.insertBefore(f,a)}(e=h.firstChild())&&"element"==e.type&&"span"==e.tagName&&/^\s*(&nbsp;)+\s*$/.test(e.innerText())&&e.parentNode.removeChild(e)}})}});l.addListener("contentchange",function(){c(l.document)});l.addListener("keydown",function(a,b){function c(){b.preventDefault?b.preventDefault():b.returnValue=!1;l.fireEvent("contentchange");l.undoManger&&l.undoManger.save()}function d(a,b){for(;a&&!g.isBody(a)&&!b(a);){if(1==a.nodeType&&/[ou]l/i.test(a.tagName))return a;a=a.parentNode}return null}var h=b.keyCode||b.which;if(13==h&&!b.shiftKey){var f=l.selection.getRange(),k=g.findParent(f.startContainer,function(a){return g.isBlockElm(a)},!0),m=g.findParentByTagName(f.startContainer,"li",!0);k&&"PRE"!=k.tagName&&!m&&(m=k.innerHTML.replace(new RegExp(g.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(m)&&(k.innerHTML=m.replace(/^\s*1\s*\./,""),f.setStartAtLast(k).collapse(!0).select(),l.__hasEnterExecCommand=!0,l.execCommand("insertorderedlist"),l.__hasEnterExecCommand=!1));f=l.selection.getRange();k=d(f.startContainer,function(a){return"TABLE"==a.tagName});m=f.collapsed?k:d(f.endContainer,function(a){return"TABLE"==a.tagName});if(k&&m&&k===m){if(!f.collapsed)if(k=g.findParentByTagName(f.startContainer,"li",!0),m=g.findParentByTagName(f.endContainer,"li",!0),k&&m&&k===m){if(f.deleteContents(),(m=g.findParentByTagName(f.startContainer,"li",!0))&&g.isEmptyBlock(m)){u=m.previousSibling;next=m.nextSibling;k=l.document.createElement("p");g.fillNode(l.document,k);q=m.parentNode;u&&next?(f.setStart(next,0).collapse(!0).select(!0),g.remove(m)):((u||next)&&u?m.parentNode.parentNode.insertBefore(k,q.nextSibling):q.parentNode.insertBefore(k,q),g.remove(m),q.firstChild||g.remove(q),f.setStart(k,0).setCursor());c();return}}else{var k=f.cloneRange(),p=k.collapse(!1).createBookmark();f.deleteContents();k.moveToBookmark(p);m=g.findParentByTagName(k.startContainer,"li",!0);e(m);k.select();c();return}if(m=g.findParentByTagName(f.startContainer,"li",!0)){if(g.isEmptyBlock(m)){var p=f.createBookmark(),q=m.parentNode;m!==q.lastChild?(g.breakParent(m,q),e(m)):(q.parentNode.insertBefore(m,q.nextSibling),g.isEmptyNode(q)&&g.remove(q));if(!w.$list[m.parentNode.tagName])if(g.isBlockElm(m.firstChild))g.remove(m,!0);else{k=l.document.createElement("p");for(m.parentNode.insertBefore(k,m);m.firstChild;)k.appendChild(m.firstChild);g.remove(m)}f.moveToBookmark(p).select()}else{k=m.firstChild;if(!k||!g.isBlockElm(k)){k=l.document.createElement("p");for(!m.firstChild&&g.fillNode(l.document,k);m.firstChild;)k.appendChild(m.firstChild);m.appendChild(k)}p=l.document.createElement("span");f.insertNode(p);g.breakParent(p,m);u=p.nextSibling;k=u.firstChild;k||(k=l.document.createElement("p"),g.fillNode(l.document,k),u.appendChild(k));g.isEmptyNode(k)&&(k.innerHTML="",g.fillNode(l.document,k));f.setStart(k,0).collapse(!0).shrinkBoundary().select();g.remove(p);var u=u.previousSibling;u&&g.isEmptyBlock(u)&&(u.innerHTML="\x3cp\x3e\x3c/p\x3e",g.fillNode(l.document,u.firstChild))}c()}}}if(8==h&&(f=l.selection.getRange(),f.collapsed&&g.isStartInblock(f)&&(k=f.cloneRange().trimBoundary(),(m=g.findParentByTagName(f.startContainer,"li",!0))&&g.isStartInblock(k))))if((k=g.findParentByTagName(f.startContainer,"p",!0))&&k!==m.firstChild)q=g.findParentByTagName(k,["ol","ul"]),g.breakParent(k,q),e(k),l.fireEvent("contentchange"),f.setStart(k,0).setCursor(!1,!0),l.fireEvent("saveScene"),g.preventDefault(b);else if(m&&(u=m.previousSibling)){if(46!=h||!m.childNodes.length){w.$list[u.tagName]&&(u=u.lastChild);l.undoManger&&l.undoManger.save();k=m.firstChild;if(g.isBlockElm(k))if(g.isEmptyNode(k))for(u.appendChild(k),f.setStart(k,0).setCursor(!1,!0);m.firstChild;)u.appendChild(m.firstChild);else p=l.document.createElement("span"),f.insertNode(p),g.isEmptyBlock(u)&&(u.innerHTML=""),g.moveChild(m,u),f.setStartBefore(p).collapse(!0).select(!0),g.remove(p);else if(g.isEmptyNode(m))k=l.document.createElement("p"),u.appendChild(k),f.setStart(k,0).setCursor();else for(f.setEnd(u,u.childNodes.length).collapse().select(!0);m.firstChild;)u.appendChild(m.firstChild);g.remove(m);l.fireEvent("contentchange");l.fireEvent("saveScene");g.preventDefault(b)}}else if(m&&!m.previousSibling){q=m.parentNode;p=f.createBookmark();if(g.isTagNode(q.parentNode,"ol ul"))q.parentNode.insertBefore(m,q);else{for(;m.firstChild;)q.parentNode.insertBefore(m.firstChild,q);g.remove(m)}g.isEmptyNode(q)&&g.remove(q);f.moveToBookmark(p).setCursor(!1,!0);l.fireEvent("contentchange");l.fireEvent("saveScene");g.preventDefault(b)}});l.addListener("keyup",function(a,c){if(8==(c.keyCode||c.which)){var e=l.selection.getRange(),h;(h=g.findParentByTagName(e.startContainer,["ol","ul"],!0))&&b(h,h.tagName.toLowerCase(),d(h)||g.getComputedStyle(h,"list-style-type"),!0)}});l.addListener("tabkeydown",function(){function c(a){if(-1!=l.options.maxListLevel){a=a.parentNode;for(var b=0;/[ou]l/i.test(a.tagName);)b++,a=a.parentNode;if(b>=l.options.maxListLevel)return!0}}var e=l.selection.getRange(),h=g.findParentByTagName(e.startContainer,"li",!0);if(h){var f;if(e.collapsed){if(c(h))return!0;var k=h.parentNode,p=l.document.createElement(k.tagName),q=n.indexOf(m[p.tagName],d(k)||g.getComputedStyle(k,"list-style-type")),q=q+1==m[p.tagName].length?0:q+1,q=m[p.tagName][q];a(p,q);if(g.isStartInblock(e))return l.fireEvent("saveScene"),f=e.createBookmark(),k.insertBefore(p,h),p.appendChild(h),b(p,p.tagName.toLowerCase(),q),l.fireEvent("contentchange"),e.moveToBookmark(f).select(!0),!0}else{l.fireEvent("saveScene");f=e.createBookmark();for(var k=0,u,p=g.findParents(h),r;r=p[k++];)if(g.isTagNode(r,"ol ul")){u=r;break}r=h;if(f.end)for(;r&&!(g.getPosition(r,f.end)&g.POSITION_FOLLOWING);)if(c(r))r=g.getNextDomNode(r,!1,null,function(a){return a!==u});else{k=r.parentNode;p=l.document.createElement(k.tagName);q=n.indexOf(m[p.tagName],d(k)||g.getComputedStyle(k,"list-style-type"));q=m[p.tagName][q+1==m[p.tagName].length?0:q+1];a(p,q);for(k.insertBefore(p,r);r&&!(g.getPosition(r,f.end)&g.POSITION_FOLLOWING);){h=r.nextSibling;p.appendChild(r);if(!h||g.isTagNode(h,"ol ul")){if(h)for(;(h=h.firstChild)&&"LI"!=h.tagName;);else h=g.getNextDomNode(r,!1,null,function(a){return a!==u});break}r=h}b(p,p.tagName.toLowerCase(),q);r=h}l.fireEvent("contentchange");e.moveToBookmark(f).select();return!0}}});l.commands.insertorderedlist=l.commands.insertunorderedlist={execCommand:function(c,e){e||(e="insertorderedlist"==c.toLowerCase()?"decimal":"disc");var f=this.selection.getRange(),l=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase():!g.isWhitespace(a)},m="insertorderedlist"==c.toLowerCase()?"ol":"ul",p=this.document.createDocumentFragment();f.adjustmentBoundary().shrinkBoundary();var q=f.createBookmark(!0),u=h(this.document.getElementById(q.start)),y=0,n=h(this.document.getElementById(q.end)),z=0,r,t,B,A;if(u||n){u&&(r=u.parentNode);q.end||(n=u);n&&(t=n.parentNode);if(r===t){for(;u!==n;){A=u;u=u.nextSibling;if(!g.isBlockElm(A.firstChild)){for(l=this.document.createElement("p");A.firstChild;)l.appendChild(A.firstChild);A.appendChild(l)}p.appendChild(A)}A=this.document.createElement("span");r.insertBefore(A,n);if(!g.isBlockElm(n.firstChild)){for(l=this.document.createElement("p");n.firstChild;)l.appendChild(n.firstChild);n.appendChild(l)}p.appendChild(n);g.breakParent(A,r);g.isEmptyNode(A.previousSibling)&&g.remove(A.previousSibling);g.isEmptyNode(A.nextSibling)&&g.remove(A.nextSibling);l=d(r)||g.getComputedStyle(r,"list-style-type")||("insertorderedlist"==c.toLowerCase()?"decimal":"disc");if(r.tagName.toLowerCase()==m&&l==e){n=0;for(n=this.document.createDocumentFragment();l=p.firstChild;)if(g.isTagNode(l,"ol ul"))n.appendChild(l);else for(;l.firstChild;)n.appendChild(l.firstChild),g.remove(l);A.parentNode.insertBefore(n,A)}else B=this.document.createElement(m),a(B,e),B.appendChild(p),A.parentNode.insertBefore(B,A);g.remove(A);B&&b(B,m,e);f.moveToBookmark(q).select();return}if(u){for(;u;){A=u.nextSibling;if(g.isTagNode(u,"ol ul"))p.appendChild(u);else{B=this.document.createDocumentFragment();for(var N=0;u.firstChild;)g.isBlockElm(u.firstChild)&&(N=1),B.appendChild(u.firstChild);N?p.appendChild(B):(N=this.document.createElement("p"),N.appendChild(B),p.appendChild(N));g.remove(u)}u=A}r.parentNode.insertBefore(p,r.nextSibling);g.isEmptyNode(r)?(f.setStartBefore(r),g.remove(r)):f.setStartAfter(r);y=1}if(n&&g.inDoc(t,this.document)){for(u=t.firstChild;u&&u!==n;){A=u.nextSibling;if(g.isTagNode(u,"ol ul"))p.appendChild(u);else{B=this.document.createDocumentFragment();for(N=0;u.firstChild;)g.isBlockElm(u.firstChild)&&(N=1),B.appendChild(u.firstChild);N?p.appendChild(B):(N=this.document.createElement("p"),N.appendChild(B),p.appendChild(N));g.remove(u)}u=A}A=g.createElement(this.document,"div",{tmpDiv:1});g.moveChild(n,A);p.appendChild(A);g.remove(n);t.parentNode.insertBefore(p,t);f.setEndBefore(t);g.isEmptyNode(t)&&g.remove(t);z=1}}y||f.setStartBefore(this.document.getElementById(q.start));q.end&&!z&&f.setEndAfter(this.document.getElementById(q.end));f.enlarge(!0,function(a){return k[a.tagName]});p=this.document.createDocumentFragment();n=f.createBookmark();r=g.getNextDomNode(n.start,!1,l);B=f.cloneRange();for(y=g.isBlockElm;r&&r!==n.end&&g.getPosition(r,n.end)&g.POSITION_PRECEDING;)if(3==r.nodeType||w.li[r.tagName])if(1==r.nodeType&&w.$list[r.tagName]){for(;r.firstChild;)p.appendChild(r.firstChild);u=g.getNextDomNode(r,!1,l);g.remove(r);r=u}else{u=r;for(B.setStartBefore(r);r&&r!==n.end&&(!y(r)||g.isBookmarkNode(r));)u=r,r=g.getNextDomNode(r,!1,null,function(a){return!k[a.tagName]});r&&y(r)&&(A=g.getNextDomNode(u,!1,l))&&g.isBookmarkNode(A)&&(r=g.getNextDomNode(A,!1,l),u=A);B.setEndAfter(u);r=g.getNextDomNode(u,!1,l);A=f.document.createElement("li");A.appendChild(B.extractContents());if(g.isEmptyNode(A)){for(u=f.document.createElement("p");A.firstChild;)u.appendChild(A.firstChild);A.appendChild(u)}p.appendChild(A)}else r=g.getNextDomNode(r,!0,l);f.moveToBookmark(n).collapse(!0);B=this.document.createElement(m);a(B,e);B.appendChild(p);f.insertNode(B);b(B,m,e);n=0;for(m=g.getElementsByTagName(B,"div");l=m[n++];)l.getAttribute("tmpDiv")&&g.remove(l,!0);f.moveToBookmark(q).select()},queryCommandState:function(a){a="insertorderedlist"==a.toLowerCase()?"ol":"ul";for(var b=this.selection.getStartElementPath(),c=0,e;(e=b[c++])&&"TABLE"!=e.nodeName;)if(a==e.nodeName.toLowerCase())return 1;return 0},queryCommandValue:function(a){a="insertorderedlist"==a.toLowerCase()?"ol":"ul";for(var b=this.selection.getStartElementPath(),c,e=0,h;h=b[e++];){if("TABLE"==h.nodeName){c=null;break}if(a==h.nodeName.toLowerCase()){c=h;break}}return c?d(c)||g.getComputedStyle(c,"list-style-type"):null}}};(function(){var f={textarea:function(d,c){var b=c.ownerDocument.createElement("textarea");b.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";r.ie&&8>r.version&&(b.style.width=c.offsetWidth+"px",b.style.height=c.offsetHeight+"px",c.onresize=function(){b.style.width=c.offsetWidth+"px";b.style.height=c.offsetHeight+"px"});c.appendChild(b);return{setContent:function(a){b.value=a},getContent:function(){return b.value},select:function(){var a;r.ie?(a=b.createTextRange(),a.collapse(!0),a.select()):(b.setSelectionRange(0,0),b.focus())},dispose:function(){c.removeChild(b);c=b=c.onresize=null}}},codemirror:function(d,c){var b=window.CodeMirror(c,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),a=b.getWrapperElement();a.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';b.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";b.refresh();return{getCodeMirror:function(){return b},setContent:function(a){b.setValue(a)},getContent:function(){return b.getValue()},select:function(){b.focus()},dispose:function(){c.removeChild(a);b=a=null}}}};UE.plugins.source=function(){var d=this,c=this.options,b=!1,a,e;c.sourceEditor=r.ie?"textarea":c.sourceEditor||"codemirror";d.setOpt({sourceEditorFirst:!1});var h,l,k;d.commands.source={execCommand:function(){if(b=!b){k=d.selection.getRange().createAddress(!1,!0);d.undoManger&&d.undoManger.save(!0);r.gecko&&(d.body.contentEditable=!1);h=d.iframe.style.cssText;d.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";d.fireEvent("beforegetcontent");var m=UE.htmlparser(d.body.innerHTML);d.filterOutputRule(m);m.traversal(function(a){if("element"==a.type)switch(a.tagName){case "td":case "th":case "caption":a.children&&1==a.children.length&&"br"==a.firstChild().tagName&&a.removeChild(a.firstChild());break;case "pre":a.innerText(a.innerText().replace(/&nbsp;/g," "))}});d.fireEvent("aftergetcontent");m=m.toHtml(!0);a=f["codemirror"==c.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](d,d.iframe.parentNode);a.setContent(m);e=d.setContent;d.setContent=function(b){b=UE.htmlparser(b);d.filterInputRule(b);b=b.toHtml();a.setContent(b)};l=d.getContent;d.getContent=function(){return a.getContent()||""}}else if(d.iframe.style.cssText=h,m=a.getContent()||"",m=m.replace(RegExp("[\\r\\t\\n ]*\x3c/?(\\w+)\\s*(?:[^\x3e]*)\x3e","g"),function(a,b){return b&&!w.$inlineWithA[b.toLowerCase()]?a.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):a.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),d.setContent=e,d.setContent(m),a.dispose(),a=null,d.getContent=l,m=d.body.firstChild,m||(d.body.innerHTML="",m=d.body.firstChild),d.undoManger&&d.undoManger.save(!0),r.gecko){var p=document.createElement("input");p.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(p);d.body.contentEditable=!1;setTimeout(function(){g.setViewportOffset(p,{left:-32768,top:0});p.focus();setTimeout(function(){d.body.contentEditable=!0;d.selection.getRange().moveToAddress(k).select(!0);g.remove(p)})})}else try{d.selection.getRange().moveToAddress(k).select(!0)}catch(u){}this.fireEvent("sourcemodechanged",b)},queryCommandState:function(){return b|0},notNeedUndo:1};var p=d.queryCommandState;d.queryCommandState=function(a){a=a.toLowerCase();return b?a in{source:1,fullscreen:1}?1:-1:p.apply(this,arguments)};"codemirror"==c.sourceEditor&&d.addListener("ready",function(){n.loadFile(document,{src:c.codeMirrorJsUrl||c.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){c.sourceEditorFirst&&setTimeout(function(){d.execCommand("source")},0)});n.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:c.codeMirrorCssUrl||c.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}})();UE.plugins.enterkey=function(){var f,d=this,c=d.options.enterTag;d.addListener("keyup",function(b,a){if(13==(a.keyCode||a.which)){var c=d.selection.getRange(),h=c.startContainer,l;if(r.ie)d.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(f)){if(r.gecko)g.findParentByTagName(h,"h1 h2 h3 h4 h5 h6 blockquote caption table".split(" "),!0)||(d.document.execCommand("formatBlock",!1,"\x3cp\x3e"),l=1);else if(1==h.nodeType){var h=d.document.createTextNode(""),k;c.insertNode(h);if(k=g.findParentByTagName(h,"div",!0)){for(l=d.document.createElement("p");k.firstChild;)l.appendChild(k.firstChild);k.parentNode.insertBefore(l,k);g.remove(k);c.setStartBefore(h).setCursor();l=1}g.remove(h)}d.undoManger&&l&&d.undoManger.save()}r.opera&&c.select()}}});d.addListener("keydown",function(b,a){if(13==(a.keyCode||a.which))if(d.fireEvent("beforeenterkeydown"))g.preventDefault(a);else{d.fireEvent("saveScene",!0,!0);f="";var e=d.selection.getRange();if(!e.collapsed){var h=e.startContainer,l=e.endContainer,h=g.findParentByTagName(h,"td",!0),l=g.findParentByTagName(l,"td",!0);if(h&&l&&h!==l||!h&&l||h&&!l){a.preventDefault?a.preventDefault():a.returnValue=!1;return}}if("p"==c)r.ie||((h=g.findParentByTagName(e.startContainer,"ol ul p h1 h2 h3 h4 h5 h6 blockquote caption".split(" "),!0))||r.opera?(f=h.tagName,"p"==h.tagName.toLowerCase()&&r.gecko&&g.removeDirtyAttr(h)):(d.document.execCommand("formatBlock",!1,"\x3cp\x3e"),r.gecko&&(e=d.selection.getRange(),(h=g.findParentByTagName(e.startContainer,"p",!0))&&g.removeDirtyAttr(h))));else if(a.preventDefault?a.preventDefault():a.returnValue=!1,e.collapsed)l=e.document.createElement("br"),e.insertNode(l),l.parentNode.lastChild===l?(l.parentNode.insertBefore(l.cloneNode(!0),l),e.setStartBefore(l)):e.setStartAfter(l),e.setCursor();else if(e.deleteContents(),h=e.startContainer,1==h.nodeType&&(h=h.childNodes[e.startOffset])){for(;1==h.nodeType;){if(w.$empty[h.tagName])return e.setStartBefore(h).setCursor(),d.undoManger&&d.undoManger.save(),!1;if(!h.firstChild)return l=e.document.createElement("br"),h.appendChild(l),e.setStart(h,0).setCursor(),d.undoManger&&d.undoManger.save(),!1;h=h.firstChild}h===e.startContainer.childNodes[e.startOffset]?(l=e.document.createElement("br"),e.insertNode(l).setCursor()):e.setStart(h,0).setCursor()}else l=e.document.createElement("br"),e.insertNode(l).setStartAfter(l).setCursor()}})};UE.plugins.keystrokes=function(){var f=this,d=!0;f.addListener("keydown",function(c,b){var a=b.keyCode||b.which,e=f.selection.getRange();if(!(e.collapsed||b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)&&(65<=a&&90>=a||48<=a&&57>=a||96<=a&&111>=a||{13:1,8:1,46:1}[a])){var h=e.startContainer;g.isFillChar(h)&&e.setStartBefore(h);h=e.endContainer;g.isFillChar(h)&&e.setEndAfter(h);e.txtToElmBoundary();e.endContainer&&1==e.endContainer.nodeType&&(h=e.endContainer.childNodes[e.endOffset])&&g.isBr(h)&&e.setEndAfter(h);if(0==e.startOffset&&(h=e.startContainer,g.isBoundaryNode(h,"firstChild")&&(h=e.endContainer,e.endOffset==(3==h.nodeType?h.nodeValue.length:h.childNodes.length)&&g.isBoundaryNode(h,"lastChild")))){f.fireEvent("saveScene");f.body.innerHTML="";e.setStart(f.body.firstChild,0).setCursor(!1,!0);f._selectionChange();return}}if(a==ha.Backspace){e=f.selection.getRange();d=e.collapsed;if(f.fireEvent("delkeydown",b))return;var l,k;e.collapsed&&e.inFillChar()&&(l=e.startContainer,g.isFillChar(l)?(e.setStartBefore(l).shrinkBoundary(!0).collapse(!0),g.remove(l)):(l.nodeValue=l.nodeValue.replace(new RegExp("^"+g.fillChar),""),e.startOffset--,e.collapse(!0).select(!0)));if(l=e.getClosedNode()){f.fireEvent("saveScene");e.setStartBefore(l);g.remove(l);e.setCursor();f.fireEvent("saveScene");g.preventDefault(b);return}if(!r.ie&&(l=g.findParentByTagName(e.startContainer,"table",!0),k=g.findParentByTagName(e.endContainer,"table",!0),l&&!k||!l&&k||l!==k)){b.preventDefault();return}}if(a==ha.Tab){var p={ol:1,ul:1,table:1};if(f.fireEvent("tabkeydown",b)){g.preventDefault(b);return}e=f.selection.getRange();f.fireEvent("saveScene");var h=0,m="";l=f.options.tabSize||4;for(k=f.options.tabNode||"\x26nbsp;";h<l;h++)m+=k;h=f.document.createElement("span");h.innerHTML=m+g.fillChar;if(e.collapsed)e.insertNode(h.cloneNode(!0).firstChild).setCursor(!0);else if(m=function(a){return g.isBlockElm(a)&&!p[a.tagName.toLowerCase()]},l=g.findParent(e.startContainer,m,!0),k=g.findParent(e.endContainer,m,!0),l&&k&&l===k)e.deleteContents(),e.insertNode(h.cloneNode(!0).firstChild).setCursor(!0);else{l=e.createBookmark();e.enlarge(!0);k=e.createBookmark();for(var q=g.getNextDomNode(k.start,!1,m);q&&!(g.getPosition(q,k.end)&g.POSITION_FOLLOWING);)q.insertBefore(h.cloneNode(!0).firstChild,q.firstChild),q=g.getNextDomNode(q,!1,m);e.moveToBookmark(k).moveToBookmark(l).select()}g.preventDefault(b)}if(r.gecko&&46==a&&(e=f.selection.getRange(),e.collapsed&&(l=e.startContainer,g.isEmptyBlock(l)))){for(a=l.parentNode;1==g.getChildCount(a)&&!g.isBody(a);)l=a,a=a.parentNode;l===a.lastChild&&b.preventDefault()}});f.addListener("keyup",function(c,b){var a;if((b.keyCode||b.which)==ha.Backspace&&!this.fireEvent("delkeyup")){a=this.selection.getRange();if(a.collapsed){var e;if((e=g.findParentByTagName(a.startContainer,"h1 h2 h3 h4 h5 h6".split(" "),!0))&&g.isEmptyBlock(e)){var h=e.previousSibling;if(h&&"TABLE"!=h.nodeName){g.remove(e);a.setStartAtLast(h).setCursor(!1,!0);return}if((h=e.nextSibling)&&"TABLE"!=h.nodeName){g.remove(e);a.setStartAtFirst(h).setCursor(!1,!0);return}}g.isBody(a.startContainer)&&(e=g.createElement(this.document,"p",{innerHTML:r.ie?g.fillChar:"\x3cbr/\x3e"}),a.insertNode(e).setStart(e,0).setCursor(!1,!0))}!d&&(3==a.startContainer.nodeType||1==a.startContainer.nodeType&&g.isEmptyBlock(a.startContainer))&&(r.ie?(e=a.document.createElement("span"),a.insertNode(e).setStartBefore(e).collapse(!0),a.select(),g.remove(e)):a.select())}})};UE.plugins.fiximgclick=function(){function f(){this.cover=this.resizer=this.editor=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}var d=!1;(function(){var c=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];f.prototype={init:function(b){var a=this;a.editor=b;a.startPos=this.prePos={x:0,y:0};a.dragId=-1;b=[];var c=a.cover=document.createElement("div"),d=a.resizer=document.createElement("div");c.id=a.editor.ui.id+"_imagescale_cover";c.style.cssText="position:absolute;display:none;z-index:"+a.editor.options.zIndex+";filter:alpha(opacity\x3d0); opacity:0;background:#CCC;";g.on(c,"mousedown click",function(){a.hide()});for(i=0;8>i;i++)b.push('\x3cspan class\x3d"edui-editor-imagescale-hand'+i+'"\x3e\x3c/span\x3e');d.id=a.editor.ui.id+"_imagescale";d.className="edui-editor-imagescale";d.innerHTML=b.join("");d.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+a.editor.options.zIndex+";";a.editor.ui.getDom().appendChild(c);a.editor.ui.getDom().appendChild(d);a.initStyle();a.initEvents()},initStyle:function(){n.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){this.startPos.x=this.startPos.y=0;this.isDraging=!1},_eventHandler:function(b){switch(b.type){case "mousedown":var a=b.target||b.srcElement;-1!=a.className.indexOf("edui-editor-imagescale-hand")&&-1==this.dragId&&(this.dragId=a.className.slice(-1),this.startPos.x=this.prePos.x=b.clientX,this.startPos.y=this.prePos.y=b.clientY,g.on(this.doc,"mousemove",this.proxy(this._eventHandler,this)));break;case "mousemove":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:b.clientX-this.prePos.x,y:b.clientY-this.prePos.y}),this.prePos.x=b.clientX,this.prePos.y=b.clientY,d=!0,this.updateTargetElement());break;case "mouseup":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:b.clientX-this.prePos.x,y:b.clientY-this.prePos.y}),this.updateTargetElement(),this.target.parentNode&&this.attachTo(this.target),this.dragId=-1),g.un(this.doc,"mousemove",this.proxy(this._eventHandler,this)),d&&(d=!1,this.editor.fireEvent("contentchange"))}},updateTargetElement:function(){g.setStyles(this.target,{width:this.resizer.style.width,height:this.resizer.style.height});this.target.width=parseInt(this.resizer.style.width);this.target.height=parseInt(this.resizer.style.height);this.attachTo(this.target)},updateContainerStyle:function(b,a){var e=this.resizer,d;0!=c[b][0]&&(d=parseInt(e.style.left)+a.x,e.style.left=this._validScaledProp("left",d)+"px");0!=c[b][1]&&(d=parseInt(e.style.top)+a.y,e.style.top=this._validScaledProp("top",d)+"px");0!=c[b][2]&&(d=e.clientWidth+c[b][2]*a.x,e.style.width=this._validScaledProp("width",d)+"px");0!=c[b][3]&&(d=e.clientHeight+c[b][3]*a.y,e.style.height=this._validScaledProp("height",d)+"px")},_validScaledProp:function(b,a){var c=this.resizer,d=document;a=isNaN(a)?0:a;switch(b){case "left":return 0>a?0:a+c.clientWidth>d.clientWidth?d.clientWidth-c.clientWidth:a;case "top":return 0>a?0:a+c.clientHeight>d.clientHeight?d.clientHeight-c.clientHeight:a;case "width":return 0>=a?1:a+c.offsetLeft>d.clientWidth?d.clientWidth-c.offsetLeft:a;case "height":return 0>=a?1:a+c.offsetTop>d.clientHeight?d.clientHeight-c.offsetTop:a}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var b=g.getXY(this.editor.ui.getDom()),a=g.getXY(this.editor.iframe);g.setStyles(this.cover,{width:this.editor.iframe.offsetWidth+"px",height:this.editor.iframe.offsetHeight+"px",top:a.y-b.y+"px",left:a.x-b.x+"px",position:"absolute",display:""})},show:function(b){this.resizer.style.display="block";b&&this.attachTo(b);g.on(this.resizer,"mousedown",this.proxy(this._eventHandler,this));g.on(this.doc,"mouseup",this.proxy(this._eventHandler,this));this.showCover();this.editor.fireEvent("afterscaleshow",this);this.editor.fireEvent("saveScene")},hide:function(){this.hideCover();this.resizer.style.display="none";g.un(this.resizer,"mousedown",this.proxy(this._eventHandler,this));g.un(this.doc,"mouseup",this.proxy(this._eventHandler,this));this.editor.fireEvent("afterscalehide",this)},proxy:function(b,a){return function(c){return b.apply(a||this,arguments)}},attachTo:function(b){b=this.target=b;var a=this.resizer,c=g.getXY(b),d=g.getXY(this.editor.iframe),f=g.getXY(a.parentNode);g.setStyles(a,{width:b.width+"px",height:b.height+"px",left:d.x+c.x-this.editor.document.body.scrollLeft-f.x-parseInt(a.style.borderLeftWidth)+"px",top:d.y+c.y-this.editor.document.documentElement.scrollTop-f.y-parseInt(a.style.borderTopWidth)+"px"})}}})();return function(){var c=this,b;c.setOpt("imageScaleEnabled",!0);!r.ie&&c.options.imageScaleEnabled&&c.addListener("click",function(a,e){var d=c.selection.getRange().getClosedNode();if(d&&"IMG"==d.tagName&&"false"!=c.body.contentEditable){if(!(-1!=d.className.indexOf("edui-faked-music")||d.getAttribute("anchorname")||g.hasClass(d,"loadingclass")||g.hasClass(d,"loaderrorclass"))){if(!b){b=new f;b.init(c);c.ui.getDom().appendChild(b.resizer);var l=function(a){b.hide();b.target&&c.selection.getRange().selectNode(b.target).select()},k=function(a){var b=a.target||a.srcElement;!b||void 0!==b.className&&-1!=b.className.indexOf("edui-editor-imagescale")||l(a)},p;c.addListener("afterscaleshow",function(a){c.addListener("beforekeydown",l);c.addListener("beforemousedown",k);g.on(document,"keydown",l);g.on(document,"mousedown",k);c.selection.getNative().removeAllRanges()});c.addListener("afterscalehide",function(a){c.removeListener("beforekeydown",l);c.removeListener("beforemousedown",k);g.un(document,"keydown",l);g.un(document,"mousedown",k);a=b.target;a.parentNode&&c.selection.getRange().selectNode(a).select()});g.on(b.resizer,"mousedown",function(a){c.selection.getNative().removeAllRanges();var e=a.target||a.srcElement;e&&-1==e.className.indexOf("edui-editor-imagescale-hand")&&(p=setTimeout(function(){b.hide();b.target&&c.selection.getRange().selectNode(e).select()},200))});g.on(b.resizer,"mouseup",function(a){(a=a.target||a.srcElement)&&-1==a.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(p)})}b.show(d)}}else b&&"none"!=b.resizer.style.display&&b.hide()});r.webkit&&c.addListener("click",function(a,b){"IMG"==b.target.tagName&&"false"!=c.body.contentEditable&&(new K.Range(c.document)).selectNode(b.target).select()})}}();UE.plugin.register("autolink",function(){return r.ie?{}:{bindEvents:{reset:function(){},keydown:function(f,d){var c=d.keyCode||d.which;if(32==c||13==c){for(var c=this.selection.getNative(),b=c.getRangeAt(0).cloneRange(),a,e=b.startContainer;1==e.nodeType&&0<b.startOffset;){e=b.startContainer.childNodes[b.startOffset-1];if(!e)break;b.setStart(e,1==e.nodeType?e.childNodes.length:e.nodeValue.length);b.collapse(!0);e=b.startContainer}do{if(0==b.startOffset){for(e=b.startContainer.previousSibling;e&&1==e.nodeType;)e=e.lastChild;if(!e||g.isFillChar(e))break;a=e.nodeValue.length}else e=b.startContainer,a=b.startOffset;b.setStart(e,a-1);a=b.toString().charCodeAt(0)}while(160!=a&&32!=a);if(b.toString().replace(new RegExp(g.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;b.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(b.toString());)try{b.setStart(b.startContainer,b.startOffset+1)}catch(l){for(e=b.startContainer;!(next=e.nextSibling);){if(g.isBody(e))return;e=e.parentNode}b.setStart(next,0)}if(!g.findParentByTagName(b.startContainer,"a",!0)){a=this.document.createElement("a");var e=this.document.createTextNode(" "),h;this.undoManger&&this.undoManger.save();a.appendChild(b.extractContents());a.href=a.innerHTML=a.innerHTML.replace(/<[^>]+>/g,"");h=a.getAttribute("href").replace(new RegExp(g.fillChar,"g"),"");h=/^(?:https?:\/\/)/ig.test(h)?h:"http://"+h;a.setAttribute("_src",n.html(h));a.href=n.html(h);b.insertNode(a);a.parentNode.insertBefore(e,a.nextSibling);b.setStart(e,0);b.collapse(!0);c.removeAllRanges();c.addRange(b);this.undoManger&&this.undoManger.save()}}}}}}},function(){function f(c){if(3==c.nodeType)return null;if("A"==c.nodeName)return c;for(c=c.lastChild;c;){if("A"==c.nodeName)return c;if(3==c.nodeType){if(g.isWhitespace(c)){c=c.previousSibling;continue}return null}c=c.lastChild}}var d={37:1,38:1,39:1,40:1,13:1,32:1};r.ie&&this.addListener("keyup",function(c,b){var a=b.keyCode;if(d[a]){var e=this.selection.getRange(),h=e.startContainer;if(13==a){for(;h&&!g.isBody(h)&&!g.isBlockElm(h);)h=h.parentNode;h&&!g.isBody(h)&&"P"==h.nodeName&&(e=h.previousSibling)&&1==e.nodeType&&(e=f(e))&&!e.getAttribute("_href")&&g.remove(e,!0)}else 32==a?3==h.nodeType&&/^\s$/.test(h.nodeValue)&&(h=h.previousSibling)&&"A"==h.nodeName&&!h.getAttribute("_href")&&g.remove(h,!0):(h=g.findParentByTagName(h,"a",!0))&&!h.getAttribute("_href")&&(a=e.createBookmark(),g.remove(h,!0),e.moveToBookmark(a).select(!0))}})});UE.plugins.autoheight=function(){function f(){var c=this;clearTimeout(h);l||c.queryCommandState&&(!c.queryCommandState||1==c.queryCommandState("source"))||(h=setTimeout(function(){for(var d=c.body.lastChild;d&&1!=d.nodeType;)d=d.previousSibling;d&&1==d.nodeType&&(d.style.clear="both",e=Math.max(g.getXY(d).y+d.offsetHeight+25,Math.max(a.minFrameHeight,a.initialFrameHeight)),e!=b&&(e!==parseInt(c.iframe.parentNode.style.height)&&(c.iframe.parentNode.style.height=e+"px"),c.body.style.height=e+"px",b=e),g.removeStyle(d,"clear"))},50))}var d=this;d.autoHeightEnabled=!1!==d.options.autoHeightEnabled;if(d.autoHeightEnabled){var c,b=0,a=d.options,e,h,l;d.addListener("fullscreenchanged",function(a,b){l=b});d.addListener("destroy",function(){d.removeListener("contentchange afterinserthtml keyup mouseup",f)});d.enableAutoHeight=function(){var a=this;if(a.autoHeightEnabled){var b=a.document;a.autoHeightEnabled=!0;c=b.body.style.overflowY;b.body.style.overflowY="hidden";a.addListener("contentchange afterinserthtml keyup mouseup",f);setTimeout(function(){f.call(a)},r.gecko?100:0);a.fireEvent("autoheightchanged",a.autoHeightEnabled)}};d.disableAutoHeight=function(){d.body.style.overflowY=c||"";d.removeListener("contentchange",f);d.removeListener("keyup",f);d.removeListener("mouseup",f);d.autoHeightEnabled=!1;d.fireEvent("autoheightchanged",d.autoHeightEnabled)};d.on("setHeight",function(){d.disableAutoHeight()});d.addListener("ready",function(){d.enableAutoHeight();var a;g.on(r.ie?d.body:d.document,r.webkit?"dragover":"drop",function(){clearTimeout(a);a=setTimeout(function(){f.call(d)},100)});var b;window.onscroll=function(){null===b?b=this.scrollY:0==this.scrollY&&0!=b&&(d.window.scrollTo(0,0),b=null)}})}};UE.plugins.autofloat=function(){function f(){var a=document.body.style;a.backgroundImage='url("about:blank")';a.backgroundAttachment="fixed"}function d(){z=!0;m.parentNode&&m.parentNode.removeChild(m);q.style.cssText=p}function c(){var a=y(b.container),c=b.options.toolbarTopOffset||0;if(0>a.top&&a.bottom-q.offsetHeight>c){var a=g.getXY(q),c=g.getComputedStyle(q,"position"),f=g.getComputedStyle(q,"left");q.style.width=q.offsetWidth+"px";q.style.zIndex=1*b.options.zIndex+1;q.parentNode.insertBefore(m,q);l||k&&r.ie?("absolute"!=q.style.position&&(q.style.position="absolute"),q.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-u+e+"px"):(r.ie7Compat&&z&&(z=!1,q.style.left=g.getXY(q).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=q.style.position&&(q.style.position="fixed",q.style.top="40px",("absolute"==c||"relative"==c)&&parseFloat(f)&&(q.style.left=a.x+"px")))}else d()}var b=this,a=b.getLang();b.setOpt({topOffset:0});var e=b.options.topOffset;if(!1!==b.options.autoFloatEnabled){var h=UE.ui.uiUtils,l=r.ie&&6>=r.version,k=r.quirks,p,m=document.createElement("div"),q,u,y,z=!0,v=n.defer(function(){c()},r.ie?200:100,!0);b.addListener("destroy",function(){g.un(window,["scroll","resize"],c);b.removeListener("keydown",v)});b.addListener("ready",function(){var e;UE.ui?e=1:(alert(a.autofloatMsg),e=0);e&&b.ui&&(y=h.getClientRect,q=b.ui.getDom("toolbarbox"),u=y(q).top,p=q.style.cssText,m.style.height=q.offsetHeight+"px",l&&f(),g.on(window,["scroll","resize"],c),b.addListener("keydown",v),b.addListener("beforefullscreenchange",function(a,b){b&&d()}),b.addListener("fullscreenchanged",function(a,b){b||c()}),b.addListener("sourcemodechanged",function(a,b){setTimeout(function(){c()},0)}),b.addListener("clearDoc",function(){setTimeout(function(){c()},0)}))})}};UE.plugins.video=function(){function f(b,a,e,d,f,k,g){b=n.unhtmlForUrl(b);f=n.unhtml(f);k=n.unhtml(k);var h;switch(g){case "image":h="\x3cimg "+(d?'id\x3d"'+d+'"':"")+' width\x3d"'+a+'" height\x3d"'+e+'" _url\x3d"'+b+'" class\x3d"'+k.replace(/\bvideo-js\b/,"")+'" src\x3d"'+c.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style\x3d"background:url('+c.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(f?"float:"+f+";":"")+'" /\x3e';break;case "embed":case "video":g=b.substr(b.lastIndexOf(".")+1),"ogv"==g&&(g="ogg"),h="\x3cvideo"+(d?' id\x3d"'+d+'"':"")+' class\x3d"'+k+' video-js" '+(f?' style\x3d"float:'+f+'"':"")+' controls preload\x3d"none" width\x3d"'+a+'" height\x3d"'+e+'" src\x3d"'+b+'"\x3e\x3csource src\x3d"'+b+'" type\x3d"video/'+g+'" /\x3e\x3c/video\x3e'}return h}function d(b,a){n.each(b.getNodesByTagName(a?"img":"embed video"),function(b){var c=b.getAttr("class");if(c&&-1!=c.indexOf("edui-faked-video")){var e=f(a?b.getAttr("_url"):b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),null,b.getStyle("float")||"",c,a?"video":"image");b.parentNode.replaceChild(UE.uNode.createElement(e),b)}c&&-1!=c.indexOf("edui-upload-video")&&(e=f(a?b.getAttr("_url"):b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),null,b.getStyle("float")||"",c,a?"video":"image"),b.parentNode.replaceChild(UE.uNode.createElement(e),b))})}var c=this;c.addOutputRule(function(b){d(b,!0)});c.addInputRule(function(b){d(b)});c.commands.insertvideo={execCommand:function(b,a,e){a=n.isArray(a)?a:[a];b=[];for(var d,g=0,k,p=a.length;g<p;g++)k=a[g],d="upload"==e?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",b.push(f(k.url,k.width||420,k.height||280,"tmpVedio"+g,null,d,"video"));c.execCommand("inserthtml",b.join(""),!0);c.execCommand("source");c.execCommand("source");this.selection.getRange()},queryCommandState:function(){var b=c.selection.getRange().getClosedNode();return!b||"edui-faked-video"!=b.className&&-1==b.className.indexOf("edui-upload-video")?0:1}}};(function(){var f=UE.UETable=function(d){this.table=d;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(d)};f.removeSelectedClass=function(d){n.each(d,function(c){g.removeClasses(c,"selectTdClass")})};f.addSelectedClass=function(d){n.each(d,function(c){g.addClass(c,"selectTdClass")})};f.isEmptyBlock=function(d){var c=new RegExp(g.fillChar,"g");if(0<d[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(c,"").length)return 0;for(var b in w.$isNotEmpty)if(w.$isNotEmpty.hasOwnProperty(b)&&d.getElementsByTagName(b).length)return 0;return 1};f.getWidth=function(d){return d?parseInt(g.getComputedStyle(d,"width"),10):0};f.getTableCellAlignState=function(d){!n.isArray(d)&&(d=[d]);var c={},b=["align","valign"],a=null,e=!0;n.each(d,function(d){n.each(b,function(b){a=d.getAttribute(b);if(!c[b]&&a)c[b]=a;else if(!c[b]||a!==c[b])return e=!1});return e});return e?c:null};f.getTableItemsByRange=function(d){var c=d.selection.getStart();c&&c.id&&0===c.id.indexOf("_baidu_bookmark_start_")&&c.nextSibling&&(c=c.nextSibling);var b=(d=c&&g.findParentByTagName(c,["td","th"],!0))&&d.parentNode,c=c&&g.findParentByTagName(c,"caption",!0);return{cell:d,tr:b,table:c?c.parentNode:b&&b.parentNode.parentNode,caption:c}};f.getUETableBySelected=function(d){return(d=f.getTableItemsByRange(d).table)&&d.ueTable&&d.ueTable.selectedTds.length?d.ueTable:null};f.getDefaultValue=function(d,c){var b={thin:"0px",medium:"1px",thick:"2px"},a,e,f;if(c)l=c.getElementsByTagName("td")[0],f=g.getComputedStyle(c,"border-left-width"),a=parseInt(b[f]||f,10),f=g.getComputedStyle(l,"padding-left"),e=parseInt(b[f]||f,10),f=g.getComputedStyle(l,"border-left-width"),b=parseInt(b[f]||f,10);else{c=d.document.createElement("table");c.insertRow(0).insertCell(0).innerHTML="xxx";d.body.appendChild(c);var l=c.getElementsByTagName("td")[0];f=g.getComputedStyle(c,"border-left-width");a=parseInt(b[f]||f,10);f=g.getComputedStyle(l,"padding-left");e=parseInt(b[f]||f,10);f=g.getComputedStyle(l,"border-left-width");b=parseInt(b[f]||f,10);g.remove(c)}return{tableBorder:a,tdPadding:e,tdBorder:b}};f.getUETable=function(d){var c=d.tagName.toLowerCase();d="td"==c||"th"==c||"caption"==c?g.findParentByTagName(d,"table",!0):d;d.ueTable||(d.ueTable=new f(d));return d.ueTable};f.cloneCell=function(d,c,b){if(!d||n.isString(d))return this.table.ownerDocument.createElement(d||"td");var a=g.hasClass(d,"selectTdClass");a&&g.removeClasses(d,"selectTdClass");var e=d.cloneNode(!0);c&&(e.rowSpan=e.colSpan=1);!b&&g.removeAttributes(e,"width height");!b&&g.removeAttributes(e,"style");e.style.borderLeftStyle="";e.style.borderTopStyle="";e.style.borderLeftColor=d.style.borderRightColor;e.style.borderLeftWidth=d.style.borderRightWidth;e.style.borderTopColor=d.style.borderBottomColor;e.style.borderTopWidth=d.style.borderBottomWidth;a&&g.addClass(d,"selectTdClass");return e};f.prototype={getMaxRows:function(){for(var d=this.table.rows,c=1,b=0,a;a=d[b];b++){for(var e=1,f=0,g;g=a.cells[f++];)e=Math.max(g.rowSpan||1,e);c=Math.max(e+b,c)}return c},getMaxCols:function(){for(var d=this.table.rows,c=0,b={},a=0,e;e=d[a];a++){for(var f=0,g=0,k;k=e.cells[g++];)if(f+=k.colSpan||1,k.rowSpan&&1<k.rowSpan)for(var p=1;p<k.rowSpan;p++)b["row_"+(a+p)]?b["row_"+(a+p)]++:b["row_"+(a+p)]=k.colSpan||1;f+=b["row_"+a]||0;c=Math.max(f,c)}return c},getCellColIndex:function(d){},getHSideCell:function(d,c){try{var b=this.getCellInfo(d),a,e,f=this.selectedTds.length,g=this.cellsRange;if(!c&&(f?!g.beginColIndex:!b.colIndex)||c&&(f?g.endColIndex==this.colsNum-1:b.colIndex==this.colsNum-1))return null;a=f?g.beginRowIndex:b.rowIndex;e=c?f?g.endColIndex+1:b.colIndex+1:f?g.beginColIndex-1:1>b.colIndex?0:b.colIndex-1;return this.getCell(this.indexTable[a][e].rowIndex,this.indexTable[a][e].cellIndex)}catch(k){}},getTabNextCell:function(d,c){var b=this.getCellInfo(d),a=c||b.rowIndex,b=b.colIndex+1+(b.colSpan-1),e;try{e=this.getCell(this.indexTable[a][b].rowIndex,this.indexTable[a][b].cellIndex)}catch(h){try{a=1*a+1,b=0,e=this.getCell(this.indexTable[a][b].rowIndex,this.indexTable[a][b].cellIndex)}catch(l){}}return e},getVSideCell:function(d,c,b){try{var a=this.getCellInfo(d),e,f,g=this.selectedTds.length&&!b,k=this.cellsRange;if(!c&&0==a.rowIndex||c&&(g?k.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1))return null;e=c?g?k.endRowIndex+1:a.rowIndex+a.rowSpan:g?k.beginRowIndex-1:a.rowIndex-1;f=g?k.beginColIndex:a.colIndex;return this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(p){}},getSameEndPosCells:function(d,c){try{for(var b="x"===c.toLowerCase(),a=g.getXY(d)[b?"x":"y"]+d["offset"+(b?"Width":"Height")],e=this.table.rows,f=null,l=[],k=0;k<this.rowsNum;k++)for(var f=e[k].cells,p=0,m;m=f[p++];){var q=g.getXY(m)[b?"x":"y"]+m["offset"+(b?"Width":"Height")];if(q>a&&b)break;if(d==m||a==q)if(1==m[b?"colSpan":"rowSpan"]&&l.push(m),b)break}return l}catch(u){}},setCellContent:function(d,c){d.innerHTML=c||(r.ie?g.fillChar:"\x3cbr /\x3e")},cloneCell:f.cloneCell,getSameStartPosXCells:function(d){try{var c=g.getXY(d).x+d.offsetWidth,b=this.table.rows,a;d=[];for(var e=0;e<this.rowsNum;e++){a=b[e].cells;for(var f=0,l;l=a[f++];){var k=g.getXY(l).x;if(k>c)break;if(k==c&&1==l.colSpan){d.push(l);break}}}return d}catch(p){}},update:function(d){this.table=d||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];d=this.table.rows;for(var c=this.getMaxRows(),b=c-d.length,a=this.getMaxCols();b--;)this.table.insertRow(d.length);this.rowsNum=c;this.colsNum=a;for(var b=0,e=d.length;b<e;b++)this.indexTable[b]=Array(a);for(var b=0,f;f=d[b];b++){var e=0,l;for(f=f.cells;l=f[e];e++){l.rowSpan>c&&(l.rowSpan=c);var k=e,p=l.rowSpan||1;for(l=l.colSpan||1;this.indexTable[b][k];)k++;for(var m=0;m<p;m++)for(var q=0;q<l;q++)this.indexTable[b+m][k+q]={rowIndex:b,cellIndex:e,colIndex:k,rowSpan:p,colSpan:l}}}for(m=0;m<c;m++)for(q=0;q<a;q++)void 0===this.indexTable[m][q]&&(f=d[m],l=(l=f.cells[f.cells.length-1])?l.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(l),1!==l.colSpan&&(l.colSpan=1),1!==l.rowSpan&&(l.rowSpan=1),f.appendChild(l),this.indexTable[m][q]={rowIndex:m,cellIndex:l.cellIndex,colIndex:q,rowSpan:1,colSpan:1});d=g.getElementsByTagName(this.table,"td");var u=[];n.each(d,function(a){g.hasClass(a,"selectTdClass")&&u.push(a)});u.length&&(c=u[u.length-1],d=this.getCellInfo(u[0]),c=this.getCellInfo(c),this.selectedTds=u,this.cellsRange={beginRowIndex:d.rowIndex,beginColIndex:d.colIndex,endRowIndex:c.rowIndex+c.rowSpan-1,endColIndex:c.colIndex+c.colSpan-1});if(!g.hasClass(this.table.rows[0],"firstRow"))for(g.addClass(this.table.rows[0],"firstRow"),b=1;b<this.table.rows.length;b++)g.removeClasses(this.table.rows[b],"firstRow")},getCellInfo:function(d){if(d){var c=d.cellIndex;d=d.parentNode.rowIndex;for(var b=this.indexTable[d],a=this.colsNum,e=c;e<a;e++){var f=b[e];if(f.rowIndex===d&&f.cellIndex===c)return f}}},getCell:function(d,c){return d<this.rowsNum&&this.table.rows[d].cells[c]||null},deleteCell:function(d,c){c="number"==typeof c?c:d.parentNode.rowIndex;this.table.rows[c].deleteCell(d.cellIndex)},getCellsRange:function(d,c){function b(c,e,d,f){var h=c,k=e,g=d,l=f,m,p,n;if(0<c)for(p=e;p<f;p++)m=a.indexTable[c][p],n=m.rowIndex,n<c&&(h=Math.min(n,h));if(f<a.colsNum)for(n=c;n<d;n++)m=a.indexTable[n][f],p=m.colIndex+m.colSpan-1,p>f&&(l=Math.max(p,l));if(d<a.rowsNum)for(p=e;p<f;p++)m=a.indexTable[d][p],n=m.rowIndex+m.rowSpan-1,n>d&&(g=Math.max(n,g));if(0<e)for(n=c;n<d;n++)m=a.indexTable[n][e],p=m.colIndex,p<e&&(k=Math.min(m.colIndex,k));return h!=c||k!=e||g!=d||l!=f?b(h,k,g,l):{beginRowIndex:c,beginColIndex:e,endRowIndex:d,endColIndex:f}}try{var a=this,e=a.getCellInfo(d);if(d===c)return{beginRowIndex:e.rowIndex,beginColIndex:e.colIndex,endRowIndex:e.rowIndex+e.rowSpan-1,endColIndex:e.colIndex+e.colSpan-1};var f=a.getCellInfo(c);return b(Math.min(e.rowIndex,f.rowIndex),Math.min(e.colIndex,f.colIndex),Math.max(e.rowIndex+e.rowSpan-1,f.rowIndex+f.rowSpan-1),Math.max(e.colIndex+e.colSpan-1,f.colIndex+f.colSpan-1))}catch(l){}},getCells:function(d){this.clearSelected();for(var c=d.beginColIndex,b=d.endRowIndex,a=d.endColIndex,e,f,g={},k=[],p=d.beginRowIndex;p<=b;p++)for(var m=c;m<=a;m++){d=this.indexTable[p][m];e=d.rowIndex;f=d.colIndex;var q=e+"|"+f;if(!g[q]){g[q]=1;if(e<p||f<m||e+d.rowSpan-1>b||f+d.colSpan-1>a)return null;k.push(this.getCell(e,d.cellIndex))}}return k},clearSelected:function(){f.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(d){var c=this.getCells(d);f.addSelectedClass(c);this.selectedTds=c;this.cellsRange=d},isFullRow:function(){var d=this.cellsRange;return d.endColIndex-d.beginColIndex+1==this.colsNum},isFullCol:function(){var d=this.cellsRange,c=this.table.getElementsByTagName("th"),d=d.endRowIndex-d.beginRowIndex+1;return c.length?d==this.rowsNum||d==this.rowsNum-1:d==this.rowsNum},getNextCell:function(d,c,b){try{var a=this.getCellInfo(d),e,f,g=this.selectedTds.length&&!b,k=this.cellsRange;if(!c&&0==a.rowIndex||c&&(g?k.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1))return null;e=c?g?k.endRowIndex+1:a.rowIndex+a.rowSpan:g?k.beginRowIndex-1:a.rowIndex-1;f=g?k.beginColIndex:a.colIndex;return this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(p){}},getPreviewCell:function(d,c){try{var b=this.getCellInfo(d),a,e,f=this.selectedTds.length,g=this.cellsRange;if(!c&&(f?!g.beginColIndex:!b.colIndex)||c&&(f?g.endColIndex==this.colsNum-1:b.rowIndex>this.colsNum-1))return null;a=c?f?g.beginRowIndex:1>b.rowIndex?0:b.rowIndex-1:f?g.beginRowIndex:b.rowIndex;e=c?f?g.endColIndex+1:b.colIndex:f?g.beginColIndex-1:1>b.colIndex?0:b.colIndex-1;return this.getCell(this.indexTable[a][e].rowIndex,this.indexTable[a][e].cellIndex)}catch(k){}},moveContent:function(d,c){if(!f.isEmptyBlock(c))if(f.isEmptyBlock(d))d.innerHTML=c.innerHTML;else{var b=d.lastChild;for(3!=b.nodeType&&w.$block[b.tagName]||d.appendChild(d.ownerDocument.createElement("br"));b=c.firstChild;)d.appendChild(b)}},mergeRight:function(d){var c=this.getCellInfo(d),b=this.indexTable[c.rowIndex][c.colIndex+c.colSpan],a=this.getCell(b.rowIndex,b.cellIndex);d.colSpan=c.colSpan+b.colSpan;d.removeAttribute("width");this.moveContent(d,a);this.deleteCell(a,b.rowIndex);this.update()},mergeDown:function(d){var c=this.getCellInfo(d),b=this.indexTable[c.rowIndex+c.rowSpan][c.colIndex],a=this.getCell(b.rowIndex,b.cellIndex);d.rowSpan=c.rowSpan+b.rowSpan;d.removeAttribute("height");this.moveContent(d,a);this.deleteCell(a,b.rowIndex);this.update()},mergeRange:function(){var d=this.cellsRange,c=this.getCell(d.beginRowIndex,this.indexTable[d.beginRowIndex][d.beginColIndex].cellIndex);if("TH"==c.tagName&&d.endRowIndex!==d.beginRowIndex)var b=this.indexTable,d=this.getCellInfo(c),c=this.getCell(1,b[1][d.colIndex].cellIndex),d=this.getCellsRange(c,this.getCell(b[this.rowsNum-1][d.colIndex].rowIndex,b[this.rowsNum-1][d.colIndex].cellIndex));for(var a=this.getCells(d),b=0,e;e=a[b++];)e!==c&&(this.moveContent(c,e),this.deleteCell(e));c.rowSpan=d.endRowIndex-d.beginRowIndex+1;1<c.rowSpan&&c.removeAttribute("height");c.colSpan=d.endColIndex-d.beginColIndex+1;1<c.colSpan&&c.removeAttribute("width");c.rowSpan==this.rowsNum&&1!=c.colSpan&&(c.colSpan=1);if(c.colSpan==this.colsNum&&1!=c.rowSpan){a=c.parentNode.rowIndex;if(this.table.deleteRow)for(b=a+1,a+=1,d=c.rowSpan;b<d;b++)this.table.deleteRow(a);else for(b=0,d=c.rowSpan-1;b<d;b++)e=this.table.rows[a+1],e.parentNode.removeChild(e);c.rowSpan=1}this.update()},insertRow:function(d,c){function b(a,b,c){0==a?(a=(c.nextSibling||c.previousSibling).cells[a],"TH"==a.tagName&&(a=b.ownerDocument.createElement("th"),a.appendChild(b.firstChild),c.insertBefore(a,b),g.remove(b))):"TH"==b.tagName&&(a=b.ownerDocument.createElement("td"),a.appendChild(b.firstChild),c.insertBefore(a,b),g.remove(b))}var a=this.colsNum,e=this.table.insertRow(d),f,l="string"==typeof c&&"TH"==c.toUpperCase();if(0==d||d==this.rowsNum)for(var k=0;k<a;k++)f=this.cloneCell(c,!0),this.setCellContent(f),f.getAttribute("vAlign")&&f.setAttribute("vAlign",f.getAttribute("vAlign")),e.appendChild(f),l||b(k,f,e);else for(var p=this.indexTable[d],k=0;k<a;k++){var m=p[k];m.rowIndex<d?(f=this.getCell(m.rowIndex,m.cellIndex),f.rowSpan=m.rowSpan+1):(f=this.cloneCell(c,!0),this.setCellContent(f),e.appendChild(f));l||b(k,f,e)}this.update();return e},deleteRow:function(d){for(var c=this.table.rows[d],b=this.indexTable[d],a=this.colsNum,e=0,f=0;f<a;){var l=b[f],k=this.getCell(l.rowIndex,l.cellIndex);if(1<k.rowSpan&&l.rowIndex==d){l=k.cloneNode(!0);l.rowSpan=k.rowSpan-1;l.innerHTML="";k.rowSpan=1;var p=d+1,m=this.table.rows[p],p=this.getPreviewMergedCellsNum(p,f)-e;p<f?(p=f-p-1,g.insertAfter(m.cells[p],l)):m.cells.length&&m.insertBefore(l,m.cells[0]);e+=1}f+=k.colSpan||1}d=[];e={};for(f=0;f<a;f++)k=b[f].rowIndex,l=b[f].cellIndex,m=k+"_"+l,e[m]||(e[m]=1,k=this.getCell(k,l),d.push(k));var q=[];n.each(d,function(a){1==a.rowSpan?a.parentNode.removeChild(a):q.push(a)});n.each(q,function(a){a.rowSpan--});c.parentNode.removeChild(c);this.update()},insertCol:function(d,c,b){function a(a,b,c){0==a?(a=b.nextSibling||b.previousSibling,"TH"==a.tagName&&(a=b.ownerDocument.createElement("th"),a.appendChild(b.firstChild),c.insertBefore(a,b),g.remove(b))):"TH"==b.tagName&&(a=b.ownerDocument.createElement("td"),a.appendChild(b.firstChild),c.insertBefore(a,b),g.remove(b))}var e=this.rowsNum,f=0,l,k,p=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),m="string"==typeof c&&"TH"==c.toUpperCase(),q;if(0==d||d==this.colsNum)for(;f<e;f++)l=this.table.rows[f],q=l.cells[0==d?d:l.cells.length],k=this.cloneCell(c,!0),this.setCellContent(k),k.setAttribute("vAlign",k.getAttribute("vAlign")),q&&k.setAttribute("width",q.getAttribute("width")),d?g.insertAfter(l.cells[l.cells.length-1],k):l.insertBefore(k,l.cells[0]),m||a(f,k,l);else for(;f<e;f++)q=this.indexTable[f][d],q.colIndex<d?(k=this.getCell(q.rowIndex,q.cellIndex),k.colSpan=q.colSpan+1):(l=this.table.rows[f],q=l.cells[q.cellIndex],k=this.cloneCell(c,!0),this.setCellContent(k),k.setAttribute("vAlign",k.getAttribute("vAlign")),q&&k.setAttribute("width",q.getAttribute("width")),q?l.insertBefore(k,q):l.appendChild(k)),m||a(f,k,l);this.update();this.updateWidth(p,b||{tdPadding:10,tdBorder:1})},updateWidth:function(d,c){var b=this.table,a=f.getWidth(b)-2*c.tdPadding-c.tdBorder+d;a<b.ownerDocument.body.offsetWidth?b.setAttribute("width",a):(b=g.getElementsByTagName(this.table,"td th"),n.each(b,function(a){a.setAttribute("width",d)}))},deleteCol:function(d){for(var c=this.indexTable,b=this.table.rows,a=this.table.getAttribute("width"),e=0,f=this.rowsNum,g={},k=0;k<f;){var p=c[k][d],m=p.rowIndex+"_"+p.colIndex;g[m]||(g[m]=1,m=this.getCell(p.rowIndex,p.cellIndex),e||(e=m&&parseInt(m.offsetWidth/m.colSpan,10).toFixed(0)),1<m.colSpan?m.colSpan--:b[k].deleteCell(p.cellIndex),k+=p.rowSpan||1)}this.table.setAttribute("width",a-e);this.update()},splitToCells:function(d){var c=this;d=this.splitToRows(d);n.each(d,function(b){c.splitToCols(b)})},splitToRows:function(d){var c=this.getCellInfo(d),b=c.rowIndex,a=c.colIndex,e=[];d.rowSpan=1;e.push(d);for(var f=b,g=b+c.rowSpan;f<g;f++)if(f!=b){var k=this.table.rows[f].insertCell(a-this.getPreviewMergedCellsNum(f,a));k.colSpan=c.colSpan;this.setCellContent(k);k.setAttribute("vAlign",d.getAttribute("vAlign"));k.setAttribute("align",d.getAttribute("align"));d.style.cssText&&(k.style.cssText=d.style.cssText);e.push(k)}this.update();return e},getPreviewMergedCellsNum:function(d,c){for(var b=this.indexTable[d],a=0,e=0;e<c;)var f=b[e].colSpan,a=a+(f-(b[e].rowIndex==d?1:0)),e=e+f;return a},splitToCols:function(d){var c=(d.offsetWidth/d.colSpan-22).toFixed(0),b=this.getCellInfo(d),a=b.rowIndex,e=b.colIndex,f=[];d.colSpan=1;d.setAttribute("width",c);f.push(d);for(var l=e,k=e+b.colSpan;l<k;l++)if(l!=e){var p=this.table.rows[a],m=p.insertCell(this.indexTable[a][l].cellIndex+1);m.rowSpan=b.rowSpan;this.setCellContent(m);m.setAttribute("vAlign",d.getAttribute("vAlign"));m.setAttribute("align",d.getAttribute("align"));m.setAttribute("width",c);d.style.cssText&&(m.style.cssText=d.style.cssText);if("TH"==d.tagName){var q=d.ownerDocument.createElement("th");q.appendChild(m.firstChild);q.setAttribute("vAlign",d.getAttribute("vAlign"));q.rowSpan=m.rowSpan;p.insertBefore(q,m);g.remove(m)}f.push(m)}this.update();return f},isLastCell:function(d,c,b){c=c||this.rowsNum;b=b||this.colsNum;d=this.getCellInfo(d);return d.rowIndex+d.rowSpan==c&&d.colIndex+d.colSpan==b},getLastCell:function(d){d=d||this.table.getElementsByTagName("td");this.getCellInfo(d[0]);var c=this,b=d[0],a=b.parentNode,e=0,f=0,g;n.each(d,function(b){b.parentNode==a&&(f+=b.colSpan||1);e+=b.rowSpan*b.colSpan||1});g=e/f;n.each(d,function(a){if(c.isLastCell(a,g,f))return b=a,!1});return b},selectRow:function(d){var c=this.indexTable[d];d=this.getCell(c[0].rowIndex,c[0].cellIndex);c=this.getCell(c[this.colsNum-1].rowIndex,c[this.colsNum-1].cellIndex);d=this.getCellsRange(d,c);this.setSelected(d)},selectTable:function(){var d=this.table.getElementsByTagName("td"),d=this.getCellsRange(d[0],d[d.length-1]);this.setSelected(d)},setBackground:function(d,c){if("string"===typeof c)n.each(d,function(a){a.style.backgroundColor=c});else if("object"===typeof c){c=n.extend({repeat:!0,colorList:["#ddd","#fff"]},c);for(var b=this.getCellInfo(d[0]).rowIndex,a=0,e=c.colorList,f=function(a,b,c){return a[b]?a[b]:c?a[b%a.length]:""},g=0,k;k=d[g++];){var p=this.getCellInfo(k);k.style.backgroundColor=f(e,b+a==p.rowIndex?a:++a,c.repeat)}}},removeBackground:function(d){n.each(d,function(c){c.style.backgroundColor=""})}}})();(function(){function f(a,c){var e=g.getElementsByTagName(a,"td th");n.each(e,function(a){a.removeAttribute("width")});a.setAttribute("width",d(c,!0,b.getDefaultValue(c,a)));var f=[];setTimeout(function(){n.each(e,function(a){1==a.colSpan&&f.push(a.offsetWidth)});n.each(e,function(a,b){1==a.colSpan&&a.setAttribute("width",f[b]+"")})},0)}function d(a,b,c){var e=a.body;return e.offsetWidth-(b?2*parseInt(g.getComputedStyle(e,"margin-left"),10):0)-2*c.tableBorder-(a.options.offsetWidth||0)}function c(b){if(b=a(b).cell){var c=e(b);return c.selectedTds.length?c.selectedTds:[b]}return[]}var b=UE.UETable,a=function(a){return b.getTableItemsByRange(a)},e=function(a){return b.getUETable(a)};UE.commands.inserttable={queryCommandState:function(){return a(this).table?-1:0},execCommand:function(a,c){c||(c=n.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var e=this.selection.getRange().startContainer,e=g.findParent(e,function(a){return g.isBlockElm(a)},!0)||this.body,d=b.getDefaultValue(this,void 0),e=Math.floor(e.offsetWidth/c.numCols-2*d.tdPadding-d.tdBorder);!c.tdvalign&&(c.tdvalign=this.options.tdvalign);this.execCommand("inserthtml",function(a,b){for(var c=[],e=a.numRows,d=a.numCols,f=0;f<e;f++){c.push("\x3ctr"+(0==f?' class\x3d"firstRow"':"")+"\x3e");for(var k=0;k<d;k++)c.push('\x3ctd width\x3d"'+b+'"  vAlign\x3d"'+a.tdvalign+'" \x3e'+(r.ie&&11>r.version?g.fillChar:"\x3cbr/\x3e")+"\x3c/td\x3e");c.push("\x3c/tr\x3e")}return"\x3ctable\x3e\x3ctbody\x3e"+c.join("")+"\x3c/tbody\x3e\x3c/table\x3e"}(c,e))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return a(this).cell?0:-1},execCommand:function(){var b=a(this).table;if(b){var c=this.document.createElement("p");c.innerHTML=r.ie?"\x26nbsp;":"\x3cbr /\x3e";b.parentNode.insertBefore(c,b);this.selection.getRange().setStart(c,0).setCursor()}}};UE.commands.deletetable={queryCommandState:function(){var a=this.selection.getRange();return g.findParentByTagName(a.startContainer,"table",!0)?0:-1},execCommand:function(a,b){var c=this.selection.getRange();if(b=b||g.findParentByTagName(c.startContainer,"table",!0)){var e=b.nextSibling;e||(e=g.createElement(this.document,"p",{innerHTML:r.ie?g.fillChar:"\x3cbr/\x3e"}),b.parentNode.insertBefore(e,b));g.remove(b);c=this.selection.getRange();3==e.nodeType?c.setStartBefore(e):c.setStart(e,0);c.setCursor(!1,!0);this.fireEvent("tablehasdeleted")}}};UE.commands.cellalign={queryCommandState:function(){return c(this).length?0:-1},execCommand:function(a,b){var e=c(this);if(e.length)for(var d=0,f;f=e[d++];)f.setAttribute("align",b)}};UE.commands.cellvalign={queryCommandState:function(){return c(this).length?0:-1},execCommand:function(a,b){var e=c(this);if(e.length)for(var d=0,f;f=e[d++];)f.setAttribute("vAlign",b)}};UE.commands.insertcaption={queryCommandState:function(){var b=a(this).table;return b?0==b.getElementsByTagName("caption").length?1:-1:-1},execCommand:function(){var b=a(this).table;if(b){var c=this.document.createElement("caption");c.innerHTML=r.ie?g.fillChar:"\x3cbr/\x3e";b.insertBefore(c,b.firstChild);this.selection.getRange().setStart(c,0).setCursor()}}};UE.commands.deletecaption={queryCommandState:function(){var a=this.selection.getRange();return(a=g.findParentByTagName(a.startContainer,"table"))?0==a.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var a=this.selection.getRange();if(a=g.findParentByTagName(a.startContainer,"table"))g.remove(a.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(a.rows[0].cells[0],0).setCursor()}};UE.commands.inserttitle={queryCommandState:function(){var b=a(this).table;return b?(b=b.rows[0],"th"!=b.cells[b.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var b=a(this).table;b&&e(b).insertRow(0,"th");b=b.getElementsByTagName("th")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}};UE.commands.deletetitle={queryCommandState:function(){var b=a(this).table;return b?(b=b.rows[0],"th"==b.cells[b.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var b=a(this).table;b&&g.remove(b.rows[0]);b=b.getElementsByTagName("td")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}};UE.commands.inserttitlecol={queryCommandState:function(){var b=a(this).table;return b?b.rows[b.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(b){(b=a(this).table)&&e(b).insertCol(0,"th");f(b,this);b=b.getElementsByTagName("th")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}};UE.commands.deletetitlecol={queryCommandState:function(){var b=a(this).table;return b?b.rows[b.rows.length-1].getElementsByTagName("th").length?0:-1:-1},execCommand:function(){var b=a(this).table;if(b)for(var c=0;c<b.rows.length;c++)g.remove(b.rows[c].children[0]);f(b,this);b=b.getElementsByTagName("td")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}};UE.commands.mergeright={queryCommandState:function(b){var c=a(this);b=c.table;c=c.cell;if(!b||!c)return-1;var d=e(b);if(d.selectedTds.length)return-1;var f=d.getCellInfo(c),g=f.colIndex+f.colSpan;if(g>=d.colsNum)return-1;d=d.indexTable[f.rowIndex][g];return(b=b.rows[d.rowIndex].cells[d.cellIndex])&&c.tagName==b.tagName?d.rowIndex==f.rowIndex&&d.rowSpan==f.rowSpan?0:-1:-1},execCommand:function(b){b=this.selection.getRange();var c=b.createBookmark(!0),d=a(this).cell;e(d).mergeRight(d);b.moveToBookmark(c).select()}};UE.commands.mergedown={queryCommandState:function(b){var c=a(this);b=c.table;c=c.cell;if(!b||!c)return-1;var d=e(b);if(d.selectedTds.length)return-1;var f=d.getCellInfo(c),g=f.rowIndex+f.rowSpan;if(g>=d.rowsNum)return-1;d=d.indexTable[g][f.colIndex];return(b=b.rows[d.rowIndex].cells[d.cellIndex])&&c.tagName==b.tagName?d.colIndex==f.colIndex&&d.colSpan==f.colSpan?0:-1:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this).cell;e(d).mergeDown(d);b.moveToBookmark(c).select()}};UE.commands.mergecells={queryCommandState:function(){return b.getUETableBySelected(this)?0:-1},execCommand:function(){var a=b.getUETableBySelected(this);if(a&&a.selectedTds.length){var c=a.selectedTds[0];a.mergeRange();a=this.selection.getRange();g.isEmptyBlock(c)?a.setStart(c,0).collapse(!0):a.selectNodeContents(c);a.select()}}};UE.commands.insertrow={queryCommandState:function(){var b=a(this),c=b.cell;return c&&("TD"==c.tagName||"TH"==c.tagName&&b.tr!==b.table.rows[0])&&e(b.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this),f=d.cell,d=d.table,g=e(d),q=g.getCellInfo(f);if(g.selectedTds.length)for(var q=g.cellsRange,u=0,n=q.endRowIndex-q.beginRowIndex+1;u<n;u++)g.insertRow(q.beginRowIndex,f);else g.insertRow(q.rowIndex,f);b.moveToBookmark(c).select();"enabled"===d.getAttribute("interlaced")&&this.fireEvent("interlacetable",d)}};UE.commands.insertrownext={queryCommandState:function(){var b=a(this),c=b.cell;return c&&"TD"==c.tagName&&e(b.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this),f=d.cell,d=d.table,g=e(d),q=g.getCellInfo(f);if(g.selectedTds.length)for(var q=g.cellsRange,u=0,n=q.endRowIndex-q.beginRowIndex+1;u<n;u++)g.insertRow(q.endRowIndex+1,f);else g.insertRow(q.rowIndex+q.rowSpan,f);b.moveToBookmark(c).select();"enabled"===d.getAttribute("interlaced")&&this.fireEvent("interlacetable",d)}};UE.commands.deleterow={queryCommandState:function(){return a(this).cell?0:-1},execCommand:function(){var b=a(this).cell,c=e(b),d=c.cellsRange,f=c.getCellInfo(b),m=c.getVSideCell(b),q=c.getVSideCell(b,!0),b=this.selection.getRange();if(n.isEmptyObject(d))c.deleteRow(f.rowIndex);else for(var u=d.beginRowIndex;u<d.endRowIndex+1;u++)c.deleteRow(d.beginRowIndex);u=c.table;u.getElementsByTagName("td").length?1==f.rowSpan||f.rowSpan==d.endRowIndex-d.beginRowIndex+1?(q||m)&&b.selectNodeContents(q||m).setCursor(!1,!0):(c=c.getCell(f.rowIndex,c.indexTable[f.rowIndex][f.colIndex].cellIndex))&&b.selectNodeContents(c).setCursor(!1,!0):(c=u.nextSibling,g.remove(u),c&&b.setStart(c,0).setCursor(!1,!0));"enabled"===u.getAttribute("interlaced")&&this.fireEvent("interlacetable",u)}};UE.commands.insertcol={queryCommandState:function(b){b=a(this);var c=b.cell;return c&&("TD"==c.tagName||"TH"==c.tagName&&c!==b.tr.cells[0])&&e(b.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(b){var c=this.selection.getRange(),d=c.createBookmark(!0);if(-1!=this.queryCommandState(b)){b=a(this).cell;var f=e(b),g=f.getCellInfo(b);if(f.selectedTds.length)for(var g=f.cellsRange,h=0,u=g.endColIndex-g.beginColIndex+1;h<u;h++)f.insertCol(g.beginColIndex,b);else f.insertCol(g.colIndex,b);c.moveToBookmark(d).select(!0)}}};UE.commands.insertcolnext={queryCommandState:function(){var b=a(this);return b.cell&&e(b.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this).cell,f=e(d),g=f.getCellInfo(d);if(f.selectedTds.length)for(var g=f.cellsRange,q=0,u=g.endColIndex-g.beginColIndex+1;q<u;q++)f.insertCol(g.endColIndex+1,d);else f.insertCol(g.colIndex+g.colSpan,d);b.moveToBookmark(c).select()}};UE.commands.deletecol={queryCommandState:function(){return a(this).cell?0:-1},execCommand:function(){var b=a(this).cell,c=e(b),d=c.cellsRange,f=c.getCellInfo(b),m=c.getHSideCell(b),q=c.getHSideCell(b,!0);if(n.isEmptyObject(d))c.deleteCol(f.colIndex);else for(f=d.beginColIndex;f<d.endColIndex+1;f++)c.deleteCol(d.beginColIndex);c=c.table;d=this.selection.getRange();c.getElementsByTagName("td").length?g.inDoc(b,this.document)?d.setStart(b,0).setCursor(!1,!0):q&&g.inDoc(q,this.document)?d.selectNodeContents(q).setCursor(!1,!0):m&&g.inDoc(m,this.document)&&d.selectNodeContents(m).setCursor(!0,!0):(b=c.nextSibling,g.remove(c),b&&d.setStart(b,0).setCursor(!1,!0))}};UE.commands.splittocells={queryCommandState:function(){var b=a(this),c=b.cell;return!c||0<e(b.table).selectedTds.length?-1:c&&(1<c.colSpan||1<c.rowSpan)?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this).cell;e(d).splitToCells(d);b.moveToBookmark(c).select()}};UE.commands.splittorows={queryCommandState:function(){var b=a(this),c=b.cell;return!c||0<e(b.table).selectedTds.length?-1:c&&1<c.rowSpan?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this).cell;e(d).splitToRows(d);b.moveToBookmark(c).select()}};UE.commands.splittocols={queryCommandState:function(){var b=a(this),c=b.cell;return!c||0<e(b.table).selectedTds.length?-1:c&&1<c.colSpan?0:-1},execCommand:function(){var b=this.selection.getRange(),c=b.createBookmark(!0),d=a(this).cell;e(d).splitToCols(d);b.moveToBookmark(c).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return a(this).table?0:-1},execCommand:function(b){var c=a(this).table;c&&("adaptbywindow"==b?f(c,this):(b=g.getElementsByTagName(c,"td th"),n.each(b,function(a){a.removeAttribute("width")}),c.removeAttribute("width")))}};UE.commands.averagedistributecol={queryCommandState:function(){var a=b.getUETableBySelected(this);return a?a.isFullRow()||a.isFullCol()?0:-1:-1},execCommand:function(a){function c(){var a=f.table,c=0,d=0,g=b.getDefaultValue(e,a);if(f.isFullRow())c=a.offsetWidth,d=f.colsNum;else for(var a=f.cellsRange.endColIndex,k,h=f.cellsRange.beginColIndex;h<=a;)k=f.selectedTds[h],c+=k.offsetWidth,h+=k.colSpan,d+=1;return Math.ceil(c/d)-2*g.tdBorder-2*g.tdPadding}function d(a){n.each(g.getElementsByTagName(f.table,"th"),function(a){a.setAttribute("width","")});var b=f.isFullRow()?g.getElementsByTagName(f.table,"td"):f.selectedTds;n.each(b,function(b){1==b.colSpan&&b.setAttribute("width",a)})}var e=this,f=b.getUETableBySelected(e);f&&f.selectedTds.length&&d(c())}};UE.commands.averagedistributerow={queryCommandState:function(){var a=b.getUETableBySelected(this);return!a||a.selectedTds&&/th/ig.test(a.selectedTds[0].tagName)?-1:a.isFullRow()||a.isFullCol()?0:-1},execCommand:function(a){function c(){var a,c=0;a=f.table;var d=b.getDefaultValue(e,a),k=parseInt(g.getComputedStyle(a.getElementsByTagName("td")[0],"padding-top"));if(f.isFullCol()){var c=g.getElementsByTagName(a,"caption"),h=g.getElementsByTagName(a,"th"),l,m;0<c.length&&(l=c[0].offsetHeight);0<h.length&&(m=h[0].offsetHeight);c=a.offsetHeight-(l||0)-(m||0);a=0==h.length?f.rowsNum:f.rowsNum-1}else{m=f.cellsRange.beginRowIndex;h=f.cellsRange.endRowIndex;l=0;for(a=g.getElementsByTagName(a,"tr");m<=h;m++)c+=a[m].offsetHeight,l+=1;a=l}return r.ie&&9>r.version?Math.ceil(c/a):Math.ceil(c/a)-2*d.tdBorder-2*k}function d(a){var b=f.isFullCol()?g.getElementsByTagName(f.table,"td"):f.selectedTds;n.each(b,function(b){1==b.rowSpan&&b.setAttribute("height",a)})}var e=this,f=b.getUETableBySelected(e);f&&f.selectedTds.length&&d(c())}};UE.commands.cellalignment={queryCommandState:function(){return a(this).table?0:-1},execCommand:function(a,c){var d=b.getUETableBySelected(this);d?n.each(d.selectedTds,function(a){g.setAttributes(a,c)}):(d=(d=this.selection.getStart())&&g.findParentByTagName(d,["td","th","caption"],!0),/caption/ig.test(d.tagName)?(d.style.textAlign=c.align,d.style.verticalAlign=c.vAlign):g.setAttributes(d,c),this.selection.getRange().setCursor(!0))},queryCommandValue:function(b){(b=a(this).cell)||(b=c(this)[0]);if(b){var d=UE.UETable.getUETable(b).selectedTds;!d.length&&(d=b);return UE.UETable.getTableCellAlignState(d)}return null}};UE.commands.tablealignment={queryCommandState:function(){return r.ie&&8>r.version?-1:a(this).table?0:-1},execCommand:function(a,b){var c=this.selection.getStart();(c=c&&g.findParentByTagName(c,["table"],!0))&&c.setAttribute("align",b)}};UE.commands.edittable={queryCommandState:function(){return a(this).table?0:-1},execCommand:function(a,b){var c=this.selection.getRange();if(c=g.findParentByTagName(c.startContainer,"table"))c=g.getElementsByTagName(c,"td").concat(g.getElementsByTagName(c,"th"),g.getElementsByTagName(c,"caption")),n.each(c,function(a){a.style.borderColor=b})}};UE.commands.edittd={queryCommandState:function(){return a(this).table?0:-1},execCommand:function(a,c){var d=b.getUETableBySelected(this);if(d)n.each(d.selectedTds,function(a){a.style.backgroundColor=c});else if(d=(d=this.selection.getStart())&&g.findParentByTagName(d,["td","th","caption"],!0))d.style.backgroundColor=c}};UE.commands.settablebackground={queryCommandState:function(){return 1<c(this).length?0:-1},execCommand:function(a,b){var d;d=c(this);e(d[0]).setBackground(d,b)}};UE.commands.cleartablebackground={queryCommandState:function(){var a=c(this);if(!a.length)return-1;for(var b=0,d;d=a[b++];)if(""!==d.style.backgroundColor)return 0;return-1},execCommand:function(){var a=c(this);e(a[0]).removeBackground(a)}};UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(b){var c=a(this).table;if(!c)return-1;c=c.getAttribute("interlaced");return"interlacetable"==b?"enabled"===c?-1:0:c&&"disabled"!==c?0:-1},execCommand:function(b,c){var d=a(this).table;"interlacetable"==b?(d.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",d,c)):(d.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",d))}};UE.commands.setbordervisible={queryCommandState:function(b){return a(this).table?0:-1},execCommand:function(){var b=a(this).table;n.each(g.getElementsByTagName(b,"td"),function(a){a.style.borderWidth="1px";a.style.borderStyle="solid"})}}})();UE.plugins.table=function(){function f(a,b){d(a,"width",!0);d(a,"height",!0)}function d(a,b,c){a.style[b]&&(c&&a.setAttribute(b,parseInt(a.style[b],10)),a.style[b]="")}function c(a){if("TD"==a.tagName||"TH"==a.tagName)return a;var b;return(b=g.findParentByTagName(a,"td",!0)||g.findParentByTagName(a,"th",!0))?b:null}function b(a){var b=new RegExp(g.fillChar,"g");if(0<a[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(b,"").length)return 0;for(var c in w.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1}function a(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+x.document.body.scrollLeft-x.document.body.clientLeft,y:a.clientY+x.document.body.scrollTop-x.document.body.clientTop}}function e(b){if(!da())try{var d=c(b.target||b.srcElement),e;ba&&(x.body.style.webkitUserSelect="none",10<Math.abs(ea.x-b.clientX)||10<Math.abs(ea.y-b.clientY))&&(t(),ba=!1,R=0,F(b));if(U&&S)if(R=0,x.body.style.webkitUserSelect="none",x.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),e=a(b),p(x,!0,U,e,d),"h"==U){var f=T.style,l;var d=S,q=M(d);if(q){var u=q.getSameEndPosCells(d,"x")[0],n=q.getSameStartPosXCells(d)[0],y=a(b).x,z=(u?g.getXY(u).x:g.getXY(q.table).x)+20,v=n?g.getXY(n).x+n.offsetWidth-20:x.body.offsetWidth+5||parseInt(g.getComputedStyle(x.body,"width"),10),z=z+5,v=v-5;l=y<z?z:y>v?v:y}else l=void 0;f.left=l+"px"}else{if("v"==U){var C=T.style,ia;a:{try{var E=g.getXY(S).y,w=a(b).y;ia=w<E?E:w;break a}catch(oa){}ia=void 0}C.top=ia+"px"}}else if(d){if(!0!==x.fireEvent("excludetable",d)){e=a(b);var A=m(d,e),H=g.findParentByTagName(d,"table",!0);k(H,d,b,!0)?!0!==x.fireEvent("excludetable",H)&&(x.body.style.cursor="url("+x.options.cursorpath+"h.png),pointer"):k(H,d,b)?!0!==x.fireEvent("excludetable",H)&&(x.body.style.cursor="url("+x.options.cursorpath+"v.png),pointer"):(x.body.style.cursor="text",/\d/.test(A)&&(A=A.replace(/\d/,""),d=M(d).getPreviewCell(d,"v"==A)),p(x,d?!!A:!1,d?A:"",e,d))}}else h(!1,H,x)}catch(oa){}}function h(a,b,c){a?l(b,c):fa||setTimeout(function(){!fa&&I&&I.parentNode&&I.parentNode.removeChild(I)},2E3)}function l(a,b){function c(c,d){clearTimeout(f);f=setTimeout(function(){b.fireEvent("tableClicked",a,d)},300)}var d=g.getXY(a),e=a.ownerDocument;if(I&&I.parentNode)return I;I=e.createElement("div");I.contentEditable=!1;I.innerHTML="";I.style.cssText="width:15px;height:15px;background-image:url("+b.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(d.y-15)+"px;left:"+d.x+"px;";g.unSelectable(I);I.onmouseover=function(a){fa=!0};I.onmouseout=function(a){fa=!1};g.on(I,"click",function(a,b){c(b,this)});g.on(I,"dblclick",function(c,d){clearTimeout(f);var e=M(a),g=a.rows[0].cells[0],k=e.getLastCell(),k=e.getCellsRange(g,k);b.selection.getRange().setStart(g,0).setCursor(!1,!0);e.setSelected(k)});g.on(I,"dragstart",function(a,b){g.preventDefault(b)});var f;e.body.appendChild(I)}function k(b,c,d,e){d=a(d);c=m(c,d);return e?(e=(e=b.getElementsByTagName("caption")[0])?e.offsetHeight:0,"v1"==c&&8>d.y-g.getXY(b).y-e):"h1"==c&&8>d.x-g.getXY(b).x}function p(a,b,c,d,e){try{a.body.style.cursor="h"==c?"col-resize":"v"==c?"row-resize":"text",r.ie&&(!c||Z||D.getUETableBySelected(a)?Y(a):(N(a,a.document),ka(c,e))),Q=b}catch(qa){}}function m(a,b){var c=g.getXY(a);return c?5>c.x+a.offsetWidth-b.x?"h":5>b.x-c.x?"h1":5>c.y+a.offsetHeight-b.y?"v":5>b.y-c.y?"v1":"":""}function q(a,b){if(!da())if(ea={x:b.clientX,y:b.clientY},2==b.button){var c=D.getUETableBySelected(x),d=!1;if(c){var e=W(x,b);n.each(c.selectedTds,function(a){a===e&&(d=!0)});d?(e=c.selectedTds[0],setTimeout(function(){x.selection.getRange().setStart(e,0).setCursor(!1,!0)},0)):(D.removeSelectedClass(g.getElementsByTagName(x.body,"th td")),c.clearSelected())}}else y(b)}function u(b){R=0;b=b||x.window.event;var d=c(b.target||b.srcElement);if(d){var e;if(e=m(d,a(b)))if(Y(x),"h1"==e&&(e="h",k(g.findParentByTagName(d,"table"),d,b)?x.execCommand("adaptbywindow"):(d=M(d).getPreviewCell(d))&&x.selection.getRange().selectNodeContents(d).setCursor(!0,!0)),"h"==e){b=M(d);var f=G(d,b.table,!0),f=v(f,"left");b.width=b.offsetWidth;var h=[],l=[];n.each(f,function(a){h.push(a.offsetWidth)});n.each(f,function(a){a.removeAttribute("width")});window.setTimeout(function(){var a=!0;n.each(f,function(b,c){var d=b.offsetWidth;if(d>h[c])return a=!1;l.push(d)});var b=a?l:h;n.each(f,function(a,c){a.width=b[c]-A()})},0)}}}function y(a){D.removeSelectedClass(g.getElementsByTagName(x.body,"td th"));n.each(x.document.getElementsByTagName("table"),function(a){a.ueTable=null});if(J=W(x,a)){var b=g.findParentByTagName(J,"table",!0);(ut=M(b))&&ut.clearSelected();Q?z(a):(x.document.body.style.webkitUserSelect="",Z=!0,x.addListener("mouseover",ca))}}function z(a){r.ie&&(a=E(a));t();ba=!0;ga=setTimeout(function(){F(a)},360)}function v(a,b){for(var c=[],d,e=0,f=a.length;e<f;e++)(d=a[e][b])&&c.push(d);return c}function t(){ga&&clearTimeout(ga);ga=null}function E(a){var b="pageX pageY clientX clientY srcElement target".split(" "),c={};if(a)for(var d=0,e,f;e=b[d];d++)(f=a[e])&&(c[e]=f);return c}function F(b){ba=!1;if(J=b.target||b.srcElement)b=m(J,a(b)),/\d/.test(b)&&(b=b.replace(/\d/,""),J=M(J).getPreviewCell(J,"v"==b)),Y(x),N(x,x.document),x.fireEvent("saveScene"),ka(b,J),Z=!0,U=b,S=J}function H(a,b){if(!da()){t();ba=!1;if(Q&&(R=++R%3,ea={x:b.clientX,y:b.clientY},setTimeout(function(){0<R&&R--},360),2===R)){R=0;u(b);return}if(2!=b.button){var c=this.selection.getRange(),d=g.findParentByTagName(c.startContainer,"table",!0),e=g.findParentByTagName(c.endContainer,"table",!0);if(d||e)d===e?(d=g.findParentByTagName(c.startContainer,["td","th","caption"],!0),e=g.findParentByTagName(c.endContainer,["td","th","caption"],!0),d!==e&&this.selection.clearRange()):this.selection.clearRange();Z=!1;this.document.body.style.webkitUserSelect="";if(U&&S&&(this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),R=0,T=this.document.getElementById("ue_tableDragLine"))){c=g.getXY(S);d=g.getXY(T);switch(U){case "h":ma(S,d.x-c.x);break;case "v":L(S,d.y-c.y-S.offsetHeight)}U="";S=null;Y(this);this.fireEvent("saveScene");return}if(J)(d=(c=M(J))?c.selectedTds[0]:null)?(c=new K.Range(this.document),g.isEmptyBlock(d)?c.setStart(d,0).setCursor(!1,!0):c.selectNodeContents(d).shrinkBoundary().setCursor(!1,!0)):(c=this.selection.getRange().shrinkBoundary(),c.collapsed||(d=g.findParentByTagName(c.startContainer,["td","th"],!0),e=g.findParentByTagName(c.endContainer,["td","th"],!0),(d&&!e||!d&&e||d&&e&&d!==e)&&c.setCursor(!1,!0))),J=null,this.removeListener("mouseover",ca);else if((d=g.findParentByTagName(b.target||b.srcElement,"td",!0))||(d=g.findParentByTagName(b.target||b.srcElement,"th",!0)),d&&("TD"==d.tagName||"TH"==d.tagName)){if(!0===this.fireEvent("excludetable",d))return;c=new K.Range(this.document);c.setStart(d,0).setCursor(!1,!0)}this._selectionChange(250,b)}}}function ca(a,b){if(!da()){var c=b.target||b.srcElement;V=g.findParentByTagName(c,"td",!0)||g.findParentByTagName(c,"th",!0);if(J&&V&&("TD"==J.tagName&&"TD"==V.tagName||"TH"==J.tagName&&"TH"==V.tagName)&&g.findParentByTagName(J,"table")==g.findParentByTagName(V,"table"))if(c=M(V),J!=V){this.document.body.style.webkitUserSelect="none";this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"]();var d=c.getCellsRange(J,V);c.setSelected(d)}else this.document.body.style.webkitUserSelect="",c.clearSelected();b.preventDefault?b.preventDefault():b.returnValue=!1}}function ma(a,b){var c=M(a);if(c){var c=c.table,d=G(a,c);c.style.width="";c.removeAttribute("width");b=O(b,a,d);a.nextSibling?n.each(d,function(a){a.left.width=+a.left.width+b;a.right&&(a.right.width=+a.right.width-b)}):n.each(d,function(a){a.left.width-=-b})}}function da(){return"false"===x.body.contentEditable}function L(a,b){if(!(10>Math.abs(b))){var c=M(a);if(c)for(var c=c.getSameEndPosCells(a,"y"),d=c[0]?c[0].offsetHeight:0,e=0,f;f=c[e++];){var k=b,h=d,l=parseInt(g.getComputedStyle(f,"line-height"),10),k=h+k;f.style.height&&(f.style.height="");1==f.rowSpan?f.setAttribute("height",k<l?l:k):f.removeAttribute&&f.removeAttribute("height")}}}function G(a,b,c){b||(b=g.findParentByTagName(a,"table"));if(!b)return null;g.getNodeIndex(a);b=b.rows;for(var d=0;a;)1===a.nodeType&&(d+=a.colSpan||1),a=a.previousSibling;a=null;var e=[];n.each(b,function(a){var b=0;n.each(a.cells,function(a){b+=a.colSpan||1;if(b===d)return e.push({left:a,right:a.nextSibling||null}),!1;if(b>d)return c&&e.push({left:a}),!1})});return e}function O(a,b,c){a-=A();if(0>a)return 0;a-=B(b);var d=0>a?"left":"right";a=Math.abs(a);n.each(c,function(b){(b=b[d])&&(a=Math.min(a,B(b)-5))});a=0>a?0:a;return"left"===d?-a:a}function B(a){var b;b=a.offsetWidth-A();if(!a.nextSibling){tab=g.findParentByTagName(a,"table",!1);if(void 0===tab.offsetVal){var c=a.previousSibling;tab.offsetVal=c?a.offsetWidth-c.offsetWidth===D.borderWidth?D.borderWidth:0:0}b-=tab.offsetVal}b=0>b?0:b;try{a.width=b}catch(pa){}return b}function A(){if(void 0===D.tabcellSpace){var a=x.document.createElement("table"),b=x.document.createElement("tbody"),c=x.document.createElement("tr"),d=x.document.createElement("td"),e=null;d.style.cssText="border: 0;";d.width=1;c.appendChild(d);c.appendChild(e=d.cloneNode(!1));b.appendChild(c);a.appendChild(b);a.style.cssText="visibility: hidden;";x.body.appendChild(a);D.paddingSpace=d.offsetWidth-1;b=a.offsetWidth;d.style.cssText="";e.style.cssText="";D.borderWidth=(a.offsetWidth-b)/3;D.tabcellSpace=D.paddingSpace+D.borderWidth;x.body.removeChild(a)}A=function(){return D.tabcellSpace};return D.tabcellSpace}function N(a,b){Z||(T=a.document.createElement("div"),g.setAttributes(T,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity\x3d0)"}),a.body.appendChild(T))}function Y(a){if(!Z)for(var b;b=a.document.getElementById("ue_tableDragLine");)g.remove(b)}function ka(a,b){if(b){var c=g.findParentByTagName(b,"table"),d=c.getElementsByTagName("caption"),e=c.offsetWidth,f=c.offsetHeight-(0<d.length?d[0].offsetHeight:0),c=g.getXY(c),k=g.getXY(b);switch(a){case "h":d="height:"+f+"px;top:"+(c.y+(0<d.length?d[0].offsetHeight:0))+"px;left:"+(k.x+b.offsetWidth);T.style.cssText=d+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity\x3d30)";break;case "v":d="width:"+e+"px;left:"+c.x+"px;top:"+(k.y+b.offsetHeight),T.style.cssText=d+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity\x3d20)"}}}function P(a,b){for(var c=g.getElementsByTagName(a.body,"table"),d,e=0,f;f=c[e++];)d=g.getElementsByTagName(f,"td"),d[0]&&(b?(d=d[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/ig.test(d)&&g.addClass(f,"noBorderTable")):g.removeClasses(f,"noBorderTable"))}function X(a,b,c){var d=a.body;return d.offsetWidth-(b?2*parseInt(g.getComputedStyle(d,"margin-left"),10):0)-2*c.tableBorder-(a.options.offsetWidth||0)}function W(b,c){var d=g.findParentByTagName(c.target||c.srcElement,["td","th"],!0),e;if(!d)return null;e=m(d,a(c));if(!d)return null;if("h1"===e&&d.previousSibling){e=g.getXY(d);var f=d.offsetWidth;Math.abs(e.x+f-c.clientX)>f/3&&(d=d.previousSibling)}else"v1"===e&&d.parentNode.previousSibling&&(e=g.getXY(d),f=d.offsetHeight,Math.abs(e.y+f-c.clientY)>f/3&&(d=d.parentNode.previousSibling.firstChild));return d&&!0!==b.fireEvent("excludetable",d)?d:null}var x=this,ga=null,ba=!1,R=0,ea=null,D=UE.UETable,M=function(a){return D.getUETable(a)};x.ready(function(){var a=this,b=a.selection.getText;a.selection.getText=function(){var c=D.getUETableBySelected(a);if(c){var d="";n.each(c.selectedTds,function(a){d+=a[r.ie?"innerText":"textContent"]});return d}return b.call(a.selection)}});var J=null,V=null,U="",Q=!1,I=null,fa=!1,T=null,S=null,Z=!1;x.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:x.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});x.getUETable=M;var aa={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};x.ready(function(){n.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",x.document);var a,d,l;x.addListener("keydown",function(c,e){var f=e.keyCode||e.which;if(8==f){var k=D.getUETableBySelected(this);k&&k.selectedTds.length&&(k.isFullCol()?this.execCommand("deletecol"):k.isFullRow()?this.execCommand("deleterow"):this.fireEvent("delcells"),g.preventDefault(e));var h=g.findParentByTagName(this.selection.getStart(),"caption",!0),m=this.selection.getRange();m.collapsed&&h&&b(h)&&(this.fireEvent("saveScene"),k=h.parentNode,g.remove(h),k&&m.setStart(k.rows[0].cells[0],0).setCursor(!1,!0),this.fireEvent("saveScene"))}if(46==f&&(k=D.getUETableBySelected(this))){this.fireEvent("saveScene");for(h=0;m=k.selectedTds[h++];)g.fillNode(this.document,m);this.fireEvent("saveScene");g.preventDefault(e)}if(13==f){f=this.selection.getRange();if(h=g.findParentByTagName(f.startContainer,"caption",!0)){k=g.findParentByTagName(h,"table");f.collapsed?h&&f.setStart(k.rows[0].cells[0],0).setCursor(!1,!0):(f.deleteContents(),this.fireEvent("saveScene"));g.preventDefault(e);return}f.collapsed&&(k=g.findParentByTagName(f.startContainer,"table"))&&(m=k.rows[0].cells[0],h=g.findParentByTagName(this.selection.getStart(),["td","th"],!0),k=k.previousSibling,m===h&&(!k||1==k.nodeType&&"TABLE"==k.tagName)&&g.isStartInblock(f)&&(f=g.findParent(this.selection.getStart(),function(a){return g.isBlockElm(a)},!0))&&(/t(h|d)/i.test(f.tagName)||f===h.firstChild)&&(this.execCommand("insertparagraphbeforetable"),g.preventDefault(e)))}if((e.ctrlKey||e.metaKey)&&"67"==e.keyCode&&(a=null,k=D.getUETableBySelected(this)))for(f=k.selectedTds,d=k.isFullCol(),l=k.isFullRow(),a=[[k.cloneCell(f[0],null,!0)]],h=1;m=f[h];h++)m.parentNode!==f[h-1].parentNode?a.push([k.cloneCell(m,null,!0)]):a[a.length-1].push(k.cloneCell(m,null,!0))});x.addListener("tablehasdeleted",function(){p(this,!1,"",null);I&&g.remove(I)});x.addListener("beforepaste",function(c,e){var k=this,h=k.selection.getRange();if(g.findParentByTagName(h.startContainer,"caption",!0))h=k.document.createElement("div"),h.innerHTML=e.html,e.html=h[r.ie9below?"innerText":"textContent"];else{var m=D.getUETableBySelected(k);if(a){k.fireEvent("saveScene");var h=k.selection.getRange(),p=g.findParentByTagName(h.startContainer,["td","th"],!0),q,u;if(p){m=M(p);if(l){var y=m.getCellInfo(p).rowIndex;"TH"==p.tagName&&y++;for(var h=0,z;z=a[h++];){u=m.insertRow(y++,"td");for(var v=0,t;t=z[v];v++)(p=u.cells[v])||(p=u.insertCell(v)),p.innerHTML=t.innerHTML,t.getAttribute("width")&&p.setAttribute("width",t.getAttribute("width")),t.getAttribute("vAlign")&&p.setAttribute("vAlign",t.getAttribute("vAlign")),t.getAttribute("align")&&p.setAttribute("align",t.getAttribute("align")),t.style.cssText&&(p.style.cssText=t.style.cssText);for(v=0;(t=u.cells[v])&&z[v];v++)t.innerHTML=z[v].innerHTML,z[v].getAttribute("width")&&t.setAttribute("width",z[v].getAttribute("width")),z[v].getAttribute("vAlign")&&t.setAttribute("vAlign",z[v].getAttribute("vAlign")),z[v].getAttribute("align")&&t.setAttribute("align",z[v].getAttribute("align")),z[v].style.cssText&&(t.style.cssText=z[v].style.cssText)}}else{if(d){y=m.getCellInfo(p);v=p=0;for(z=a[0];t=z[v++];)p+=t.colSpan||1;k.__hasEnterExecCommand=!0;for(h=0;h<p;h++)k.execCommand("insertcol");k.__hasEnterExecCommand=!1;p=m.table.rows[0].cells[y.cellIndex];"TH"==p.tagName&&(p=m.table.rows[1].cells[y.cellIndex])}for(h=0;z=a[h++];){q=p;for(v=0;t=z[v++];)p?(p.innerHTML=t.innerHTML,t.getAttribute("width")&&p.setAttribute("width",t.getAttribute("width")),t.getAttribute("vAlign")&&p.setAttribute("vAlign",t.getAttribute("vAlign")),t.getAttribute("align")&&p.setAttribute("align",t.getAttribute("align")),t.style.cssText&&(p.style.cssText=t.style.cssText),u=p,p=p.nextSibling):(y=t.cloneNode(!0),g.removeAttributes(y,["class","rowSpan","colSpan"]),u.parentNode.appendChild(y));p=m.getNextCell(q,!0,!0);if(!a[h])break;p||(y=m.getCellInfo(q),m.table.insertRow(m.table.rows.length),m.update(),p=m.getVSideCell(q,!0))}}m.update()}else{m=k.document.createElement("table");for(h=0;z=a[h++];){u=m.insertRow(m.rows.length);for(v=0;t=z[v++];)y=D.cloneCell(t,null,!0),g.removeAttributes(y,["class"]),u.appendChild(y);2==v&&1<y.rowSpan&&(y.rowSpan=1)}h=D.getDefaultValue(k,void 0);h=k.body.offsetWidth-2*parseInt(g.getComputedStyle(k.body,"margin-left"),10)-2*h.tableBorder-(k.options.offsetWidth||0);k.execCommand("insertHTML","\x3ctable  "+(d&&l?'width\x3d"'+h+'"':"")+"\x3e"+m.innerHTML.replace(/>\s*</g,"\x3e\x3c").replace(/\bth\b/gi,"td")+"\x3c/table\x3e")}k.fireEvent("contentchange");k.fireEvent("saveScene");e.html="";return!0}h=k.document.createElement("div");h.innerHTML=e.html;z=h.getElementsByTagName("table");g.findParentByTagName(k.selection.getStart(),"table")?(n.each(z,function(a){g.remove(a)}),g.findParentByTagName(k.selection.getStart(),"caption",!0)&&(h.innerHTML=h[r.ie?"innerText":"textContent"])):n.each(z,function(a){f(a,!0);g.removeAttributes(a,["style","border"]);n.each(g.getElementsByTagName(a,"td"),function(a){b(a)&&g.fillNode(k.document,a);f(a,!0)})});e.html=h.innerHTML}});x.addListener("afterpaste",function(){n.each(g.getElementsByTagName(x.body,"table"),function(a){if(a.offsetWidth>x.body.offsetWidth){var b=D.getDefaultValue(x,a);a.style.width=x.body.offsetWidth-2*parseInt(g.getComputedStyle(x.body,"margin-left"),10)-2*b.tableBorder-(x.options.offsetWidth||0)+"px"}})});x.addListener("blur",function(){a=null});var m;x.addListener("keydown",function(){clearTimeout(m);m=setTimeout(function(){var a=x.selection.getRange();if(a=g.findParentByTagName(a.startContainer,["th","td"],!0)){var b=a.parentNode.parentNode.parentNode;b.offsetWidth>b.getAttribute("width")&&(a.style.wordBreak="break-all")}},100)});x.addListener("selectionchange",function(){p(x,!1,"",null)});x.addListener("contentchange",function(){var a=this;Y(a);if(!D.getUETableBySelected(a)){var b=a.selection.getRange().startContainer,b=g.findParentByTagName(b,["td","th"],!0);n.each(g.getElementsByTagName(a.document,"table"),function(b){!0!==a.fireEvent("excludetable",b)&&(b.ueTable=new D(b),b.onmouseover=function(){a.fireEvent("tablemouseover",b)},b.onmousemove=function(){a.fireEvent("tablemousemove",b);a.options.tableDragable&&h(!0,this,a);n.defer(function(){a.fireEvent("contentchange",50)},!0)},b.onmouseout=function(){a.fireEvent("tablemouseout",b);p(a,!1,"",null);Y(a)},b.onclick=function(b){b=a.window.event||b;var d=c(b.target||b.srcElement);if(d){var e=M(d),f=e.table,g=e.getCellInfo(d),h=a.selection.getRange();k(f,d,b,!0)?(f=e.getCell(e.indexTable[e.rowsNum-1][g.colIndex].rowIndex,e.indexTable[e.rowsNum-1][g.colIndex].cellIndex),b.shiftKey&&e.selectedTds.length?e.selectedTds[0]!==f?(b=e.getCellsRange(e.selectedTds[0],f),e.setSelected(b)):h&&h.selectNodeContents(f).select():d!==f?(b=e.getCellsRange(d,f),e.setSelected(b)):h&&h.selectNodeContents(f).select()):k(f,d,b)&&(f=e.getCell(e.indexTable[g.rowIndex][e.colsNum-1].rowIndex,e.indexTable[g.rowIndex][e.colsNum-1].cellIndex),b.shiftKey&&e.selectedTds.length?e.selectedTds[0]!==f?(b=e.getCellsRange(e.selectedTds[0],f),e.setSelected(b)):h&&h.selectNodeContents(f).select():d!==f?(b=e.getCellsRange(d,f),e.setSelected(b)):h&&h.selectNodeContents(f).select())}})});P(a,!0)}});g.on(x.document,"mousemove",e);g.on(x.document,"mouseout",function(a){"TABLE"==(a.target||a.srcElement).tagName&&p(x,!1,"",null)});x.addListener("interlacetable",function(a,b,c){if(b){a=b.rows;b=a.length;for(var d=0;d<b;d++){var e=c||this.options.classList;a[d].className=e[d]?e[d]:e[d%e.length]}}});x.addListener("uninterlacetable",function(a,b){if(b)for(var c=b.rows,d=this.options.classList,e=c.length,f=0;f<e;f++)g.removeClasses(c[f],d)});x.addListener("mousedown",q);x.addListener("mouseup",H);g.on(x.body,"dragstart",function(a){H.call(x,"dragstart",a)});x.addOutputRule(function(a){n.each(a.getNodesByTagName("div"),function(a){"ue_tableDragLine"==a.getAttr("id")&&a.parentNode.removeChild(a)})});var u=0;x.addListener("mousedown",function(){u=0});x.addListener("tabkeydown",function(){var a=this.selection.getRange(),c=a.getCommonAncestor(!0,!0),d=g.findParentByTagName(c,"table");if(d){if(g.findParentByTagName(c,"caption",!0))(c=g.getElementsByTagName(d,"th td"))&&c.length&&a.setStart(c[0],0).setCursor(!1,!0);else{var c=g.findParentByTagName(c,["td","th"],!0),e=M(c);u=1<c.rowSpan?u:e.getCellInfo(c).rowIndex;(c=e.getTabNextCell(c,u))?b(c)?a.setStart(c,0).setCursor(!1,!0):a.selectNodeContents(c).select():(x.fireEvent("saveScene"),x.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),x.__hasEnterExecCommand=!1,a=this.selection.getRange(),a.setStart(d.rows[d.rows.length-1].cells[0],0).setCursor(),x.fireEvent("saveScene"))}return!0}});r.ie&&x.addListener("selectionchange",function(){p(this,!1,"",null)});x.addListener("keydown",function(a,b){var c=b.keyCode||b.which;if(8!=c&&46!=c){(c=!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&!b.altKey)&&D.removeSelectedClass(g.getElementsByTagName(this.body,"td"));var d=D.getUETableBySelected(this);d&&c&&d.clearSelected()}});x.addListener("beforegetcontent",function(){P(this,!1);r.ie&&n.each(this.document.getElementsByTagName("caption"),function(a){g.isEmptyNode(a)&&(a.innerHTML="\x26nbsp;")})});x.addListener("aftergetcontent",function(){P(this,!0)});x.addListener("getAllHtml",function(){D.removeSelectedClass(x.document.getElementsByTagName("td"))});x.addListener("fullscreenchanged",function(a,b){if(!b){var c=this.body.offsetWidth/document.body.offsetWidth,d=g.getElementsByTagName(this.body,"table");n.each(d,function(a){if(a.offsetWidth<x.body.offsetWidth)return!1;var b=g.getElementsByTagName(a,"td"),d=[];n.each(b,function(a){d.push(a.offsetWidth)});for(var e=0,f;f=b[e];e++)f.setAttribute("width",Math.floor(d[e]*c));a.setAttribute("width",Math.floor(X(x,!0,D.getDefaultValue(x,void 0))))})}});var y=x.execCommand;x.execCommand=function(a,c){a=a.toLowerCase();var d=D.getUETableBySelected(this),e=new K.Range(this.document),f=this.commands[a]||UE.commands[a],k;if(f){if(!d||aa[a]||f.notNeedUndo||this.__hasEnterExecCommand)k=y.apply(this,arguments);else{this.__hasEnterExecCommand=!0;this.fireEvent("beforeexeccommand",a);for(var d=d.selectedTds,h=f=-2,l,m,p=0,q;q=d[p];p++)if(b(q)?e.setStart(q,0).setCursor(!1,!0):e.selectNode(q).select(!0),m=this.queryCommandState(a),l=this.queryCommandValue(a),-1!=m){if(f!==m||h!==l)this._ignoreContentChange=!0,k=y.apply(this,arguments),this._ignoreContentChange=!1;f=this.queryCommandState(a);h=this.queryCommandValue(a);g.isEmptyBlock(q)&&g.fillNode(this.document,q)}e.setStart(d[0],0).shrinkBoundary(!0).setCursor(!1,!0);this.fireEvent("contentchange");this.fireEvent("afterexeccommand",a);this.__hasEnterExecCommand=!1;this._selectionChange()}return k}}})};UE.UETable.prototype.sortTable=function(f,d){var c=this.table,b=c.rows,a=[],e="TH"===b[0].cells[0].tagName,g=0;if(this.selectedTds.length){for(var l=this.cellsRange,k=l.endRowIndex+1,p=l.beginRowIndex;p<k;p++)a[p]=b[p];a.splice(0,l.beginRowIndex);g=l.endRowIndex+1===this.rowsNum?0:l.endRowIndex+1}else for(p=0,k=b.length;p<k;p++)a[p]=b[p];var m={reversecurrent:function(a,b){return 1},orderbyasc:function(a,b){return(a.innerText||a.textContent).localeCompare(b.innerText||b.textContent)},reversebyasc:function(a,b){return b.innerHTML.localeCompare(a.innerHTML)},orderbynum:function(a,b){var c=a[r.ie?"innerText":"textContent"].match(/\d+/),d=b[r.ie?"innerText":"textContent"].match(/\d+/);c&&(c=+c[0]);d&&(d=+d[0]);return(c||0)-(d||0)},reversebynum:function(a,b){var c=a[r.ie?"innerText":"textContent"].match(/\d+/),d=b[r.ie?"innerText":"textContent"].match(/\d+/);c&&(c=+c[0]);d&&(d=+d[0]);return(d||0)-(c||0)}};c.setAttribute("data-sort-type",d&&"string"===typeof d&&m[d]?d:"");e&&a.splice(0,1);a=n.sort(a,function(a,b){return d&&"function"===typeof d?d.call(this,a.cells[f],b.cells[f]):d&&"number"===typeof d?1:d&&"string"===typeof d&&m[d]?m[d].call(this,a.cells[f],b.cells[f]):m.orderbyasc.call(this,a.cells[f],b.cells[f])});e=c.ownerDocument.createDocumentFragment();p=0;for(k=a.length;p<k;p++)e.appendChild(a[p]);c=c.getElementsByTagName("tbody")[0];g?c.insertBefore(e,b[g-l.endRowIndex+l.beginRowIndex-1]):c.appendChild(e)};UE.plugins.tablesort=function(){var f=this,d=UE.UETable;f.ready(function(){n.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+f.options.themePath+f.options.theme+"/images/sortable.png);}",f.document);f.addListener("afterexeccommand",function(c,b){"mergeright"!=b&&"mergedown"!=b&&"mergecells"!=b||this.execCommand("disablesort")})});UE.commands.sorttable={queryCommandState:function(){var c=d.getTableItemsByRange(this);if(!c.cell)return-1;for(var c=c.table.getElementsByTagName("td"),b=0,a;a=c[b++];)if(1!=a.rowSpan||1!=a.colSpan)return-1;return 0},execCommand:function(c,b){var a=this.selection.getRange(),e=a.createBookmark(!0),f=d.getTableItemsByRange(this),g=f.cell,f=d.getUETable(f.table),g=f.getCellInfo(g);f.sortTable(g.cellIndex,b);a.moveToBookmark(e);try{a.select()}catch(k){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(c){var b=d.getTableItemsByRange(this).table;if(b&&"enablesort"==c)for(var a=g.getElementsByTagName(b,"th td"),e=0;e<a.length;e++)if(1<a[e].getAttribute("colspan")||1<a[e].getAttribute("rowspan"))return-1;return b?"enablesort"==c^"sortEnabled"!=b.getAttribute("data-sort")?-1:0:-1},execCommand:function(c){var b=d.getTableItemsByRange(this).table;b.setAttribute("data-sort","enablesort"==c?"sortEnabled":"sortDisabled");"enablesort"==c?g.addClass(b,"sortEnabled"):g.removeClasses(b,"sortEnabled")}}};UE.plugins.contextmenu=function(){if("undefined"==typeof is_mobile_cms||1!=is_mobile_cms){var f=this;f.setOpt("enableContextMenu",!0);if(!1!==f.getOpt("enableContextMenu")){var d=f.getLang("contextMenu"),c,b=f.options.contextMenu||[{label:d.selectall,cmdName:"selectall"},{label:d.cleardoc,cmdName:"cleardoc",exec:function(){confirm(d.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:d.unlink,cmdName:"unlink"},"-",{group:d.paragraph,icon:"justifyjustify",subMenu:[{label:d.justifyleft,cmdName:"justify",value:"left"},{label:d.justifyright,cmdName:"justify",value:"right"},{label:d.justifycenter,cmdName:"justify",value:"center"},{label:d.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:d.table,icon:"table",subMenu:[{label:d.inserttable,cmdName:"inserttable"},{label:d.deletetable,cmdName:"deletetable"},"-",{label:d.deleterow,cmdName:"deleterow"},{label:d.deletecol,cmdName:"deletecol"},{label:d.insertcol,cmdName:"insertcol"},{label:d.insertcolnext,cmdName:"insertcolnext"},{label:d.insertrow,cmdName:"insertrow"},{label:d.insertrownext,cmdName:"insertrownext"},"-",{label:d.insertcaption,cmdName:"insertcaption"},{label:d.deletecaption,cmdName:"deletecaption"},{label:d.inserttitle,cmdName:"inserttitle"},{label:d.deletetitle,cmdName:"deletetitle"},{label:d.inserttitlecol,cmdName:"inserttitlecol"},{label:d.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:d.mergecells,cmdName:"mergecells"},{label:d.mergeright,cmdName:"mergeright"},{label:d.mergedown,cmdName:"mergedown"},"-",{label:d.splittorows,cmdName:"splittorows"},{label:d.splittocols,cmdName:"splittocols"},{label:d.splittocells,cmdName:"splittocells"},"-",{label:d.averageDiseRow,cmdName:"averagedistributerow"},{label:d.averageDisCol,cmdName:"averagedistributecol"},"-",{label:d.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this);this.getDialog("edittd").open()}},{label:d.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this);this.getDialog("edittable").open()}},{label:d.setbordervisible,cmdName:"setbordervisible"}]},{group:d.tablesort,icon:"tablesort",subMenu:[{label:d.enablesort,cmdName:"enablesort"},{label:d.disablesort,cmdName:"disablesort"},"-",{label:d.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:d.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:d.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:d.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:d.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:d.borderbk,icon:"borderBack",subMenu:[{label:d.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:d.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:d.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:d.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:d.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:d.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:d.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:d.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:d.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:d.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:d.tableright,value:"right"}]},"-",{label:d.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:d.insertparagraphafter,cmdName:"insertparagraph"},{label:d.copy,cmdName:"copy"},{label:d.paste,cmdName:"paste"}];if(b.length){var a=UE.ui.uiUtils;f.addListener("contextmenu",function(e,h){var l=a.getViewportOffsetByEvent(h);f.fireEvent("beforeselectionchange");c&&c.destroy();for(var k=0,p,m=[];p=b[k];k++){var q;(function(a){if("-"==a)(q=m[m.length-1])&&"-"!==q&&m.push("-");else if(a.hasOwnProperty("group")){for(var b=0,c,e=[];c=a.subMenu[b];b++)(function(a){"-"==a?(q=e[e.length-1])&&"-"!==q?e.push("-"):e.splice(e.length-1):(f.commands[a.cmdName]||UE.commands[a.cmdName]||a.query)&&-1<(a.query?a.query():f.queryCommandState(a.cmdName))&&e.push({label:a.label||f.getLang("contextMenu."+a.cmdName+(a.value||""))||"",className:"edui-for-"+a.cmdName+(a.className?" edui-for-"+a.cmdName+"-"+a.className:""),onclick:a.exec?function(){a.exec.call(f)}:function(){f.execCommand(a.cmdName,a.value)}})})(c);e.length&&m.push({label:function(){switch(a.icon){case "table":return f.getLang("contextMenu.table");case "justifyjustify":return f.getLang("contextMenu.paragraph");case "aligntd":return f.getLang("contextMenu.aligntd");case "aligntable":return f.getLang("contextMenu.aligntable");case "tablesort":return d.tablesort;case "borderBack":return d.borderbk;default:return""}}(),className:"edui-for-"+a.icon,subMenu:{items:e,editor:f}})}else(f.commands[a.cmdName]||UE.commands[a.cmdName]||a.query)&&-1<(a.query?a.query.call(f):f.queryCommandState(a.cmdName))&&m.push({label:a.label||f.getLang("contextMenu."+a.cmdName),className:"edui-for-"+(a.icon?a.icon:a.cmdName+(a.value||"")),onclick:a.exec?function(){a.exec.call(f)}:function(){f.execCommand(a.cmdName,a.value)}})})(p)}"-"==m[m.length-1]&&m.pop();c=new UE.ui.Menu({items:m,className:"edui-contextmenu",editor:f});c.render();c.showAt(l);f.fireEvent("aftershowcontextmenu",c);g.preventDefault(h);if(r.ie){var u;try{u=f.selection.getNative().createRange()}catch(y){return}u.item&&(new K.Range(f.document)).selectNode(u.item(0)).select(!0,!0)}});f.addListener("aftershowcontextmenu",function(a,b){})}}}};UE.plugins.shortcutmenu=function(){var f,d=this.options.shortcutMenu||[];d.length&&(this.addListener("contextmenu mouseup",function(c,b){var a=this,e={type:c,target:b.target||b.srcElement,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY};setTimeout(function(){if(!1===a.selection.getRange().collapsed||"contextmenu"==c)f||(f=new t.editor.ui.ShortCutMenu({editor:a,items:d,theme:a.options.theme,className:"edui-shortcutmenu"}),f.render(),a.fireEvent("afterrendershortcutmenu",f)),f.show(e,!!UE.plugins.contextmenu)});if("contextmenu"==c&&(g.preventDefault(b),r.ie9below)){var h;try{h=a.selection.getNative().createRange()}catch(l){return}h.item&&(new K.Range(a.document)).selectNode(h.item(0)).select(!0,!0)}}),this.addListener("keydown",function(c){"keydown"==c&&f&&!f.isHidden&&f.hide()}))};UE.plugins.basestyle=function(){var f={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},d=function(a,b){return g.filterNodeList(a.selection.getStartElementPath(),b)},c=this;c.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});c.addInputRule(function(a){n.each(a.getNodesByTagName("b i"),function(a){switch(a.tagName){case "b":a.tagName="strong";break;case "i":a.tagName="em"}})});for(var b in f)(function(a,b){c.commands[a]={execCommand:function(a){var e=c.selection.getRange(),f=d(this,b);if(e.collapsed){if(f)a=c.document.createTextNode(""),e.insertNode(a).removeInlineStyle(b),e.setStartBefore(a),g.remove(a);else{f=e.document.createElement(b[0]);if("superscript"==a||"subscript"==a)a=c.document.createTextNode(""),e.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(!0);e.insertNode(f).setStart(f,0)}e.collapse(!0)}else{if("superscript"==a||"subscript"==a)f&&f.tagName.toLowerCase()==a||e.removeInlineStyle(["sub","sup"]);f?e.removeInlineStyle(b):e.applyInlineStyle(b[0])}e.select()},queryCommandState:function(){return d(this,b)?1:0}}})(b,f[b])};UE.plugins.elementpath=function(){var f,d,c=this;c.setOpt("elementPathEnabled",!0);c.options.elementPathEnabled&&(c.commands.elementpath={execCommand:function(b,a){var e=d[a],g=c.selection.getRange();f=1*a;g.selectNode(e).select()},queryCommandValue:function(){var b=[].concat(this.selection.getStartElementPath()).reverse(),a=[];d=b;for(var c=0,g;g=b[c];c++)if(3!=g.nodeType){var l=g.tagName.toLowerCase();"img"==l&&g.getAttribute("anchorname")&&(l="anchor");a[c]=l;if(f==c){f=-1;break}}return a}})};UE.plugins.formatmatch=function(){function f(e,h){if(r.webkit)var l="IMG"==h.target.tagName?h.target:null;d.undoManger&&d.undoManger.save();var k=d.selection.getRange(),l=l||k.getClosedNode();if(b&&l&&"IMG"==l.tagName)l.style.cssText+=";float:"+(b.style.cssFloat||b.style.styleFloat||"none")+";display:"+(b.style.display||"inline"),b=null;else if(!b){if(k.collapsed){var p=d.document.createTextNode("match");k.insertNode(p).select()}d.__hasEnterExecCommand=!0;k=d.options.removeFormatAttributes;d.options.removeFormatAttributes="";d.execCommand("removeformat");d.options.removeFormatAttributes=k;d.__hasEnterExecCommand=!1;k=d.selection.getRange();c.length&&(l=k,p&&l.selectNode(p),l.applyInlineStyle(c[c.length-1].tagName,null,c));p&&k.setStartBefore(p).collapse(!0);k.select();p&&g.remove(p)}d.undoManger&&d.undoManger.save();d.removeListener("mouseup",f);a=0}var d=this,c=[],b,a=0;d.addListener("reset",function(){c=[];a=0});d.commands.formatmatch={execCommand:function(e){if(a)a=0,c=[],d.removeListener("mouseup",f);else{e=d.selection.getRange();b=e.getClosedNode();if(!b||"IMG"!=b.tagName){e.collapse(!0).shrinkBoundary();c=g.findParents(e.startContainer,!0,function(a){return!g.isBlockElm(a)&&1==a.nodeType});e=0;for(var h;h=c[e];e++)if("A"==h.tagName){c.splice(e,1);break}}d.addListener("mouseup",f);a=1}},queryCommandState:function(){return a},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){function f(a,b,c){var d=0;a=a.firstChild;for(var e;a;){if(3==a.nodeType){if(e=a.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,d+=e,d>=b)return{node:a,index:e-(d-b)}}else if(!w.$empty[a.tagName]&&(e=a[r.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,d+=e,d>=b&&(e=f(a,e-(d-b),c))))return e;a=g.getNextDomNode(a)}}function d(a,d){var e=a.selection.getRange(),l,k=d.searchStr,p=a.document.createElement("span");p.innerHTML="$$ueditor_searchreplace_key$$";e.shrinkBoundary(!0);if(!e.collapsed){e.select();var m=a.selection.getText();if((new RegExp("^"+d.searchStr+"$",d.casesensitive?"":"i")).test(m)){if(void 0!=d.replaceStr)return k=d.replaceStr,k=c.document.createTextNode(k),e.deleteContents().insertNode(k),e.select(),!0;e.collapse(-1==d.dir)}}e.insertNode(p);e.enlargeToBlockElm(!0);l=e.startContainer;m=l[r.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");e.setStartBefore(p);g.remove(p);a:{var p=l,q;l=d.all||1==d.dir?"getNextDomNode":"getPreDomNode";g.isBody(p)&&(p=p.firstChild);for(;p;){q=3==p.nodeType?p.nodeValue:p[r.ie?"innerText":"textContent"];b:{var u=d,n=m,z=u.searchStr;-1==u.dir&&(q=q.split("").reverse().join(""),z=z.split("").reverse().join(""),n=q.length-n);for(var z=new RegExp(z,"g"+(u.casesensitive?"":"i")),v;v=z.exec(q);)if(v.index>=n){q=-1==u.dir?q.length-v.index-u.searchStr.length:v.index;break b}q=-1}if(-1!=q){m={node:p,index:q};break a}for(p=g[l](p);p&&b[p.nodeName.toLowerCase()];)p=g[l](p,!0);p&&(m=-1==d.dir?(3==p.nodeType?p.nodeValue:p[r.ie?"innerText":"textContent"]).length:0)}m=void 0}if(m)return p=f(m.node,m.index,k),k=f(m.node,m.index+k.length,k),e.setStart(p.node,p.index).setEnd(k.node,k.index),void 0!==d.replaceStr&&(k=d.replaceStr,k=c.document.createTextNode(k),e.deleteContents().insertNode(k)),e.select(),!0;e.setCursor()}var c=this,b={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(a,b){n.extend(b,{all:!1,casesensitive:!1,dir:1},!0);var e=0;if(b.all){var f=c.selection.getRange(),g=c.body.firstChild;g&&1==g.nodeType?(f.setStart(g,0),f.shrinkBoundary(!0)):3==g.nodeType&&f.setStartBefore(g);f.collapse(!0).select(!0);for(void 0!==b.replaceStr&&c.fireEvent("saveScene");d(this,b);)e++}else void 0!==b.replaceStr&&c.fireEvent("saveScene"),d(this,b)&&e++;e&&c.fireEvent("saveScene");return e},notNeedUndo:1}}}});UE.plugins.customstyle=function(){var f=this;f.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});f.commands.customstyle={execCommand:function(d,c){var b=c.tag,a=g.findParent(this.selection.getStart(),function(a){return a.getAttribute("label")},!0),e,f,l={};for(e in c)void 0!==c[e]&&(l[e]=c[e]);delete l.tag;if(a&&a.getAttribute("label")==c.label){e=this.selection.getRange();f=e.createBookmark();if(e.collapsed)if(w.$block[a.tagName]){var k=this.document.createElement("p");g.moveChild(a,k);a.parentNode.insertBefore(k,a);g.remove(a)}else g.remove(a,!0);else{a=g.getCommonAncestor(f.start,f.end);l=g.getElementsByTagName(a,b);(new RegExp(b,"i")).test(a.tagName)&&l.push(a);for(var p=0,m;m=l[p++];)if(m.getAttribute("label")==c.label){var k=g.getPosition(m,f.start),q=g.getPosition(m,f.end);(k&g.POSITION_FOLLOWING||k&g.POSITION_CONTAINS)&&(q&g.POSITION_PRECEDING||q&g.POSITION_CONTAINS)&&w.$block[b]&&(k=this.document.createElement("p"),g.moveChild(m,k),m.parentNode.insertBefore(k,m));g.remove(m,!0)}(a=g.findParent(a,function(a){return a.getAttribute("label")==c.label},!0))&&g.remove(a,!0)}e.moveToBookmark(f).select()}else w.$block[b]?(this.execCommand("paragraph",b,l,"customstyle"),e=this.selection.getRange(),e.collapsed||(e.collapse(),a=g.findParent(this.selection.getStart(),function(a){return a.getAttribute("label")==c.label},!0),b=this.document.createElement("p"),g.insertAfter(a,b),g.fillNode(this.document,b),e.setStart(b,0).setCursor())):(e=this.selection.getRange(),e.collapsed?(a=this.document.createElement(b),g.setAttributes(a,l),e.insertNode(a).setStart(a,0).setCursor()):(f=e.createBookmark(),e.applyInlineStyle(b,l).moveToBookmark(f).select()))},queryCommandValue:function(){var d=g.filterNodeList(this.selection.getStartElementPath(),function(c){return c.getAttribute("label")});return d?d.getAttribute("label"):""}};f.addListener("keyup",function(d,c){var b=c.keyCode||c.which;if(32==b||13==b)if(b=f.selection.getRange(),b.collapsed){var a=g.findParent(f.selection.getStart(),function(a){return a.getAttribute("label")},!0);if(a&&w.$block[a.tagName]&&g.isEmptyNode(a)){var e=f.document.createElement("p");g.insertAfter(a,e);g.fillNode(f.document,e);g.remove(a);b.setStart(e,0).setCursor()}}})};UE.plugins.catchremoteimage=function(){var f=this,d=UE.ajax;!1!==f.options.catchRemoteImageEnable&&(f.setOpt({catchRemoteImageEnable:!1}),f.addListener("afterpaste",function(){f.fireEvent("catchRemoteImage")}),f.addListener("catchRemoteImage",function(){function c(b,c){var e=n.serializeParam(f.queryCommandValue("serverparam"))||"",e=n.formatUrl(a+(-1==a.indexOf("?")?"?":"\x26")+e),g={method:"POST",dataType:n.isCrossDomainUrl(e)?"jsonp":"",timeout:6E4,onsuccess:c.success,onerror:c.error};g[h]=b;d.request(e,g)}for(var b=f.getOpt("catcherLocalDomain"),a=f.getActionUrl(f.getOpt("catcherActionName")),e=f.getOpt("catcherUrlPrefix"),h=f.getOpt("catcherFieldName"),l=[],k=g.getElementsByTagName(f.document,"img"),p=function(a,b){if(-1!=a.indexOf(location.host)||/(^\.)|(^\/)/.test(a))return!0;if(b)for(var c=0,d;d=b[c++];)if(-1!==a.indexOf(d))return!0;return!1},m=0,q;q=k[m++];)q.getAttribute("word_img")||(q=q.getAttribute("_src")||q.src||"",/^(https?|ftp):/i.test(q)&&!p(q,b)&&l.push(q));l.length&&c(l,{success:function(a){try{var b=void 0!==a.state?a:eval("("+a.responseText+")")}catch(F){return}var c,d,h,m=b.list;for(a=0;b=k[a++];)for(h=b.getAttribute("_src")||b.src||"",c=0;d=m[c++];)if(h==d.source&&"SUCCESS"==d.state){c=e+d.url;g.setAttributes(b,{src:c,_src:c});break}f.fireEvent("catchremotesuccess")},error:function(){f.fireEvent("catchremoteerror")}})}))};UE.plugin.register("snapscreen",function(){function f(b){var a=document.createElement("a"),c=n.serializeParam(d.queryCommandValue("serverparam"))||"";a.href=b;r.ie&&(a.href=a.href);b=a.search;c&&(b=b+(-1==b.indexOf("?")?"?":"\x26")+c,b=b.replace(/[&]+/ig,"\x26"));return{port:a.port,hostname:a.hostname,path:a.pathname+b||+a.hash}}var d=this,c;return{commands:{snapscreen:{execCommand:function(b){function a(a){try{if(a=eval("("+a+")"),"SUCCESS"==a.state){var b=d.options;d.execCommand("insertimage",{src:b.snapscreenUrlPrefix+a.url,_src:b.snapscreenUrlPrefix+a.url,alt:a.title||"",floatStyle:b.snapscreenImgAlign})}else alert(a.state)}catch(m){alert(l.callBackErrorMsg)}}var e,g,l=d.getLang("snapScreen_plugin");if(!c){b=d.container;c=(d.container.ownerDocument||d.container.document).createElement("object");try{c.type="application/x-pluginbaidusnap"}catch(k){return}c.style.cssText="position:absolute;left:-9999px;width:0;height:0;";c.setAttribute("width","0");c.setAttribute("height","0");b.appendChild(c)}b=d.getActionUrl(d.getOpt("snapscreenActionName"));e=f(b);setTimeout(function(){try{g=c.saveSnapshot(e.hostname,e.path,e.port)}catch(k){d.ui._dialogs.snapscreenDialog.open();return}a(g)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}});UE.commands.insertparagraph={execCommand:function(f,d){for(var c=this.selection.getRange(),b=c.startContainer,a;b&&!g.isBody(b);)a=b,b=b.parentNode;a&&(b=this.document.createElement("p"),d?a.parentNode.insertBefore(b,a):a.parentNode.insertBefore(b,a.nextSibling),g.fillNode(this.document,b),c.setStart(b,0).setCursor(!1,!0))}};UE.plugin.register("webapp",function(){function f(c,b){return b?'\x3ciframe class\x3d"edui-faked-webapp" title\x3d"'+c.title+'" '+(c.align&&!c.cssfloat?'align\x3d"'+c.align+'"':"")+(c.cssfloat?'style\x3d"float:'+c.cssfloat+'"':"")+'width\x3d"'+c.width+'" height\x3d"'+c.height+'"  scrolling\x3d"no" frameborder\x3d"0" src\x3d"'+c.url+'" logo_url \x3d "'+c.logo+'"\x3e\x3c/iframe\x3e':'\x3cimg title\x3d"'+c.title+'" width\x3d"'+c.width+'" height\x3d"'+c.height+'" src\x3d"'+d.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url\x3d"'+c.logo+'" style\x3d"background:url('+c.logo+') no-repeat center center; border:1px solid gray;" class\x3d"edui-faked-webapp" _url\x3d"'+c.url+'" '+(c.align&&!c.cssfloat?'align\x3d"'+c.align+'"':"")+(c.cssfloat?'style\x3d"float:'+c.cssfloat+'"':"")+"/\x3e"}var d=this;return{outputRule:function(c){n.each(c.getNodesByTagName("img"),function(b){var a;"edui-faked-webapp"==b.getAttr("class")&&(a=f({title:b.getAttr("title"),width:b.getAttr("width"),height:b.getAttr("height"),align:b.getAttr("align"),cssfloat:b.getStyle("float"),url:b.getAttr("_url"),logo:b.getAttr("_logo_url")},!0),a=UE.uNode.createElement(a),b.parentNode.replaceChild(a,b))})},inputRule:function(c){n.each(c.getNodesByTagName("iframe"),function(b){if("edui-faked-webapp"==b.getAttr("class")){var a=UE.uNode.createElement(f({title:b.getAttr("title"),width:b.getAttr("width"),height:b.getAttr("height"),align:b.getAttr("align"),cssfloat:b.getStyle("float"),url:b.getAttr("src"),logo:b.getAttr("logo_url")}));b.parentNode.replaceChild(a,b)}})},commands:{webapp:{execCommand:function(c,b){var a=f(n.extend(b,{align:"none"}),!1);this.execCommand("inserthtml",a)},queryCommandState:function(){var c=this.selection.getRange().getClosedNode();return c&&"edui-faked-webapp"==c.className?1:0}}}}});UE.plugins.template=function(){UE.commands.template={execCommand:function(f,d){d.html&&this.execCommand("inserthtml",d.html)}};this.addListener("click",function(f,d){var c=d.target||d.srcElement,b=this.selection.getRange();(c=g.findParent(c,function(a){if(a.className&&g.hasClass(a,"ue_t"))return a},!0))&&b.selectNode(c).shrinkBoundary().select()});this.addListener("keydown",function(f,d){var c=this.selection.getRange();c.collapsed||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey||(c=g.findParent(c.startContainer,function(b){if(b.className&&g.hasClass(b,"ue_t"))return b},!0))&&g.removeClasses(c,["ue_t"])})};UE.plugin.register("music",function(){function f(c,b,a,e,f,g){return g?'\x3cembed type\x3d"application/x-shockwave-flash" class\x3d"edui-faked-music" pluginspage\x3d"http://www.macromedia.com/go/getflashplayer" src\x3d"'+c+'" width\x3d"'+b+'" height\x3d"'+a+'" '+(e&&!f?'align\x3d"'+e+'"':"")+(f?'style\x3d"float:'+f+'"':"")+' wmode\x3d"transparent" play\x3d"true" loop\x3d"false" menu\x3d"false" allowscriptaccess\x3d"never" allowfullscreen\x3d"true" \x3e':"\x3cimg "+(e&&!f?'align\x3d"'+e+'"':"")+(f?'style\x3d"float:'+f+'"':"")+' width\x3d"'+b+'" height\x3d"'+a+'" _url\x3d"'+c+'" class\x3d"edui-faked-music" src\x3d"'+d.options.langPath+d.options.lang+'/images/music.png" /\x3e'}var d=this;return{outputRule:function(c){n.each(c.getNodesByTagName("img"),function(b){var a;if("edui-faked-music"==b.getAttr("class")){a=b.getStyle("float");var c=b.getAttr("align");a=f(b.getAttr("_url"),b.getAttr("width"),b.getAttr("height"),c,a,!0);a=UE.uNode.createElement(a);b.parentNode.replaceChild(a,b)}})},inputRule:function(c){n.each(c.getNodesByTagName("embed"),function(b){if("edui-faked-music"==b.getAttr("class")){var a=b.getStyle("float"),c=b.getAttr("align");html=f(b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),c,a,!1);a=UE.uNode.createElement(html);b.parentNode.replaceChild(a,b)}})},commands:{music:{execCommand:function(c,b){var a=f(b.url,b.width||400,b.height||95,"none",!1);this.execCommand("inserthtml",a)},queryCommandState:function(){var c=this.selection.getRange().getClosedNode();return c&&"edui-faked-music"==c.className?1:0}}}}});UE.plugin.register("autoupload",function(){function f(d,c){var b,a,e,f,l,k,p,m,q=/image\/\w+/i.test(d.type)?"image":"file",u="loading_"+(+new Date).toString(36);b=c.getOpt(q+"FieldName");a=c.getOpt(q+"UrlPrefix");e=c.getOpt(q+"MaxSize");f=c.getOpt(q+"AllowFiles");l=c.getActionUrl(c.getOpt(q+"ActionName"));p=function(a){var b=c.document.getElementById(u);b&&g.remove(b);c.fireEvent("showmessage",{id:u,content:a,type:"error",timeout:4E3})};"image"==q?(k='\x3cimg class\x3d"loadingclass" id\x3d"'+u+'" src\x3d"'+c.options.themePath+c.options.theme+'/images/spacer.gif" title\x3d"'+(c.getLang("autoupload.loading")||"")+'" \x3e',m=function(b){var d=a+b.url,e=c.document.getElementById(u);e&&(e.setAttribute("src",d),e.setAttribute("_src",d),e.setAttribute("title",b.title||""),e.setAttribute("alt",b.original||""),e.removeAttribute("id"),g.removeClasses(e,"loadingclass"))}):(k='\x3cp\x3e\x3cimg class\x3d"loadingclass" id\x3d"'+u+'" src\x3d"'+c.options.themePath+c.options.theme+'/images/spacer.gif" title\x3d"'+(c.getLang("autoupload.loading")||"")+'" \x3e\x3c/p\x3e',m=function(b){b=a+b.url;var d=c.document.getElementById(u),e=c.selection.getRange(),f=e.createBookmark();e.selectNode(d).select();c.execCommand("insertfile",{url:b});e.moveToBookmark(f).select()});c.execCommand("inserthtml",k);c.getOpt(q+"ActionName")?d.size>e?p(c.getLang("autoupload.exceedSizeError")):(e=d.name?d.name.substr(d.name.lastIndexOf(".")):"")&&"image"!=q||f&&-1==(f.join("")+".").indexOf(e.toLowerCase()+".")?p(c.getLang("autoupload.exceedTypeError")):(f=new XMLHttpRequest,q=new FormData,e=n.serializeParam(c.queryCommandValue("serverparam"))||"",l=n.formatUrl(l+(-1==l.indexOf("?")?"?":"\x26")+e),q.append(b,d,d.name||"blob."+d.type.substr(6)),q.append("type","ajax"),f.open("post",l,!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.addEventListener("load",function(a){try{var b=(new Function("return "+n.trim(a.target.response)))();"SUCCESS"==b.state&&b.url?m(b):p(b.state)}catch(v){p(c.getLang("autoupload.loadError"))}}),f.send(q)):p(c.getLang("autoupload.errorLoadConfig"))}return{outputRule:function(d){n.each(d.getNodesByTagName("img"),function(c){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(c.getAttr("class"))&&c.parentNode.removeChild(c)});n.each(d.getNodesByTagName("p"),function(c){/\bloadpara\b/.test(c.getAttr("class"))&&c.parentNode.removeChild(c)})},bindEvents:{ready:function(d){var c=this;window.FormData&&window.FileReader&&(g.on(c.body,"paste drop",function(b){var a=!1,d;if(d="paste"==b.type?b.clipboardData&&b.clipboardData.items&&1==b.clipboardData.items.length&&/^image\//.test(b.clipboardData.items[0].type)?b.clipboardData.items:null:b.dataTransfer&&b.dataTransfer.files?b.dataTransfer.files:null){for(var g=d.length,l;g--;)l=d[g],l.getAsFile&&(l=l.getAsFile()),l&&0<l.size&&(f(l,c),a=!0);a&&b.preventDefault()}}),g.on(c.body,"dragover",function(b){"Files"==b.dataTransfer.types[0]&&b.preventDefault()}),n.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}});UE.plugin.register("autosave",function(){function f(a){var e;20>new Date-c||(a.hasContents()?(c=new Date,a._saveFlag=null,e=d.body.innerHTML,!1!==a.fireEvent("beforeautosave",{content:e})&&(d.setPreferences(b,e),a.fireEvent("afterautosave",{content:e}))):b&&d.removePreferences(b))}var d=this,c=new Date,b=null;return{defaultOptions:{saveInterval:0},bindEvents:{ready:function(){var a;a=d.key?d.key+"-drafts-data":(d.container.parentNode.id||"ue-common")+"-drafts-data";b=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+a},contentchange:function(){b&&(d._saveFlag&&window.clearTimeout(d._saveFlag),0<d.options.saveInterval?d._saveFlag=window.setTimeout(function(){f(d)},d.options.saveInterval):f(d))}},commands:{clearlocaldata:{execCommand:function(a,c){b&&d.getPreferences(b)&&d.removePreferences(b)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(a,c){return b?d.getPreferences(b)||"":""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(a,b){d.body.innerHTML+="\x3cp\x3e\x3cbr\x3e\x3c/p\x3e";d.focus(!0)},queryCommandState:function(){return b?null===d.getPreferences(b)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}});UE.plugin.register("charts",function(){function f(c){var b,a;if(2>c.rows.length||2>c.rows[0].cells.length)return!1;b=c.rows[0].cells;a=b.length;for(var d=0,f;f=b[d];d++)if("th"!==f.tagName.toLowerCase())return!1;for(d=1;b=c.rows[d];d++){if(b.cells.length!=a||"th"!==b.cells[0].tagName.toLowerCase())return!1;for(var g=1;f=b.cells[g];g++)if(f=n.trim(f.innerText||f.textContent||""),f=f.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(f))return!1}return!0}var d=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(c,b){var a=g.findParentByTagName(this.selection.getRange().startContainer,"table",!0),e=[],h={};if(!a)return!1;if(!f(a))return d.fireEvent("chartserror"),!1;h.title=b.title||"";h.subTitle=b.subTitle||"";h.xTitle=b.xTitle||"";h.yTitle=b.yTitle||"";h.suffix=b.suffix||"";h.tip=b.tip||"";h.dataFormat=b.tableDataFormat||"";h.chartType=b.chartType||0;for(var l in h)h.hasOwnProperty(l)&&e.push(l+":"+h[l]);a.setAttribute("data-chart",e.join(";"));g.addClass(a,"edui-charts-table")},queryCommandState:function(c,b){var a=g.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return a&&f(a)?0:-1}}},inputRule:function(c){n.each(c.getNodesByTagName("table"),function(b){void 0!==b.getAttr("data-chart")&&b.setAttr("style")})},outputRule:function(c){n.each(c.getNodesByTagName("table"),function(b){void 0!==b.getAttr("data-chart")&&b.setAttr("style","display: none;")})}}});UE.plugin.register("section",function(){function f(a){this.tag="";this.level=-1;this.parentSection=this.previousSection=this.nextSection=this.dom=null;this.startAddress=[];this.endAddress=[];this.children=[]}function d(a){var b=new f;return n.extend(b,a)}function c(a,b){for(var c=b,d=0;d<a.length;d++){if(!c.childNodes)return null;c=c.childNodes[a[d]]}return c}var b=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){b.fireEvent("updateSections")}},bindEvents:{ready:function(){b.fireEvent("updateSections");g.on(b.body,"drop paste",function(){b.fireEvent("updateSections")})},afterexeccommand:function(a,c){"paragraph"==c&&b.fireEvent("updateSections")},keyup:function(a,b){if(1!=this.selection.getRange().collapsed)this.fireEvent("updateSections");else{var c=b.keyCode||b.which;13!=c&&8!=c&&46!=c||this.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(a,b){function c(a,b){for(var f,k=null,h,l=a.childNodes,p=0,q=l.length;p<q;p++){h=l[p];a:{f=h;for(var u=0;u<e.length;u++)if(e[u](f)){f=u;break a}f=-1}if(0<=f){k=g.selection.getRange().selectNode(h).createAddress(!0).startAddress;k=d({tag:h.tagName,title:h.innerText||h.textContent||"",level:f,dom:h,startAddress:n.clone(k,[]),endAddress:n.clone(k,[]),children:[]});m.nextSection=k;for(h=k.previousSection=m;f<=h.level;)h=h.parentSection;k.parentSection=h;h.children.push(k);k=m=k}else 1===h.nodeType&&c(h,b),k&&k.endAddress[k.endAddress.length-1]++}}for(var e=b||"h1 h2 h3 h4 h5 h6".split(" "),f=0;f<e.length;f++)"string"==typeof e[f]?e[f]=function(a){return function(b){return b.tagName==a.toUpperCase()}}(e[f]):"function"!=typeof e[f]&&(e[f]=function(a){return null});var g=this,m=f=d({level:-1,title:"root"});c(g.body,f);return f},notNeedUndo:!0},movesection:{execCommand:function(a,b,d,f){if(b&&d&&-1!=d.level){d=f?d.endAddress:d.startAddress;a=c(d,this.body);var e;if(!(e=!d||!a)){e=b.startAddress;for(var h=!1,m=!1,l=0;l<e.length&&!(l>=d.length);l++)if(d[l]>e[l]){h=!0;break}else if(d[l]<e[l])break;for(l=0;l<b.endAddress.length&&!(l>=d.length);l++)if(d[l]<e[l]){m=!0;break}else if(d[l]>e[l])break;e=h&&m}if(!e){d=c(b.startAddress,this.body);b=c(b.endAddress,this.body);if(f)for(f=b;f&&!(g.getPosition(d,f)&g.POSITION_FOLLOWING);){e=f.previousSibling;g.insertAfter(a,f);if(f==d)break;f=e}else for(f=d;f&&!(g.getPosition(f,b)&g.POSITION_FOLLOWING);){e=f.nextSibling;a.parentNode.insertBefore(f,a);if(f==b)break;f=e}this.fireEvent("updateSections")}}}},deletesection:{execCommand:function(a,b,c){function d(a){for(var b=e.body,c=0;c<a.length;c++){if(!b.childNodes)return null;b=b.childNodes[a[c]]}return b}var e=this;if(b){a=d(b.startAddress);b=d(b.endAddress);if(c)g.remove(a);else for(;a&&g.inDoc(b,e.document)&&!(g.getPosition(a,b)&g.POSITION_FOLLOWING);)c=a.nextSibling,g.remove(a),a=c;e.fireEvent("updateSections")}}},selectsection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var c=this.selection.getRange(),d={startAddress:n.clone(b.startAddress,[]),endAddress:n.clone(b.endAddress,[])};d.endAddress[d.endAddress.length-1]++;c.moveToAddress(d).select().scrollToView();return!0},notNeedUndo:!0},scrolltosection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var c=this.selection.getRange(),d={startAddress:b.startAddress,endAddress:b.endAddress};d.endAddress[d.endAddress.length-1]++;c.moveToAddress(d).scrollToView();return!0},notNeedUndo:!0}}}});UE.plugin.register("simpleupload",function(){function f(){var a=b.offsetWidth||20,e=b.offsetHeight||20,f=document.createElement("iframe"),l=document.createElement("iframe"),k="display:block;width:"+a+"px;height:"+e+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity\x3d0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";g.on(f,"load",function(){var b=(+new Date).toString(36),h,q,u;q=f.contentDocument||f.contentWindow.document;u=q.body;h=q.createElement("div");h.innerHTML='\x3cform id\x3d"edui_form_'+b+'" target\x3d"edui_iframe_'+b+'" method\x3d"POST" enctype\x3d"multipart/form-data" action\x3d"'+d.getOpt("serverUrl")+'" style\x3d"'+k+'"\x3e\x3cinput id\x3d"edui_input_'+b+'" type\x3d"file" accept\x3d"image/*" name\x3d"'+d.options.imageFieldName+'" style\x3d"'+k+'"\x3e\x3c/form\x3e';l.id="edui_iframe_"+b;l.name="edui_iframe_"+b;h.className="edui-"+d.options.theme;h.id=d.ui.id+"_iframeupload";u.style.cssText=k;u.style.width=a+"px";u.style.height=e+"px";u.appendChild(h);u.parentNode&&(u.parentNode.style.width=a+"px",u.parentNode.style.height=a+"px");var y=q.getElementById("edui_form_"+b),r=q.getElementById("edui_input_"+b);g.on(r,"change",function(){function a(){try{var e,f,k,h=(l.contentDocument||l.contentWindow.document).body;f=(new Function("return "+(h.innerText||h.textContent||"")))();e=d.options.imageUrlPrefix+f.url;"SUCCESS"==f.state&&f.url?(k=d.document.getElementById(c),k.setAttribute("src",e),k.setAttribute("_src",e),k.setAttribute("title",f.title||""),k.setAttribute("alt",f.original||""),k.removeAttribute("id"),g.removeClasses(k,"loadingclass")):b&&b(f.state)}catch(A){b&&b(d.getLang("simpleupload.loadError"))}y.reset();g.un(l,"load",a)}function b(a){if(c){var b=d.document.getElementById(c);b&&g.remove(b);d.fireEvent("showmessage",{id:c,content:a,type:"error",timeout:4E3})}}if(r.value){var c="loading_"+(+new Date).toString(36),e=n.serializeParam(d.queryCommandValue("serverparam"))||"",f=d.getActionUrl(d.getOpt("imageActionName")),k=d.getOpt("imageAllowFiles");d.focus();d.execCommand("inserthtml",'\x3cimg class\x3d"loadingclass" id\x3d"'+c+'" src\x3d"'+d.options.themePath+d.options.theme+'/images/spacer.gif" title\x3d"'+(d.getLang("simpleupload.loading")||"")+'" \x3e');if(d.getOpt("imageActionName")){var h=r.value,h=h?h.substr(h.lastIndexOf(".")):"";!h||k&&-1==(k.join("")+".").indexOf(h.toLowerCase()+".")?b(d.getLang("simpleupload.exceedTypeError")):(g.on(l,"load",a),y.action=n.formatUrl(f+(-1==f.indexOf("?")?"?":"\x26")+e),y.submit())}else errorHandler(d.getLang("autoupload.errorLoadConfig"))}});var v;d.addListener("selectionchange",function(){clearTimeout(v);v=setTimeout(function(){-1==d.queryCommandState("simpleupload")?r.disabled="disabled":r.disabled=!1},400)});c=!0});f.style.cssText=k;b.appendChild(f);l.style.cssText="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;";b.appendChild(l)}var d=this,c=!1,b;return{bindEvents:{ready:function(){n.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(a,c){b=c;d.afterConfigReady(f)}},outputRule:function(a){n.each(a.getNodesByTagName("img"),function(a){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(a.getAttr("class"))&&a.parentNode.removeChild(a)})},commands:{simpleupload:{queryCommandState:function(){return c?0:-1}}}}});UE.plugin.register("serverparam",function(){var f={};return{commands:{serverparam:{execCommand:function(d,c,b){void 0===c||null===c?f={}:n.isString(c)?void 0===b||null===b?delete f[c]:f[c]=b:n.isObject(c)?n.extend(f,c,!0):n.isFunction(c)&&n.extend(f,c(),!0)},queryCommandValue:function(){return f||{}}}}}});UE.plugin.register("insertfile",function(){var f=this;return{commands:{insertfile:{execCommand:function(d,c){c=n.isArray(c)?c:[c];var b,a,e,g,l="";b=f.getOpt("UEDITOR_HOME_URL");var k=b+("/"==b.substr(b.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(b=0;b<c.length;b++)a=c[b],e=a.url,g=e.indexOf("?"),-1<g&&(e=e.substring(0,g)),e=e.substr(e.lastIndexOf(".")+1).toLowerCase(),g={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",mp4:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"},e=k+(g[e]?g[e]:g.txt),g=a.title||a.url.substr(a.url.lastIndexOf("/")+1),name=a.name||a.url.substr(a.url.lastIndexOf("/")+1),l+='\x3cp style\x3d"line-height: 16px;"\x3e\x3cimg style\x3d"vertical-align: middle; margin-right: 2px;" src\x3d"'+e+'" _src\x3d"'+e+'" /\x3e\x3ca style\x3d"font-size:12px; color:#0066cc;" href\x3d"'+a.url+'" title\x3d"'+g+'"\x3e'+name+"\x3c/a\x3e\x3c/p\x3e";f.execCommand("insertHtml",l)}}}}});UE.plugins.xssFilter=function(){function f(a){var b=a.tagName,d=a.attrs;if(!c.hasOwnProperty(b))return a.parentNode.removeChild(a),!1;UE.utils.each(d,function(d,e){-1===c[b].indexOf(e)&&a.setAttr(e)})}var d=UEDITOR_CONFIG,c=d.whitList;c&&d.xssFilterRules&&(this.options.filterRules=function(){var a={};UE.utils.each(c,function(b,c){a[c]=function(a){return f(a)}});return a}());var b=[];UE.utils.each(c,function(a,c){b.push(c)});c&&d.inputXssFilter&&this.addInputRule(function(a){a.traversal(function(a){if("element"!==a.type)return!1;f(a)})});c&&d.outputXssFilter&&this.addOutputRule(function(a){a.traversal(function(a){if("element"!==a.type)return!1;f(a)})})};t=t||{};t.editor=t.editor||{};UE.ui=t.editor.ui={};(function(){function f(){var a=document.getElementById("edui_fixedlayer");e.setViewportOffset(a,{left:0,top:0})}var d=t.editor.browser,c=t.editor.dom.domUtils,b=window.$EDITORUI={},a=0,e=t.editor.ui.uiUtils={uid:function(b){return b?b.ID$EDITORUI||(b.ID$EDITORUI=++a):++a},hook:function(a,b){var c;a&&a._callbacks?c=a:(c=function(){var b;a&&(b=a.apply(this,arguments));for(var d=c._callbacks,e=d.length;e--;){var f=d[e].apply(this,arguments);void 0===b&&(b=f)}return b},c._callbacks=[]);c._callbacks.push(b);return c},createElementByHtml:function(a){var b=document.createElement("div");b.innerHTML=a;b=b.firstChild;b.parentNode.removeChild(b);return b},getViewportElement:function(){return d.ie&&d.quirks?document.body:document.documentElement},getClientRect:function(a){var b;try{b=a.getBoundingClientRect()}catch(m){b={left:0,top:0,height:0,width:0}}for(var d={left:Math.round(b.left),top:Math.round(b.top),height:Math.round(b.bottom-b.top),width:Math.round(b.right-b.left)},e;(e=a.ownerDocument)!==document&&(a=c.getWindow(e).frameElement);)b=a.getBoundingClientRect(),d.left+=b.left,d.top+=b.top;d.bottom=d.top+d.height;d.right=d.left+d.width;return d},getViewportRect:function(){var a=e.getViewportElement(),b=(window.innerWidth||a.clientWidth)|0,a=(window.innerHeight||a.clientHeight)|0;return{left:0,top:0,height:a,width:b,bottom:a,right:b}},setViewportOffset:function(a,b){var d=e.getFixedLayer();a.parentNode===d?(a.style.left=b.left+"px",a.style.top=b.top+"px"):c.setViewportOffset(a,b)},getEventOffset:function(a){var b=e.getClientRect(a.target||a.srcElement);a=e.getViewportOffsetByEvent(a);return{left:a.left-b.left,top:a.top-b.top}},getViewportOffsetByEvent:function(a){var b=a.target||a.srcElement,d=c.getWindow(b).frameElement;a={left:a.clientX,top:a.clientY};d&&b.ownerDocument!==document&&(b=e.getClientRect(d),a.left+=b.left,a.top+=b.top);return a},setGlobal:function(a,c){b[a]=c;return'$EDITORUI["'+a+'"]'},unsetGlobal:function(a){delete b[a]},copyAttributes:function(a,b){for(var e=b.attributes,f=e.length;f--;){var g=e[f];"style"==g.nodeName||"class"==g.nodeName||d.ie&&!g.specified||a.setAttribute(g.nodeName,g.nodeValue)}b.className&&c.addClass(a,b.className);b.style.cssText&&(a.style.cssText+=";"+b.style.cssText)},removeStyle:function(a,b){if(a.style.removeProperty)a.style.removeProperty(b);else if(a.style.removeAttribute)a.style.removeAttribute(b);else throw"";},contains:function(a,b){return a&&b&&(a===b?!1:a.contains?a.contains(b):a.compareDocumentPosition(b)&16)},startDrag:function(a,b,c){function d(a){b.ondragmove(a.clientX-e,a.clientY-f,a);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}c=c||document;var e=a.clientX,f=a.clientY;if(c.addEventListener){var g=function(a){c.removeEventListener("mousemove",d,!0);c.removeEventListener("mouseup",g,!0);window.removeEventListener("mouseup",g,!0);b.ondragstop()};c.addEventListener("mousemove",d,!0);c.addEventListener("mouseup",g,!0);window.addEventListener("mouseup",g,!0);a.preventDefault()}else{var k=function(){h.releaseCapture();h.detachEvent("onmousemove",d);h.detachEvent("onmouseup",k);h.detachEvent("onlosecaptrue",k);b.ondragstop()},h=a.srcElement;h.setCapture();h.attachEvent("onmousemove",d);h.attachEvent("onmouseup",k);h.attachEvent("onlosecaptrue",k);a.returnValue=!1}b.ondragstart()},getFixedLayer:function(){var a=document.getElementById("edui_fixedlayer");null==a&&(a=document.createElement("div"),a.id="edui_fixedlayer",document.body.appendChild(a),d.ie&&8>=d.version?(a.style.position="absolute",c.on(window,"scroll",f),c.on(window,"resize",t.editor.utils.defer(f,0,!0)),setTimeout(f)):a.style.position="fixed",a.style.left="0",a.style.top="0",a.style.width="0",a.style.height="0");return a},makeUnselectable:function(a){if(d.opera||d.ie&&9>d.version){if(a.unselectable="on",a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++)1==a.childNodes[b].nodeType&&e.makeUnselectable(a.childNodes[b])}else void 0!==a.style.MozUserSelect?a.style.MozUserSelect="none":void 0!==a.style.WebkitUserSelect?a.style.WebkitUserSelect="none":void 0!==a.style.KhtmlUserSelect&&(a.style.KhtmlUserSelect="none")}}})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.EventBase,b=t.editor.ui.UIBase=function(){};b.prototype={className:"",uiName:"",initOptions:function(a){for(var b in a)this[b]=a[b];this.id=this.id||"edui"+d.uid()},initUIBase:function(){this._globalKey=f.unhtml(d.setGlobal(this.id,this))},render:function(a){for(var b=this.renderHtml(),b=d.createElementByHtml(b),c=g.getElementsByTagName(b,"*"),f="edui-"+(this.theme||this.editor.options.theme),k=document.getElementById("edui_fixedlayer"),p=0,m;m=c[p++];)g.addClass(m,f);g.addClass(b,f);k&&(k.className="",g.addClass(k,f));c=this.getDom();null!=c?(c.parentNode.replaceChild(b,c),d.copyAttributes(b,c)):("string"==typeof a&&(a=document.getElementById(a)),a=a||d.getFixedLayer(),g.addClass(a,f),a.appendChild(b));this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},getUid:function(){return this.id},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();a&&t.editor.dom.domUtils.remove(a);d.unsetGlobal(this.id)}};f.inherits(b,c)})();(function(){var f=t.editor.utils,d=t.editor.ui.UIBase,c=t.editor.ui.Separator=function(b){this.initOptions(b);this.initSeparator()};c.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-box %%"\x3e\x3c/div\x3e'}};f.inherits(c,d)})();(function(){var f=t.editor.utils,d=t.editor.dom.domUtils,c=t.editor.ui.UIBase,b=t.editor.ui.uiUtils,a=t.editor.ui.Mask=function(a){this.initOptions(a);this.initUIBase()};a.prototype={getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-mask %%" onclick\x3d"return $$._onClick(event, this);" onmousedown\x3d"return $$._onMouseDown(event, this);"\x3e\x3c/div\x3e'},postRender:function(){var a=this;d.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a._fill()})})},show:function(a){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(a,b){this.fireEvent("click",a,b)},_fill:function(){var a=this.getDom(),c=b.getViewportRect();a.style.width=c.width+"px";a.style.height=c.height+"px"}};f.inherits(a,c)})();(function(){function f(a,b){for(var c=0;c<g.length;c++){var d=g[c];if(!d.isHidden()&&!1!==d.queryAutoHide(b)){if(a&&/scroll/ig.test(a.type)&&"edui-wordpastepop"==d.className)return;d.hide()}}g.length&&d.editor.fireEvent("afterhidepop")}var d=t.editor.utils,c=t.editor.ui.uiUtils,b=t.editor.dom.domUtils,a=t.editor.ui.UIBase,e=t.editor.ui.Popup=function(a){this.initOptions(a);this.initPopup()},g=[];e.postHide=f;var l=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];e.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase();g.push(this)},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-popup %%" onmousedown\x3d"return false;"\x3e \x3cdiv id\x3d"##_body" class\x3d"edui-popup-body"\x3e \x3ciframe style\x3d"position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder\x3d"0" width\x3d"100%" height\x3d"100%" src\x3d"about:blank"\x3e\x3c/iframe\x3e \x3cdiv class\x3d"edui-shadow"\x3e\x3c/div\x3e \x3cdiv id\x3d"##_content" class\x3d"edui-popup-content"\x3e'+this.getContentHtmlTpl()+"  \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:a.prototype.postRender,postRender:function(){this.content instanceof a&&this.content.postRender();if(this.captureWheel&&!this.captured){this.captured=!0;var d=(document.documentElement.clientHeight||document.body.clientHeight)-80,e=this.getDom().offsetHeight,f=c.getClientRect(this.combox.getDom()).top,g=this.getDom("content"),h=this.getDom("body").getElementsByTagName("iframe"),l=this;for(h.length&&(h=h[0]);f+e>d;)e-=30;g.style.height=e+"px";h&&(h.style.height=e+"px");if(window.XMLHttpRequest)b.on(g,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;g.scrollTop=a.wheelDelta?g.scrollTop-a.wheelDelta/120*60:g.scrollTop-a.detail/-3*60});else b.on(this.getDom(),"mousewheel",function(a){a.returnValue=!1;l.getDom("content").scrollTop-=a.wheelDelta/120*60})}this.fireEvent("postRenderAfter");this.hide(!0);this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var a=this.getDom("content");return c.getClientRect(a)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var a=this.getDom("body");a.style.width="";a.style.height="";var b=this.mesureSize();if(this.captureWheel){a.style.width=-(-20-b.width)+"px";var c=parseInt(this.getDom("content").style.height,10);!window.isNaN(c)&&(b.height=c)}else a.style.width=b.width+"px";a.style.height=b.height+"px";this.__size=b;this.captureWheel&&(this.getDom("content").style.overflow="auto");return b},showAnchor:function(a,b){this.showAnchorRect(c.getClientRect(a),b)},showAnchorRect:function(a,d,e){this._doAutoRender();var f=c.getViewportRect();this.getDom().style.visibility="hidden";this._show();e=this.fitSize();var g;d?(d=this.canSideLeft&&a.right+e.width>f.right&&a.left>e.width,f=this.canSideUp&&a.top+e.height>f.bottom&&a.bottom>e.height,g=d?a.left-e.width:a.right,a=f?a.bottom-e.height:a.top):(d=this.canSideLeft&&a.right+e.width>f.right&&a.left>e.width,f=this.canSideUp&&a.top+e.height>f.bottom&&a.bottom>e.height,g=d?a.right-e.width:a.left,a=f?a.top-e.height:a.bottom);e=this.getDom();c.setViewportOffset(e,{left:g,top:a});b.removeClasses(e,l);e.className+=" "+l[2*(f?1:0)+(d?1:0)];this.editor&&(e.style.zIndex=1*this.editor.container.style.zIndex+10,t.editor.ui.uiUtils.getFixedLayer().style.zIndex=e.style.zIndex-1);this.getDom().style.visibility="visible"},showAt:function(a){var b=a.left;a=a.top;this.showAnchorRect({left:b,top:a,right:b,bottom:a,height:0,width:0},!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(a){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,a||this.fireEvent("hide"))},queryAutoHide:function(a){return!a||!c.contains(this.getDom(),a)}};d.inherits(e,a);b.on(document,"mousedown",function(a){f(a,a.target||a.srcElement)});b.on(window,"scroll",function(a,b){f(a,b)})})();(function(){var f=t.editor.utils,d=t.editor.ui.UIBase,c=t.editor.ui.ColorPicker=function(a){this.initOptions(a);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};c.prototype={getHtmlTpl:function(){for(var a=this.editor,c='\x3cdiv id\x3d"##" class\x3d"edui-colorpicker %%"\x3e\x3cdiv class\x3d"edui-colorpicker-topbar edui-clearfix"\x3e\x3cdiv unselectable\x3d"on" id\x3d"##_preview" class\x3d"edui-colorpicker-preview"\x3e\x3c/div\x3e\x3cdiv unselectable\x3d"on" class\x3d"edui-colorpicker-nocolor" onclick\x3d"$$._onPickNoColor(event, this);"\x3e'+this.noColorText+'\x3c/div\x3e\x3c/div\x3e\x3ctable  class\x3d"edui-box" style\x3d"border-collapse: collapse;" onmouseover\x3d"$$._onTableOver(event, this);" onmouseout\x3d"$$._onTableOut(event, this);" onclick\x3d"return $$._onTableClick(event, this);" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr style\x3d"border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"\x3e\x3ctd colspan\x3d"10"\x3e'+a.getLang("themeColor")+'\x3c/td\x3e \x3c/tr\x3e\x3ctr class\x3d"edui-colorpicker-tablefirstrow" \x3e',d=0;d<b.length;d++)d&&0===d%10&&(c+="\x3c/tr\x3e"+(60==d?'\x3ctr style\x3d"border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"\x3e\x3ctd colspan\x3d"10"\x3e'+a.getLang("standardColor")+"\x3c/td\x3e\x3c/tr\x3e":"")+"\x3ctr"+(60==d?' class\x3d"edui-colorpicker-tablefirstrow"':"")+"\x3e"),c+=70>d?'\x3ctd style\x3d"padding: 0 2px;"\x3e\x3ca hidefocus title\x3d"'+b[d]+'" onclick\x3d"return false;" href\x3d"javascript:" unselectable\x3d"on" class\x3d"edui-box edui-colorpicker-colorcell" data-color\x3d"#'+b[d]+'" style\x3d"background-color:#'+b[d]+";border:solid #ccc;"+(10>d||60<=d?"border-width:1px;":10<=d&&20>d?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"\x3e\x3c/a\x3e\x3c/td\x3e':"";return c+"\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e"},_onTableClick:function(a){(a=(a.target||a.srcElement).getAttribute("data-color"))&&this.fireEvent("pickcolor",a)},_onTableOver:function(a){if(a=(a.target||a.srcElement).getAttribute("data-color"))this.getDom("preview").style.backgroundColor=a},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};f.inherits(c,d);var b="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0 ".split(" ")})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.ui.UIBase,b=t.editor.ui.TablePicker=function(a){this.initOptions(a);this.initTablePicker()};b.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-tablepicker %%"\x3e\x3cdiv class\x3d"edui-tablepicker-body"\x3e\x3cdiv class\x3d"edui-infoarea"\x3e\x3cspan id\x3d"##_label" class\x3d"edui-label"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-pickarea" onmousemove\x3d"$$._onMouseMove(event, this);" onmouseover\x3d"$$._onMouseOver(event, this);" onmouseout\x3d"$$._onMouseOut(event, this);" onclick\x3d"$$._onClick(event, this);"\x3e\x3cdiv id\x3d"##_overlay" class\x3d"edui-overlay"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'},_UIBase_render:c.prototype.render,render:function(a){this._UIBase_render(a);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var c=this.getDom("overlay").style,d=this.lengthOfCellSide;c.width=a*d+"px";c.height=b*d+"px";this.getDom("label").innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row");this.numCols=a;this.numRows=b},_onMouseOver:function(a,b){var c=a.relatedTarget||a.fromElement;d.contains(b,c)||b===c||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(a,b){var c=a.relatedTarget||a.toElement;d.contains(b,c)||b===c||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(a,b){this.getDom("overlay");var c=d.getEventOffset(a),e=this.lengthOfCellSide;this._track(Math.ceil(c.left/e),Math.ceil(c.top/e))},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};f.inherits(b,c)})();(function(){var f=t.editor.dom.domUtils,d=t.editor.ui.uiUtils,c='onmousedown\x3d"$$.Stateful_onMouseDown(event, this);" onmouseup\x3d"$$.Stateful_onMouseUp(event, this);"'+(t.editor.browser.ie?' onmouseenter\x3d"$$.Stateful_onMouseEnter(event, this);" onmouseleave\x3d"$$.Stateful_onMouseLeave(event, this);"':' onmouseover\x3d"$$.Stateful_onMouseOver(event, this);" onmouseout\x3d"$$.Stateful_onMouseOut(event, this);"');t.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return c})},Stateful_onMouseEnter:function(b,a){this.target=a;if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(b,a){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(b,a){var c=b.relatedTarget;d.contains(a,c)||a===c||this.Stateful_onMouseEnter(b,a)},Stateful_onMouseOut:function(b,a){var c=b.relatedTarget;d.contains(a,c)||a===c||this.Stateful_onMouseLeave(b,a)},Stateful_onMouseDown:function(b,a){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(b,a){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(b){return f.hasClass(this.getStateDom(),"edui-state-"+b)},addState:function(b){this.hasState(b)||(this.getStateDom().className+=" edui-state-"+b)},removeState:function(b){this.hasState(b)&&f.removeClasses(this.getStateDom(),["edui-state-"+b])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(b){!this.isDisabled()&&b?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(b){b?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}})();(function(){var f=t.editor.utils,d=t.editor.ui.UIBase,c=t.editor.ui.Stateful,b=t.editor.ui.Button=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className="edui-for-"+b);a.cssRules=".edui-default  .edui-for-"+b+" .edui-icon {"+c+"}"}this.initOptions(a);this.initButton()};b.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();this.cssRules&&f.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-box %%"\x3e\x3cdiv id\x3d"##_state" stateful\x3e\x3cdiv class\x3d"%%-wrap"\x3e\x3cdiv id\x3d"##_body" unselectable\x3d"on" '+(this.title?'title\x3d"'+this.title+'"':"")+' class\x3d"%%-body" onmousedown\x3d"return $$._onMouseDown(event, this);" onclick\x3d"return $$._onClick(event, this);"\x3e'+(this.showIcon?'\x3cdiv class\x3d"edui-box edui-icon"\x3e\x3c/div\x3e':"")+(this.showText?'\x3cdiv class\x3d"edui-box edui-label"\x3e'+this.label+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(a){a=(a=a.target||a.srcElement)&&a.tagName&&a.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(a){this.getDom("label").innerHTML=a}};f.inherits(b,d);f.extend(b.prototype,c)})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.ui.UIBase,b=t.editor.ui.Stateful,a=t.editor.ui.SplitButton=function(a){this.initOptions(a);this.initSplitButton()};a.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();if(null!=this.popup){var a=this.popup;this.popup=null;this.setPopup(a)}},_UIBase_postRender:c.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(a){this.popup!==a&&(null!=this.popup&&this.popup.dispose(),a.addListener("show",f.bind(this._onPopupShow,this)),a.addListener("hide",f.bind(this._onPopupHide,this)),a.addListener("postrender",f.bind(function(){a.getDom("body").appendChild(d.createElementByHtml('\x3cdiv id\x3d"'+this.popup.id+'_bordereraser" class\x3d"edui-bordereraser edui-background" style\x3d"width:'+(d.getClientRect(this.getDom()).width+20)+'px"\x3e\x3c/div\x3e'));a.getDom().className+=" "+this.className},this)),this.popup=a)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-box %%"\x3e\x3cdiv '+(this.title?'title\x3d"'+this.title+'"':"")+' id\x3d"##_state" stateful\x3e\x3cdiv class\x3d"%%-body"\x3e\x3cdiv id\x3d"##_button_body" class\x3d"edui-box edui-button-body" onclick\x3d"$$._onButtonClick(event, this);"\x3e\x3cdiv class\x3d"edui-box edui-icon"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-box edui-splitborder"\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-box edui-arrow" onclick\x3d"$$._onArrowClick();"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'},showPopup:function(){var a=d.getClientRect(this.getDom());a.top-=this.popup.SHADOW_RADIUS;a.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(a)},_onArrowClick:function(a,b){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}};f.inherits(a,c);f.extend(a.prototype,b,!0)})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.ui.ColorPicker,b=t.editor.ui.Popup,a=t.editor.ui.SplitButton,e=t.editor.ui.ColorButton=function(a){this.initOptions(a);this.initColorButton()};e.prototype={initColorButton:function(){var a=this;this.popup=new b({content:new c({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,c){a._onPickColor(c)},onpicknocolor:function(b,c){a._onPickNoColor(c)}}),editor:a.editor});this.initSplitButton()},_SplitButton_postRender:a.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(d.createElementByHtml('\x3cdiv id\x3d"'+this.id+'_colorlump" class\x3d"edui-colorlump"\x3e\x3c/div\x3e'));this.getDom().className+=" edui-colorbutton"},setColor:function(a){this.color=this.getDom("colorlump").style.backgroundColor=a},_onPickColor:function(a){!1!==this.fireEvent("pickcolor",a)&&(this.setColor(a),this.popup.hide())},_onPickNoColor:function(a){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}};f.inherits(e,a)})();(function(){var f=t.editor.utils,d=t.editor.ui.Popup,c=t.editor.ui.TablePicker,b=t.editor.ui.SplitButton,a=t.editor.ui.TableButton=function(a){this.initOptions(a);this.initTableButton()};a.prototype={initTableButton:function(){var a=this;this.popup=new d({content:new c({editor:a.editor,onpicktable:function(b,c,d){a._onPickTable(c,d)}}),editor:a.editor});this.initSplitButton()},_onPickTable:function(a,b){!1!==this.fireEvent("picktable",a,b)&&this.popup.hide()}};f.inherits(a,b)})();(function(){var f=t.editor.utils,d=t.editor.ui.UIBase,c=t.editor.ui.AutoTypeSetPicker=function(b){this.initOptions(b);this.initAutoTypeSetPicker()};c.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var b=this.editor,a=b.options.autotypeset,c=b.getLang("autoTypeSet"),d="textAlignValue"+b.uid,f="imageBlockLineValue"+b.uid,g="symbolConverValue"+b.uid;return'\x3cdiv id\x3d"##" class\x3d"edui-autotypesetpicker %%"\x3e\x3cdiv class\x3d"edui-autotypesetpicker-body"\x3e\x3ctable \x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"mergeEmptyline" '+(a.mergeEmptyline?"checked":"")+"\x3e"+c.mergeLine+'\x3c/td\x3e\x3ctd colspan\x3d"2"\x3e\x3cinput type\x3d"checkbox" name\x3d"removeEmptyline" '+(a.removeEmptyline?"checked":"")+"\x3e"+c.delLine+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"removeClass" '+(a.removeClass?"checked":"")+"\x3e"+c.removeFormat+'\x3c/td\x3e\x3ctd colspan\x3d"2"\x3e\x3cinput type\x3d"checkbox" name\x3d"indent" '+(a.indent?"checked":"")+"\x3e"+c.indent+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"textAlign" '+(a.textAlign?"checked":"")+"\x3e"+c.alignment+'\x3c/td\x3e\x3ctd colspan\x3d"2" id\x3d"'+d+'"\x3e\x3cinput type\x3d"radio" name\x3d"'+d+'" value\x3d"left" '+(a.textAlign&&"left"==a.textAlign?"checked":"")+"\x3e"+b.getLang("justifyleft")+'\x3cinput type\x3d"radio" name\x3d"'+d+'" value\x3d"center" '+(a.textAlign&&"center"==a.textAlign?"checked":"")+"\x3e"+b.getLang("justifycenter")+'\x3cinput type\x3d"radio" name\x3d"'+d+'" value\x3d"right" '+(a.textAlign&&"right"==a.textAlign?"checked":"")+"\x3e"+b.getLang("justifyright")+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"imageBlockLine" '+(a.imageBlockLine?"checked":"")+"\x3e"+c.imageFloat+'\x3c/td\x3e\x3ctd nowrap id\x3d"'+f+'"\x3e\x3cinput type\x3d"radio" name\x3d"'+f+'" value\x3d"none" '+(a.imageBlockLine&&"none"==a.imageBlockLine?"checked":"")+"\x3e"+b.getLang("default")+'\x3cinput type\x3d"radio" name\x3d"'+f+'" value\x3d"left" '+(a.imageBlockLine&&"left"==a.imageBlockLine?"checked":"")+"\x3e"+b.getLang("justifyleft")+'\x3cinput type\x3d"radio" name\x3d"'+f+'" value\x3d"center" '+(a.imageBlockLine&&"center"==a.imageBlockLine?"checked":"")+"\x3e"+b.getLang("justifycenter")+'\x3cinput type\x3d"radio" name\x3d"'+f+'" value\x3d"right" '+(a.imageBlockLine&&"right"==a.imageBlockLine?"checked":"")+"\x3e"+b.getLang("justifyright")+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"clearFontSize" '+(a.clearFontSize?"checked":"")+"\x3e"+c.removeFontsize+'\x3c/td\x3e\x3ctd colspan\x3d"2"\x3e\x3cinput type\x3d"checkbox" name\x3d"clearFontFamily" '+(a.clearFontFamily?"checked":"")+"\x3e"+c.removeFontFamily+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap colspan\x3d"3"\x3e\x3cinput type\x3d"checkbox" name\x3d"removeEmptyNode" '+(a.removeEmptyNode?"checked":"")+"\x3e"+c.removeHtml+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap colspan\x3d"3"\x3e\x3cinput type\x3d"checkbox" name\x3d"pasteFilter" '+(a.pasteFilter?"checked":"")+"\x3e"+c.pasteFilter+'\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cinput type\x3d"checkbox" name\x3d"symbolConver" '+(a.bdc2sb||a.tobdc?"checked":"")+"\x3e"+c.symbol+'\x3c/td\x3e\x3ctd id\x3d"'+g+'"\x3e\x3cinput type\x3d"radio" name\x3d"bdc" value\x3d"bdc2sb" '+(a.bdc2sb?"checked":"")+"\x3e"+c.bdc2sb+'\x3cinput type\x3d"radio" name\x3d"bdc" value\x3d"tobdc" '+(a.tobdc?"checked":"")+"\x3e"+c.tobdc+'\x3c/td\x3e\x3ctd nowrap align\x3d"right"\x3e\x3cbutton \x3e'+c.run+"\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e"},_UIBase_render:d.prototype.render};f.inherits(c,d)})();(function(){function f(a){for(var b={},c=a.getDom(),e=a.editor.uid,f,h=g.getElementsByTagName(c,"input"),u=h.length-1,n;n=h[u--];)if(f=n.getAttribute("type"),"checkbox"==f)if(f=n.getAttribute("name"),b[f]&&delete b[f],n.checked)if(n=document.getElementById(f+"Value"+e))if(/input/ig.test(n.tagName))b[f]=n.value;else{n=n.getElementsByTagName("input");for(var r=n.length-1,v;v=n[r--];)if(v.checked){b[f]=v.value;break}}else b[f]=!0;else b[f]=!1;else b[n.getAttribute("value")]=n.checked;c=g.getElementsByTagName(c,"select");for(u=0;e=c[u++];)h=e.getAttribute("name"),b[h]=b[h]?e.value:"";d.extend(a.editor.options.autotypeset,b);a.editor.setPreferences("autotypeset",b)}var d=t.editor.utils,c=t.editor.ui.Popup,b=t.editor.ui.AutoTypeSetPicker,a=t.editor.ui.SplitButton,e=t.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a);this.initAutoTypeSetButton()};e.prototype={initAutoTypeSetButton:function(){var a=this;this.popup=new c({content:new b({editor:a.editor}),editor:a.editor,hide:function(){!this._hidden&&this.getDom()&&(f(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var d=0;this.popup.addListener("postRenderAfter",function(){var b=this;if(!d){var c=this.getDom();c.getElementsByTagName("button")[0].onclick=function(){f(b);a.editor.execCommand("autotypeset");b.hide()};g.on(c,"click",function(c){c=c.target||c.srcElement;var d=a.editor.uid;if(c&&"INPUT"==c.tagName){if("imageBlockLine"==c.name||"textAlign"==c.name||"symbolConver"==c.name)for(var e=c.checked,g=document.getElementById(c.name+"Value"+d).getElementsByTagName("input"),k={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},h=0;h<g.length;h++)e?g[h].value==k[c.name]&&(g[h].checked="checked"):g[h].checked=!1;(c.name=="imageBlockLineValue"+d||c.name=="textAlignValue"+d||"bdc"==c.name)&&(c=c.parentNode.previousSibling.getElementsByTagName("input"))&&(c[0].checked=!0);f(b)}});d=1}});this.initSplitButton()}};d.inherits(e,a)})();(function(){var f=t.editor.utils,d=t.editor.ui.Popup,c=t.editor.ui.Stateful,b=t.editor.ui.UIBase,a=t.editor.ui.CellAlignPicker=function(a){this.initOptions(a);this.initSelected();this.initCellAlignPicker()};a.prototype={initSelected:function(){var a={top:0,middle:1,bottom:2},b={left:0,center:1,right:2};this.selected&&(this.selectedIndex=3*a[this.selected.valign]+b[this.selected.align])},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){for(var a=["left","center","right"],b,c,d=[],f=0;9>f;f++)b=this.selectedIndex===f?' class\x3d"edui-cellalign-selected" ':"",c=f%3,0===c&&d.push("\x3ctr\x3e"),d.push('\x3ctd index\x3d"'+f+'" '+b+' stateful\x3e\x3cdiv class\x3d"edui-icon edui-'+a[c]+'"\x3e\x3c/div\x3e\x3c/td\x3e'),2===c&&d.push("\x3c/tr\x3e");return'\x3cdiv id\x3d"##" class\x3d"edui-cellalignpicker %%"\x3e\x3cdiv class\x3d"edui-cellalignpicker-body"\x3e\x3ctable onclick\x3d"$$._onClick(event);"\x3e'+d.join("")+"\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e"},getStateDom:function(){return this.target},_onClick:function(a){var b=a.target||a.srcElement;/icon/.test(b.className)&&(this.items[b.parentNode.getAttribute("index")].onclick(),d.postHide(a))},_UIBase_render:b.prototype.render};f.inherits(a,b);f.extend(a.prototype,c,!0)})();(function(){var f=t.editor.utils,d=t.editor.ui.Stateful,c=t.editor.ui.uiUtils,b=t.editor.ui.UIBase,a=t.editor.ui.PastePicker=function(a){this.initOptions(a);this.initPastePicker()};a.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'\x3cdiv class\x3d"edui-pasteicon" onclick\x3d"$$._onClick(this)"\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-pastecontainer"\x3e\x3cdiv class\x3d"edui-title"\x3e'+this.editor.getLang("pasteOpt")+'\x3c/div\x3e\x3cdiv class\x3d"edui-button"\x3e\x3cdiv title\x3d"'+this.editor.getLang("pasteSourceFormat")+'" onclick\x3d"$$.format(false)" stateful\x3e\x3cdiv class\x3d"edui-richtxticon"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv title\x3d"'+this.editor.getLang("tagFormat")+'" onclick\x3d"$$.format(2)" stateful\x3e\x3cdiv class\x3d"edui-tagicon"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv title\x3d"'+this.editor.getLang("pasteTextFormat")+'" onclick\x3d"$$.format(true)" stateful\x3e\x3cdiv class\x3d"edui-plaintxticon"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'},getStateDom:function(){return this.target},format:function(a){this.editor.ui._isTransfer=!0;this.editor.fireEvent("pasteTransfer",a)},_onClick:function(a){var b=g.getNextDomNode(a),d=c.getViewportRect().height,e=c.getClientRect(b);b.style.top=e.top+e.height>d?-e.height-a.offsetHeight+"px":"";/hidden/ig.test(g.getComputedStyle(b,"visibility"))?(b.style.visibility="visible",g.addClass(a,"edui-state-opened")):(b.style.visibility="hidden",g.removeClasses(a,"edui-state-opened"))},_UIBase_render:b.prototype.render};f.inherits(a,b);f.extend(a.prototype,d,!0)})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.ui.UIBase,b=t.editor.ui.Toolbar=function(a){this.initOptions(a);this.initToolbar()};b.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(a,b){void 0===b?this.items.push(a):this.items.splice(b,0,a)},getHtmlTpl:function(){for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'\x3cdiv id\x3d"##" class\x3d"edui-toolbar %%" onselectstart\x3d"return false;" onmousedown\x3d"return $$._onMouseDown(event, this);"\x3e'+a.join("")+"\x3c/div\x3e"},postRender:function(){for(var a=this.getDom(),b=0;b<this.items.length;b++)this.items[b].postRender();d.makeUnselectable(a)},_onMouseDown:function(a){a=(a=a.target||a.srcElement)&&a.tagName&&a.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1}};f.inherits(b,c)})();(function(){var f=t.editor.utils,d=t.editor.dom.domUtils,c=t.editor.ui.uiUtils,b=t.editor.ui.UIBase,a=t.editor.ui.Popup,e=t.editor.ui.Stateful,g=t.editor.ui.CellAlignPicker,l=t.editor.ui.Menu=function(a){this.initOptions(a);this.initMenu()},k={renderHtml:function(){return'\x3cdiv class\x3d"edui-menuitem edui-menuseparator"\x3e\x3cdiv class\x3d"edui-menuseparator-inner"\x3e\x3c/div\x3e\x3c/div\x3e'},postRender:function(){},queryAutoHide:function(){return!0}};l.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];"-"==b?this.items[a]=this.getSeparator():b instanceof p||(b.editor=this.editor,b.theme=this.editor.options.theme,this.items[a]=this.createItem(b))}},getSeparator:function(){return k},createItem:function(a){a.menu=this;return new p(a)},_Popup_getContentHtmlTpl:a.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'\x3cdiv class\x3d"%%-body"\x3e'+a.join("")+"\x3c/div\x3e"},_Popup_postRender:a.prototype.postRender,postRender:function(){for(var a=this,b=0;b<this.items.length;b++){var e=this.items[b];e.ownerMenu=this;e.postRender()}d.on(this.getDom(),"mouseover",function(b){b=b||event;b=b.relatedTarget||b.fromElement;var d=a.getDom();c.contains(d,b)||d===b||a.fireEvent("over")});this._Popup_postRender()},queryAutoHide:function(a){if(a){if(c.contains(this.getDom(),a))return!1;for(var b=0;b<this.items.length;b++)if(!1===this.items[b].queryAutoHide(a))return!1}},clearItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];clearTimeout(b._showingTimer);clearTimeout(b._closingTimer);b.subMenu&&b.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&d.remove(this.getDom());this.clearItems()},dispose:function(){this.destroy()}};f.inherits(l,a);var p=t.editor.ui.MenuItem=function(b){this.initOptions(b);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof l))if(b.className&&-1!=b.className.indexOf("aligntd")){var c=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new a({content:new g(this.subMenu),parentMenu:c,editor:c.editor,destroy:function(){this.getDom()&&d.remove(this.getDom())}});this.subMenu.addListener("postRenderAfter",function(){d.on(this.getDom(),"mouseover",function(){c.addState("opened")})})}else this.subMenu=new l(this.subMenu)};p.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"%%" stateful onclick\x3d"$$._onClick(event, this);"\x3e\x3cdiv class\x3d"%%-body"\x3e'+this.renderLabelHtml()+"\x3c/div\x3e\x3c/div\x3e"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a);a.subMenu&&a.delayShowSubMenu()});this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){a.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer);a._closingTimer=null;a.addState("opened")}),this.ownerMenu.addListener("hide",function(){a.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(b,c){c!==a&&a.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(b){return b&&c.contains(a.getDom(),b)?!1:this._bakQueryAutoHide(b)});this.getDom().style.tabIndex="-1";c.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;a.isDisabled()||(a.addState("opened"),clearTimeout(a._showingTimer),clearTimeout(a._closingTimer),a._closingTimer=null,a._showingTimer=setTimeout(function(){a.showSubMenu()},250))},delayHideSubMenu:function(){var a=this;a.isDisabled()||(a.removeState("opened"),clearTimeout(a._showingTimer),a._closingTimer||(a._closingTimer=setTimeout(function(){a.hasState("opened")||a.hideSubMenu();a._closingTimer=null},400)))},renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-box edui-icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-box edui-label %%-label"\x3e'+(this.label||"")+"\x3c/div\x3e"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(a)},_onClick:function(b,c){this.hasState("disabled")||!1!==this.fireEvent("click",b,c)&&(this.subMenu?this.showSubMenu():a.postHide(b))},showSubMenu:function(){var a=c.getClientRect(this.getDom());a.right-=5;a.left+=2;a.width-=7;a.top-=4;a.bottom+=4;a.height+=8;this.subMenu.showAnchorRect(a,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}};f.inherits(p,b);f.extend(p.prototype,e,!0)})();(function(){var f=t.editor.utils,d=t.editor.ui.uiUtils,c=t.editor.ui.Menu,b=t.editor.ui.SplitButton,a=t.editor.ui.Combox=function(a){this.initOptions(a);this.initCombox()};a.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var a=this;this.items=this.items||[];for(var b=0;b<this.items.length;b++){var d=this.items[b];d.uiName="listitem";d.index=b;d.onclick=function(){a.selectByIndex(this.index)}}this.popup=new c({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this});this.initSplitButton()},_SplitButton_postRender:b.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var a=d.getClientRect(this.getDom());a.top+=1;--a.bottom;a.height-=2;this.popup.showAnchorRect(a)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);-1!=b?(this.selectedIndex=b,this.setLabel(this.items[b].label),this.value=this.items[b].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(a)),this.value=a)},setLabel:function(a){this.label=this.getDom("button_body").innerHTML=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++)if(a==this.items[b].value)return b;return-1},getItem:function(a){return this.items[a]},selectByIndex:function(a){a<this.items.length&&!1!==this.fireEvent("select",a)&&(this.selectedIndex=a,this.value=this.items[a].value,this.setLabel(this.items[a].label))}};f.inherits(a,b)})();(function(){var f=t.editor.utils,d=t.editor.dom.domUtils,c=t.editor.ui.uiUtils,b=t.editor.ui.Mask,a=t.editor.ui.UIBase,e=t.editor.ui.Button,g=t.editor.ui.Dialog=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className="edui-for-"+b);c&&(a.cssRules=".edui-default .edui-for-"+b+" .edui-dialog-content  {"+c+"}")}this.initOptions(f.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(a,b){return b?this.onok():this.oncancel()},holdScroll:!1},a));this.initDialog()},l,k,p;g.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var a=this,c=this.editor.options.theme;this.cssRules&&f.cssRule("edui-customize-"+this.name+"-style",this.cssRules);this.initUIBase();this.modalMask=l||(l=new b({className:"edui-dialog-modalmask",theme:c,onclick:function(){p&&p.close(!1)}}));this.dragMask=k||(k=new b({className:"edui-dialog-dragmask",theme:c}));this.closeButton=new e({className:"edui-dialog-closebutton",title:a.closeDialog,theme:c,onclick:function(){a.close(!1)}});this.fullscreen&&this.initResizeEvent();if(this.buttons)for(c=0;c<this.buttons.length;c++)this.buttons[c]instanceof e||(this.buttons[c]=new e(f.extend(this.buttons[c],{editor:this.editor},!0)))},initResizeEvent:function(){var a=this;d.on(window,"resize",function(){a._hidden||void 0===a._hidden||(a.__resizeTimer&&window.clearTimeout(a.__resizeTimer),a.__resizeTimer=window.setTimeout(function(){a.__resizeTimer=null;var b=a.getDom(),d=a.getDom("content"),e=UE.ui.uiUtils.getClientRect(b),f=UE.ui.uiUtils.getClientRect(d),g=c.getViewportRect();d.style.width=g.width-e.width+f.width+"px";d.style.height=g.height-e.height+f.height+"px";b.style.width=g.width+"px";b.style.height=g.height+"px";a.fireEvent("resize")},100))})},fitSize:function(){var a=this.getDom("body"),b=this.mesureSize();a.style.width=b.width+"px";a.style.height=b.height+"px";return b},safeSetOffset:function(a){var b=this.getDom(),d=c.getViewportRect(),e=c.getClientRect(b),f=a.left;f+e.width>d.right&&(f=d.right-e.width);a=a.top;a+e.height>d.bottom&&(a=d.bottom-e.height);b.style.left=Math.max(f,0)+"px";b.style.top=Math.max(a,0)+"px"},showAtCenter:function(){var a=c.getViewportRect();if(this.fullscreen){var b=this.getDom(),e=this.getDom("content");b.style.display="block";var f=UE.ui.uiUtils.getClientRect(b),g=UE.ui.uiUtils.getClientRect(e);b.style.left="-100000px";e.style.width=a.width-f.width+g.width+"px";e.style.height=a.height-f.height+g.height+"px";b.style.width=a.width+"px";b.style.height=a.height+"px";b.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}else this.getDom().style.display="",e=this.fitSize(),f=this.getDom("titlebar").offsetHeight|0,b=a.width/2-e.width/2,a=a.height/2-(e.height-f)/2-f,e=this.getDom(),this.safeSetOffset({left:Math.max(b|0,0),top:Math.max(a|0,0)}),d.hasClass(e,"edui-state-centered")||(e.className+=" edui-state-centered");this._show()},getContentHtml:function(){var a="";"string"==typeof this.content?a=this.content:this.iframeUrl&&(a='\x3cspan id\x3d"'+this.id+'_contmask" class\x3d"dialogcontmask"\x3e\x3c/span\x3e\x3ciframe id\x3d"'+this.id+'_iframe" class\x3d"%%-iframe" height\x3d"100%" width\x3d"100%" frameborder\x3d"0" src\x3d"'+this.iframeUrl+'"\x3e\x3c/iframe\x3e');return a},getHtmlTpl:function(){var a="";if(this.buttons){for(var a=[],b=0;b<this.buttons.length;b++)a[b]=this.buttons[b].renderHtml();a='\x3cdiv class\x3d"%%-foot"\x3e\x3cdiv id\x3d"##_buttons" class\x3d"%%-buttons"\x3e'+a.join("")+"\x3c/div\x3e\x3c/div\x3e"}return'\x3cdiv id\x3d"##" class\x3d"%%"\x3e\x3cdiv '+(this.fullscreen?'class\x3d"%%-wrap edui-dialog-fullscreen-flag"':'class\x3d"%%"')+'\x3e\x3cdiv id\x3d"##_body" class\x3d"%%-body"\x3e\x3cdiv class\x3d"%%-shadow"\x3e\x3c/div\x3e\x3cdiv id\x3d"##_titlebar" class\x3d"%%-titlebar"\x3e\x3cdiv class\x3d"%%-draghandle" onmousedown\x3d"$$._onTitlebarMouseDown(event, this);"\x3e\x3cspan class\x3d"%%-caption"\x3e'+(this.title||"")+"\x3c/span\x3e\x3c/div\x3e"+this.closeButton.renderHtml()+'\x3c/div\x3e\x3cdiv id\x3d"##_content" class\x3d"%%-content"\x3e'+(this.autoReset?"":this.getContentHtml())+"\x3c/div\x3e"+a+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide());this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var a=this;this.addListener("show",function(){a.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){a.modalMask.hide()});if(this.buttons)for(var b=0;b<this.buttons.length;b++)this.buttons[b].postRender();d.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a.safeSetOffset(c.getClientRect(a.getDom()))})});this._hide()},mesureSize:function(){var a=this.getDom("body"),b=c.getClientRect(this.getDom("content")).width;a.style.width=b;return c.getClientRect(a)},_onTitlebarMouseDown:function(a,b){if(this.draggable){var e;c.getViewportRect();var f=this;c.startDrag(a,{ondragstart:function(){e=c.getClientRect(f.getDom());f.getDom("contmask").style.visibility="visible";f.dragMask.show(f.getDom().style.zIndex-1)},ondragmove:function(a,b){f.safeSetOffset({left:e.left+a,top:e.top+b})},ondragstop:function(){f.getDom("contmask").style.visibility="hidden";d.removeClasses(f.getDom(),["edui-state-centered"]);f.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),t.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var a=this.getDom();a.style.display="none";a.style.zIndex="";a.style.width="";a.style.height="";this._hidden=!0;this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(m){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(m){}p=this},_onCloseButtonClick:function(a,b){this.close(!1)},close:function(a){if(!1!==this.fireEvent("close",a)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext);this._hide();a=this.getDom("content");var b=this.getDom("iframe");a&&b&&((b=b.contentDocument||b.contentWindow.document)&&(b.body.innerHTML=""),d.remove(a))}}};f.inherits(g,a)})();(function(){var f=t.editor.utils,d=t.editor.ui.Menu,c=t.editor.ui.SplitButton,b=t.editor.ui.MenuButton=function(a){this.initOptions(a);this.initMenuButton()};b.prototype={initMenuButton:function(){var a=this;this.uiName="menubutton";this.popup=new d({items:a.items,className:a.className,editor:a.editor});this.popup.addListener("show",function(){for(var b=0;b<this.items.length;b++)this.items[b].removeState("checked"),this.items[b].value==a._value&&(this.items[b].addState("checked"),this.value=a._value)});this.initSplitButton()},setValue:function(a){this._value=a}};f.inherits(b,c)})();(function(){var f=t.editor.utils,d=t.editor.ui.Popup,c=t.editor.ui.SplitButton,b=t.editor.ui.MultiMenuPop=function(a){this.initOptions(a);this.initMultiMenu()};b.prototype={initMultiMenu:function(){var a=this;this.popup=new d({content:"",editor:a.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='\x3ciframe id\x3d"'+a.id+'_iframe" src\x3d"'+a.iframeUrl+'" frameborder\x3d"0"\x3e\x3c/iframe\x3e',a.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*a.editor.container.style.zIndex+1))}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};f.inherits(b,c)})();(function(){function f(a){if(!e.findParent(a.target||a.srcElement,function(a){return e.hasClass(a,"edui-shortcutmenu")||e.hasClass(a,"edui-popup")},!0)){a=0;for(var b;b=g[a++];)b.hide()}}var d=t.editor.ui,c=d.UIBase,b=d.uiUtils,a=t.editor.utils,e=t.editor.dom.domUtils,g=[],l,k=!1,p=d.ShortCutMenu=function(a){this.initOptions(a);this.initShortCutMenu()};p.postHide=f;p.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();g.push(this)},initEvent:function(){var a=this,b=a.editor.document;e.on(b,"mousemove",function(b){if(!1===a.isHidden&&!a.getSubMenuMark()&&"contextmenu"!=a.eventType){var c=!0,d=a.getDom(),e=d.offsetWidth/2+a.SPACE,f=d.offsetHeight/2,g=Math.abs(b.screenX-a.left),k=Math.abs(b.screenY-a.top);clearTimeout(l);l=setTimeout(function(){0<k&&k<f?a.setOpacity(d,"1"):k>f&&k<f+70?(a.setOpacity(d,"0.5"),c=!1):k>f+70&&k<f+140&&a.hide();c&&0<g&&g<e?a.setOpacity(d,"1"):g>e&&g<e+70?a.setOpacity(d,"0.5"):g>e+70&&g<e+140&&a.hide()})}});if(r.chrome)e.on(b,"mouseout",function(b){b=b.relatedTarget||b.toElement;null!=b&&"HTML"!=b.tagName||a.hide()});a.editor.addListener("afterhidepop",function(){a.isHidden||(k=!0)})},initItems:function(){if(a.isArray(this.items))for(var b=0,c=this.items.length;b<c;b++){var e=this.items[b].toLowerCase();d[e]&&(this.items[b]=new d[e](this.editor),this.items[b].className+=" edui-shortcutsubmenu ")}},setOpacity:function(a,b){r.ie&&9>r.version?a.style.filter="alpha(opacity \x3d "+100*parseFloat(b)+");":a.style.opacity=b},getSubMenuMark:function(){k=!1;for(var a=b.getFixedLayer(),a=e.getElementsByTagName(a,"div",function(a){return e.hasClass(a,"edui-shortcutsubmenu edui-popup")}),c=0,d;d=a[c++];)"none"!=d.style.display&&(k=!0);return k},show:function(a,c){function d(a){0>a.left&&(a.left=0);0>a.top&&(a.top=0);k.style.cssText="position:absolute;left:"+a.left+"px;top:"+a.top+"px;"}function f(a){a.tagName||(a=a.getDom());g.left=parseInt(a.style.left);g.top=parseInt(a.style.top);g.top-=k.offsetHeight+15;d(g)}var g={},k=this.getDom(),h=b.getFixedLayer();this.eventType=a.type;k.style.cssText="display:block;left:-9999px";if("contextmenu"==a.type&&c){var l=e.getElementsByTagName(h,"div","edui-contextmenu")[0];l?f(l):this.editor.addListener("aftershowcontextmenu",function(a,b){f(b)})}else g=b.getViewportOffsetByEvent(a),g.top-=k.offsetHeight+this.SPACE,g.left+=this.SPACE+20,d(g),this.setOpacity(k,.2);this.isHidden=!1;this.left=a.screenX+k.offsetWidth/2-this.SPACE;this.top=a.screenY-k.offsetHeight/2-this.SPACE;this.editor&&(k.style.zIndex=1*this.editor.container.style.zIndex+10,h.style.zIndex=k.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none");this.isHidden=!0},postRender:function(){if(a.isArray(this.items))for(var b=0,c;c=this.items[b++];)c.postRender()},getHtmlTpl:function(){var b;if(a.isArray(this.items)){b=[];for(var c=0;c<this.items.length;c++)b[c]=this.items[c].renderHtml();b=b.join("")}else b=this.items;return'\x3cdiv id\x3d"##" class\x3d"%% edui-toolbar" data-src\x3d"shortcutmenu" onmousedown\x3d"return false;" onselectstart\x3d"return false;" \x3e'+b+"\x3c/div\x3e"}};a.inherits(p,c);e.on(document,"mousedown",function(a){f(a)});e.on(window,"scroll",function(a){f(a)})})();(function(){var f=t.editor.utils,d=t.editor.ui.UIBase,c=t.editor.ui.Breakline=function(b){this.initOptions(b);this.initSeparator()};c.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"\x3cbr/\x3e"}};f.inherits(c,d)})();(function(){var f=t.editor.utils,d=t.editor.dom.domUtils,c=t.editor.ui.UIBase,b=t.editor.ui.Message=function(a){this.initOptions(a);this.initMessage()};b.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"edui-message %%"\x3e \x3cdiv id\x3d"##_closer" class\x3d"edui-message-closer"\x3e\u00d7\x3c/div\x3e \x3cdiv id\x3d"##_body" class\x3d"edui-message-body edui-message-type-info"\x3e \x3ciframe style\x3d"position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder\x3d"0" width\x3d"100%" height\x3d"100%" src\x3d"about:blank"\x3e\x3c/iframe\x3e \x3cdiv class\x3d"edui-shadow"\x3e\x3c/div\x3e \x3cdiv id\x3d"##_content" class\x3d"edui-message-content"\x3e  \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e'},reset:function(a){var b=this;a.keepshow||(clearTimeout(this.timer),b.timer=setTimeout(function(){b.hide()},a.timeout||4E3));void 0!==a.content&&b.setContent(a.content);void 0!==a.type&&b.setType(a.type);b.show()},postRender:function(){var a=this,b=this.getDom("closer");b&&d.on(b,"click",function(){a.hide()})},setContent:function(a){this.getDom("content").innerHTML=a},setType:function(a){a=a||"info";var b=this.getDom("body");b.className=b.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+a)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var a=this.getDom("body").match(/edui-message-type-([\w-]+)/);return a?a[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var a=this.getDom();a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a))}};f.inherits(b,c)})();(function(){var f=t.editor.utils,d=t.editor.ui,c=d.Dialog;d.buttons={};d.Dialog=function(a){var b=new c(a);b.addListener("hide",function(){if(b.editor){var a=b.editor;try{if(r.gecko){var c=a.window.scrollY,d=a.window.scrollX;a.body.focus();a.window.scrollTo(d,c)}else a.focus()}catch(y){}}});return b};for(var b={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html#ak\x3d"+uedtiro_baidumap_ak,gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},a="undo redo formatmatch bold italic underline fontborder touppercase tolowercase strikethrough subscript superscript source indent outdent blockquote pasteplain pagebreak selectall print horizontal removeformat time date unlink insertparagraphbeforetable insertrow insertcol mergeright mergedown deleterow deletecol splittorows splittocols splittocells mergecells deletetable drafts".split(" "),e=0,g;g=a[e++];)g=g.toLowerCase(),d[g]=function(a){return function(b){var c=new d.Button({className:"edui-for-"+a,title:b.options.labelMap[a]||b.getLang("labelMap."+a)||"",onclick:function(){b.execCommand(a)},theme:b.options.theme,showText:!1});d.buttons[a]=c;b.addListener("selectionchange",function(d,e,f){d=b.queryCommandState(a);-1==d?(c.setDisabled(!0),c.setChecked(!1)):f||(c.setDisabled(!1),c.setChecked(d))});return c}}(g);d.cleardoc=function(a){var b=new d.Button({className:"edui-for-cleardoc",title:a.options.labelMap.cleardoc||a.getLang("labelMap.cleardoc")||"",theme:a.options.theme,onclick:function(){confirm(a.getLang("confirmClear"))&&a.execCommand("cleardoc")}});d.buttons.cleardoc=b;a.addListener("selectionchange",function(){b.setDisabled(-1==a.queryCommandState("cleardoc"))});return b};var a={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]},l;for(l in a)(function(a,b){for(var c=0,e;e=b[c++];)(function(b){d[a.replace("float","")+b]=function(c){var e=new d.Button({className:"edui-for-"+a.replace("float","")+b,title:c.options.labelMap[a.replace("float","")+b]||c.getLang("labelMap."+a.replace("float","")+b)||"",theme:c.options.theme,onclick:function(){c.execCommand(a,b)}});d.buttons[a]=e;c.addListener("selectionchange",function(d,f,g){e.setDisabled(-1==c.queryCommandState(a));e.setChecked(c.queryCommandValue(a)==b&&!g)});return e}})(e)})(l,a[l]);for(e=0;g=["backcolor","forecolor"][e++];)d[g]=function(a){return function(b){var c=new d.ColorButton({className:"edui-for-"+a,color:"default",title:b.options.labelMap[a]||b.getLang("labelMap."+a)||"",editor:b,onpickcolor:function(c,d){b.execCommand(a,d)},onpicknocolor:function(){b.execCommand(a,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){b.execCommand(a,this.color)}});d.buttons[a]=c;b.addListener("selectionchange",function(){c.setDisabled(-1==b.queryCommandState(a))});return c}}(g);a={noOk:["searchreplace","help","spechars","webapp","preview"],ok:"attachment anchor link insertimage map gmap insertframe wordimage insertvideo insertframe edittip edittable edittd scrawl template music background charts".split(" ")};for(l in a)(function(a,c){for(var e=0,g;g=c[e++];)r.opera&&"searchreplace"===g||function(c){d[c]=function(e,g,k){g=g||(e.options.iframeUrlMap||{})[c]||b[c];k=e.options.labelMap[c]||e.getLang("labelMap."+c)||"";var h;g&&(h=new d.Dialog(f.extend({iframeUrl:e.ui.mapUrl(g),editor:e,className:"edui-for-"+c,title:k,holdScroll:"insertimage"===c,fullscreen:/charts|preview/.test(c),closeDialog:e.getLang("closeDialog")},"ok"==a?{buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){h.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){h.close(!1)}}]}:{})),e.ui._dialogs[c+"Dialog"]=h);var l=new d.Button({className:"edui-for-"+c,title:k,onclick:function(){if(h)switch(c){case "wordimage":var a=e.execCommand("wordimage");a&&a.length&&(h.render(),h.open());break;case "scrawl":-1!=e.queryCommandState("scrawl")&&(h.render(),h.open());break;default:h.render(),h.open()}},theme:e.options.theme,disabled:"scrawl"==c&&-1==e.queryCommandState("scrawl")||"charts"==c});d.buttons[c]=l;e.addListener("selectionchange",function(){if(!(c in{edittable:1})){var a=e.queryCommandState(c);l.getDom()&&(l.setDisabled(-1==a),l.setChecked(a))}});return l}}(g.toLowerCase())})(l,a[l]);d.snapscreen=function(a,c,e){e=a.options.labelMap.snapscreen||a.getLang("labelMap.snapscreen")||"";var f=new d.Button({className:"edui-for-snapscreen",title:e,onclick:function(){a.execCommand("snapscreen")},theme:a.options.theme});d.buttons.snapscreen=f;if(c=c||(a.options.iframeUrlMap||{}).snapscreen||b.snapscreen){var g=new d.Dialog({iframeUrl:a.ui.mapUrl(c),editor:a,className:"edui-for-snapscreen",title:e,buttons:[{className:"edui-okbutton",label:a.getLang("ok"),editor:a,onclick:function(){g.close(!0)}},{className:"edui-cancelbutton",label:a.getLang("cancel"),editor:a,onclick:function(){g.close(!1)}}]});g.render();a.ui._dialogs.snapscreenDialog=g}a.addListener("selectionchange",function(){f.setDisabled(-1==a.queryCommandState("snapscreen"))});return f};d.insertcode=function(a,b,c){b=a.options.insertcode||[];c=a.options.labelMap.insertcode||a.getLang("labelMap.insertcode")||"";var e=[];f.each(b,function(b,c){e.push({label:b,value:c,theme:a.options.theme,renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-label %%-label" \x3e'+(this.label||"")+"\x3c/div\x3e"}})});var g=new d.Combox({editor:a,items:e,onselect:function(b,c){a.execCommand("insertcode",this.items[c].value)},onbuttonclick:function(){this.showPopup()},title:c,initValue:c,className:"edui-for-insertcode",indexByValue:function(a){if(a)for(var b=0,c;c=this.items[b];b++)if(-1!=c.value.indexOf(a))return b;return-1}});d.buttons.insertcode=g;a.addListener("selectionchange",function(b,d,e){e||(-1==a.queryCommandState("insertcode")?g.setDisabled(!0):(g.setDisabled(!1),(b=a.queryCommandValue("insertcode"))?(b&&(b=b.replace(/['"]/g,"").split(",")[0]),g.setValue(b)):g.setValue(c)))});return g};d.fontfamily=function(a,b,c){b=a.options.fontfamily||[];c=a.options.labelMap.fontfamily||a.getLang("labelMap.fontfamily")||"";if(b.length){for(var e=0,g,k=[];g=b[e];e++){var h=a.getLang("fontfamily")[g.name]||"";(function(b,c){k.push({label:b,value:c,theme:a.options.theme,renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-label %%-label" style\x3d"font-family:'+f.unhtml(this.value)+'"\x3e'+(this.label||"")+"\x3c/div\x3e"}})})(g.label||h,g.val)}var l=new d.Combox({editor:a,items:k,onselect:function(b,c){a.execCommand("FontFamily",this.items[c].value)},onbuttonclick:function(){this.showPopup()},title:c,initValue:c,className:"edui-for-fontfamily",indexByValue:function(a){if(a)for(var b=0,c;c=this.items[b];b++)if(-1!=c.value.indexOf(a))return b;return-1}});d.buttons.fontfamily=l;a.addListener("selectionchange",function(b,c,d){d||(-1==a.queryCommandState("FontFamily")?l.setDisabled(!0):(l.setDisabled(!1),(b=a.queryCommandValue("FontFamily"))&&(b=b.replace(/['"]/g,"").split(",")[0]),l.setValue(b)))});return l}};d.fontsize=function(a,b,c){c=a.options.labelMap.fontsize||a.getLang("labelMap.fontsize")||"";b=b||a.options.fontsize||[];if(b.length){for(var e=[],f=0;f<b.length;f++){var g=b[f]+"px";e.push({label:g,value:g,theme:a.options.theme,renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-label %%-label" style\x3d"line-height:1;font-size:'+this.value+'"\x3e'+(this.label||"")+"\x3c/div\x3e"}})}var k=new d.Combox({editor:a,items:e,title:c,initValue:c,onselect:function(b,c){a.execCommand("FontSize",this.items[c].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});d.buttons.fontsize=k;a.addListener("selectionchange",function(b,c,d){d||(-1==a.queryCommandState("FontSize")?k.setDisabled(!0):(k.setDisabled(!1),k.setValue(a.queryCommandValue("FontSize"))))});return k}};d.paragraph=function(a,b,c){c=a.options.labelMap.paragraph||a.getLang("labelMap.paragraph")||"";b=a.options.paragraph||[];if(!f.isEmptyObject(b)){var e=[],g;for(g in b)e.push({value:g,label:b[g]||a.getLang("paragraph")[g],theme:a.options.theme,renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-label %%-label"\x3e\x3cspan class\x3d"edui-for-'+this.value+'"\x3e'+(this.label||"")+"\x3c/span\x3e\x3c/div\x3e"}});var k=new d.Combox({editor:a,items:e,title:c,initValue:c,className:"edui-for-paragraph",onselect:function(b,c){a.execCommand("Paragraph",this.items[c].value)},onbuttonclick:function(){this.showPopup()}});d.buttons.paragraph=k;a.addListener("selectionchange",function(b,c,d){d||(-1==a.queryCommandState("Paragraph")?k.setDisabled(!0):(k.setDisabled(!1),b=a.queryCommandValue("Paragraph"),-1!=k.indexByValue(b)?k.setValue(b):k.setValue(k.initValue)))});return k}};d.customstyle=function(a){var b=a.options.customstyle||[],c=a.options.labelMap.customstyle||a.getLang("labelMap.customstyle")||"";if(b.length){for(var e=a.getLang("customstyle"),f=0,g=[],k;k=b[f++];)(function(b){var c={};c.label=b.label?b.label:e[b.name];c.style=b.style;c.className=b.className;c.tag=b.tag;g.push({label:c.label,value:c,theme:a.options.theme,renderLabelHtml:function(){return'\x3cdiv class\x3d"edui-label %%-label"\x3e\x3c'+c.tag+" "+(c.className?' class\x3d"'+c.className+'"':"")+(c.style?' style\x3d"'+c.style+'"':"")+"\x3e"+c.label+"\x3c/"+c.tag+"\x3e\x3c/div\x3e"}})})(k);var h=new d.Combox({editor:a,items:g,title:c,initValue:c,className:"edui-for-customstyle",onselect:function(b,c){a.execCommand("customstyle",this.items[c].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(a){for(var b=0,c;c=this.items[b++];)if(c.label==a)return b-1;return-1}});d.buttons.customstyle=h;a.addListener("selectionchange",function(b,c,d){d||(-1==a.queryCommandState("customstyle")?h.setDisabled(!0):(h.setDisabled(!1),b=a.queryCommandValue("customstyle"),-1!=h.indexByValue(b)?h.setValue(b):h.setValue(h.initValue)))});return h}};d.inserttable=function(a,b,c){c=a.options.labelMap.inserttable||a.getLang("labelMap.inserttable")||"";var e=new d.TableButton({editor:a,title:c,className:"edui-for-inserttable",onpicktable:function(b,c,d){a.execCommand("InsertTable",{numRows:d,numCols:c,border:1})},onbuttonclick:function(){this.showPopup()}});d.buttons.inserttable=e;a.addListener("selectionchange",function(){e.setDisabled(-1==a.queryCommandState("inserttable"))});return e};d.lineheight=function(a){var b=a.options.lineheight||[];if(b.length){for(var c=0,e,f=[];e=b[c++];)f.push({label:e,value:e,theme:a.options.theme,onclick:function(){a.execCommand("lineheight",this.value)}});var g=new d.MenuButton({editor:a,className:"edui-for-lineheight",title:a.options.labelMap.lineheight||a.getLang("labelMap.lineheight")||"",items:f,onbuttonclick:function(){var b=a.queryCommandValue("LineHeight")||this.value;a.execCommand("LineHeight",b)}});d.buttons.lineheight=g;a.addListener("selectionchange",function(){var b=a.queryCommandState("LineHeight");if(-1==b)g.setDisabled(!0);else{g.setDisabled(!1);var c=a.queryCommandValue("LineHeight");c&&g.setValue((c+"").replace(/cm/,""));g.setChecked(b)}});return g}};l=["top","bottom"];for(a=0;e=l[a++];)(function(a){d["rowspacing"+a]=function(b){var c=b.options["rowspacing"+a]||[];if(!c.length)return null;for(var e=0,f,g=[];f=c[e++];)g.push({label:f,value:f,theme:b.options.theme,onclick:function(){b.execCommand("rowspacing",this.value,a)}});var k=new d.MenuButton({editor:b,className:"edui-for-rowspacing"+a,title:b.options.labelMap["rowspacing"+a]||b.getLang("labelMap.rowspacing"+a)||"",items:g,onbuttonclick:function(){var c=b.queryCommandValue("rowspacing",a)||this.value;b.execCommand("rowspacing",c,a)}});d.buttons[a]=k;b.addListener("selectionchange",function(){var c=b.queryCommandState("rowspacing",a);if(-1==c)k.setDisabled(!0);else{k.setDisabled(!1);var d=b.queryCommandValue("rowspacing",a);d&&k.setValue((d+"").replace(/%/,""));k.setChecked(c)}});return k}})(e);l=["insertorderedlist","insertunorderedlist"];for(a=0;e=l[a++];)(function(a){d[a]=function(b){var c=b.options[a],e=function(){b.execCommand(a,this.value)},f=[],g;for(g in c)f.push({label:c[g]||b.getLang()[a][g]||"",value:g,theme:b.options.theme,onclick:e});var k=new d.MenuButton({editor:b,className:"edui-for-"+a,title:b.getLang("labelMap."+a)||"",items:f,onbuttonclick:function(){var c=b.queryCommandValue(a)||this.value;b.execCommand(a,c)}});d.buttons[a]=k;b.addListener("selectionchange",function(){var c=b.queryCommandState(a);if(-1==c)k.setDisabled(!0);else{k.setDisabled(!1);var d=b.queryCommandValue(a);k.setValue(d);k.setChecked(c)}});return k}})(e);d.fullscreen=function(a,b){b=a.options.labelMap.fullscreen||a.getLang("labelMap.fullscreen")||"";var c=new d.Button({className:"edui-for-fullscreen",title:b,theme:a.options.theme,onclick:function(){a.ui&&a.ui.setFullScreen(!a.ui.isFullScreen());this.setChecked(a.ui.isFullScreen())}});d.buttons.fullscreen=c;a.addListener("selectionchange",function(){var b=a.queryCommandState("fullscreen");c.setDisabled(-1==b);c.setChecked(a.ui.isFullScreen())});return c};d.emotion=function(a,c){var e=new d.MultiMenuPop({title:a.options.labelMap.emotion||a.getLang("labelMap.emotion")||"",editor:a,className:"edui-for-emotion",iframeUrl:a.ui.mapUrl(c||(a.options.iframeUrlMap||{}).emotion||b.emotion)});d.buttons.emotion=e;a.addListener("selectionchange",function(){e.setDisabled(-1==a.queryCommandState("emotion"))});return e};d.autotypeset=function(a){var b=new d.AutoTypeSetButton({editor:a,title:a.options.labelMap.autotypeset||a.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){a.execCommand("autotypeset")}});d.buttons.autotypeset=b;a.addListener("selectionchange",function(){b.setDisabled(-1==a.queryCommandState("autotypeset"))});return b};d.simpleupload=function(a){var b=new d.Button({className:"edui-for-simpleupload",title:a.options.labelMap.simpleupload||a.getLang("labelMap.simpleupload")||"",onclick:function(){},theme:a.options.theme,showText:!1});d.buttons.simpleupload=b;a.addListener("ready",function(){var c=b.getDom("body").children[0];a.fireEvent("simpleuploadbtnready",c)});a.addListener("selectionchange",function(c,d,e){c=a.queryCommandState("simpleupload");-1==c?(b.setDisabled(!0),b.setChecked(!1)):e||(b.setDisabled(!1),b.setChecked(c))});return b}})();(function(){function f(a){this.initOptions(a);this.initEditorUI()}var d=t.editor.utils,c=t.editor.ui.uiUtils,b=t.editor.ui.UIBase,a=t.editor.dom.domUtils,e=[];f.prototype={uiName:"editor",initEditorUI:function(){function b(a,b){a.setOpt({wordCount:!0,maximumWords:1E4,wordCountMsg:a.options.wordCountMsg||a.getLang("wordCountMsg"),wordOverFlowMsg:a.options.wordOverFlowMsg||a.getLang("wordOverFlowMsg")});var c=a.options,d=c.maximumWords,e=c.wordCountMsg,f=c.wordOverFlowMsg,g=b.getDom("wordcount");c.wordCount&&(c=a.getContentLength(!0),c>d?(g.innerHTML=f,a.fireEvent("wordcountoverflow")):g.innerHTML=e.replace("{#leave}",d-c).replace("{#count}",c))}this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var c=this.editor,d=this;c.addListener("ready",function(){c.getDialog=function(a){return c.ui._dialogs[a+"Dialog"]};a.on(c.window,"scroll",function(a){t.editor.ui.Popup.postHide(a)});c.ui._actualFrameWidth=c.options.initialFrameWidth;UE.browser.ie&&6===UE.browser.version&&c.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0);c.options.elementPathEnabled&&(c.ui.getDom("elementpath").innerHTML='\x3cdiv class\x3d"edui-editor-breadcrumb"\x3e'+c.getLang("elementPathTip")+":\x3c/div\x3e");c.options.wordCount&&(a.on(c.document,"click",function(){b(c,d);a.un(c.document,"click",arguments.callee)}),c.ui.getDom("wordcount").innerHTML=c.getLang("wordCountTip"));c.ui._scale();c.options.scaleEnabled?(c.autoHeightEnabled&&c.disableAutoHeight(),d.enableScale()):d.disableScale();c.options.elementPathEnabled||c.options.wordCount||c.options.scaleEnabled||(c.ui.getDom("elementpath").style.display="none",c.ui.getDom("wordcount").style.display="none",c.ui.getDom("scale").style.display="none");c.selection.isFocus()&&c.fireEvent("selectionchange",!1,!0)});c.addListener("mousedown",function(a,b){t.editor.ui.Popup.postHide(b,b.target||b.srcElement);t.editor.ui.ShortCutMenu.postHide(b)});c.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(c);c.getDialog("edittip").open()});var e,f=!1,g;c.addListener("afterpaste",function(){c.queryCommandState("pasteplain")||(t.editor.ui.PastePicker&&(e=new t.editor.ui.Popup({content:new t.editor.ui.PastePicker({editor:c}),editor:c,className:"edui-wordpastepop"}),e.render()),f=!0)});c.addListener("afterinserthtml",function(){clearTimeout(g);g=setTimeout(function(){if(e&&(f||c.ui._isTransfer)){if(e.isHidden()){var b=a.createElement(c.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});c.selection.getRange().insertNode(b);var d=W(b,"firstChild","previousSibling");d&&e.showAnchor(3==d.nodeType?d.parentNode:d);a.remove(b)}else e.show();delete c.ui._isTransfer;f=!1}},200)});c.addListener("contextmenu",function(a,b){t.editor.ui.Popup.postHide(b)});c.addListener("keydown",function(a,b){e&&e.dispose(b);var c=b.keyCode||b.which;if(b.altKey&&90==c)UE.ui.buttons.fullscreen.onclick()});c.addListener("wordcount",function(a){b(this,d)});c.addListener("selectionchange",function(){if(c.options.elementPathEnabled)d[(-1==c.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"]();if(c.options.scaleEnabled)d[(-1==c.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var h=new t.editor.ui.Popup({editor:c,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();c.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(a){this.hide();c.ui._dialogs[a]&&c.ui._dialogs[a].open()},_onImgSetFloat:function(a){this.hide();c.execCommand("imagefloat",a)},_setIframeAlign:function(b){var c=h.anchorEl,d=c.cloneNode(!0);switch(b){case -2:d.setAttribute("align","");break;case -1:d.setAttribute("align","left");break;case 1:d.setAttribute("align","right")}c.parentNode.insertBefore(d,c);a.remove(c);h.anchorEl=d;h.showAnchor(h.anchorEl)},_updateIframe:function(){var b=c._iframe=h.anchorEl;a.hasClass(b,"ueditor_baidumap")?(c.selection.getRange().selectNode(b).select(),c.ui._dialogs.mapDialog.open()):c.ui._dialogs.insertframeDialog.open();h.hide()},_onRemoveButtonClick:function(a){c.execCommand(a);this.hide()},queryAutoHide:function(b){return b&&b.ownerDocument==c.document&&("img"==b.tagName.toLowerCase()||a.findParentByTagName(b,"a",!0))?b!==h.anchorEl:t.editor.ui.Popup.prototype.queryAutoHide.call(this,b)}});h.render();c.options.imagePopup&&(c.addListener("mouseover",function(a,b){b=b||window.event;var d=b.target||b.srcElement;if(c.ui._dialogs.insertframeDialog&&/iframe/ig.test(d.tagName)){var e=h.formatHtml("\x3cnobr\x3e"+c.getLang("property")+': \x3cspan onclick\x3d$$._setIframeAlign(-2) class\x3d"edui-clickable"\x3e'+c.getLang("default")+'\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._setIframeAlign(-1) class\x3d"edui-clickable"\x3e'+c.getLang("justifyleft")+'\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._setIframeAlign(1) class\x3d"edui-clickable"\x3e'+c.getLang("justifyright")+'\x3c/span\x3e\x26nbsp;\x26nbsp; \x3cspan onclick\x3d"$$._updateIframe( this);" class\x3d"edui-clickable"\x3e'+c.getLang("modify")+"\x3c/span\x3e\x3c/nobr\x3e");e?(h.getDom("content").innerHTML=e,h.anchorEl=d,h.showAnchor(h.anchorEl)):h.hide()}}),c.addListener("selectionchange",function(b,d){if(d){var e="",f,g=c.selection.getRange().getClosedNode();f=c.ui._dialogs;if(g&&"IMG"==g.tagName){var k="insertimageDialog";if(-1!=g.className.indexOf("edui-faked-video")||-1!=g.className.indexOf("edui-upload-video"))k="insertvideoDialog";-1!=g.className.indexOf("edui-faked-webapp")&&(k="webappDialog");-1!=g.src.indexOf("http://api.map.baidu.com")&&(k="mapDialog");-1!=g.className.indexOf("edui-faked-music")&&(k="musicDialog");-1!=g.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(k="gmapDialog");g.getAttribute("anchorname")&&(k="anchorDialog",e=h.formatHtml("\x3cnobr\x3e"+c.getLang("property")+': \x3cspan onclick\x3d$$._onImgEditButtonClick("anchorDialog") class\x3d"edui-clickable"\x3e'+c.getLang("modify")+"\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._onRemoveButtonClick('anchor') class\x3d\"edui-clickable\"\x3e"+c.getLang("delete")+"\x3c/span\x3e\x3c/nobr\x3e"));g.getAttribute("word_img")&&(c.word_img=[g.getAttribute("word_img")],k="wordimageDialog");if(a.hasClass(g,"loadingclass")||a.hasClass(g,"loaderrorclass"))k="";if(!f[k])return;if("insertimageDialog"==k){edustr='$EDITORUI["'+h.getUid()+"\"]._onImgEditButtonClick('"+k+"')";eval(edustr);return}f="\x3cnobr\x3e"+c.getLang("property")+': \x3cspan onclick\x3d$$._onImgSetFloat("none") class\x3d"edui-clickable"\x3e'+c.getLang("default")+'\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._onImgSetFloat("left") class\x3d"edui-clickable"\x3e'+c.getLang("justifyleft")+'\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._onImgSetFloat("right") class\x3d"edui-clickable"\x3e'+c.getLang("justifyright")+'\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d$$._onImgSetFloat("center") class\x3d"edui-clickable"\x3e'+c.getLang("justifycenter")+"\x3c/span\x3e\x26nbsp;\x26nbsp;\x3cspan onclick\x3d\"$$._onImgEditButtonClick('"+k+'\');" class\x3d"edui-clickable"\x3e'+c.getLang("modify")+"\x3c/span\x3e\x3c/nobr\x3e";!e&&(e=h.formatHtml(f))}if(c.ui._dialogs.linkDialog){var l=c.queryCommandValue("link"),m;l&&(m=l.getAttribute("_href")||l.getAttribute("href",2))&&(f=m,30<m.length&&(f=m.substring(0,20)+"..."),e&&(e+='\x3cdiv style\x3d"height:5px;"\x3e\x3c/div\x3e'),e+=h.formatHtml("\x3cnobr\x3e"+c.getLang("anthorMsg")+': \x3ca target\x3d"_blank" href\x3d"'+m+'" title\x3d"'+m+'" \x3e'+f+'\x3c/a\x3e \x3cspan class\x3d"edui-clickable" onclick\x3d"$$._onEditButtonClick();"\x3e'+c.getLang("modify")+'\x3c/span\x3e \x3cspan class\x3d"edui-clickable" onclick\x3d"$$._onRemoveButtonClick(\'unlink\');"\x3e '+c.getLang("clear")+"\x3c/span\x3e\x3c/nobr\x3e"),h.showAnchor(l))}e?(h.getDom("content").innerHTML=e,h.anchorEl=g||l,h.showAnchor(h.anchorEl)):h.hide()}}))},_initToolbars:function(){for(var a=this.editor,b=this.toolbars||[],c=[],e=0;e<b.length;e++){for(var f=b[e],g=new t.editor.ui.Toolbar({theme:a.options.theme}),h=0;h<f.length;h++){var n=f[h],r=null;if("string"==typeof n){n=n.toLowerCase();if("emotion"==n&&1==this.ismobile)continue;"|"==n&&(n="Separator");"||"==n&&(n="Breakline");t.editor.ui[n]&&(r=new t.editor.ui[n](a));if("fullscreen"==n){c&&c[0]?c[0].items.splice(0,0,r):r&&g.items.splice(0,0,r);continue}}else r=n;r&&r.id&&g.add(r)}c[e]=g}d.each(UE._customizeUI,function(b,c){var d,e;if(b.id&&b.id!=a.key)return!1;if(d=b.execFn.call(a,a,c))e=b.index,void 0===e&&(e=g.items.length),g.add(d,e)});this.toolbars=c},getHtmlTpl:function(){return'\x3cdiv id\x3d"##" class\x3d"%%"\x3e\x3cdiv id\x3d"##_toolbarbox" class\x3d"%%-toolbarbox"\x3e'+(this.toolbars.length?'\x3cdiv id\x3d"##_toolbarboxouter" class\x3d"%%-toolbarboxouter"\x3e\x3cdiv class\x3d"%%-toolbarboxinner"\x3e'+this.renderToolbarBoxHtml()+"\x3c/div\x3e\x3c/div\x3e":"")+'\x3cdiv id\x3d"##_toolbarmsg" class\x3d"%%-toolbarmsg" style\x3d"display:none;"\x3e\x3cdiv id \x3d "##_upload_dialog" class\x3d"%%-toolbarmsg-upload" onclick\x3d"$$.showWordImageDialog();"\x3e'+this.editor.getLang("clickToUpload")+'\x3c/div\x3e\x3cdiv class\x3d"%%-toolbarmsg-close" onclick\x3d"$$.hideToolbarMsg();"\x3ex\x3c/div\x3e\x3cdiv id\x3d"##_toolbarmsg_label" class\x3d"%%-toolbarmsg-label"\x3e\x3c/div\x3e\x3cdiv style\x3d"height:0;overflow:hidden;clear:both;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"##_message_holder" class\x3d"%%-messageholder"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"##_iframeholder" class\x3d"%%-iframeholder"\x3e\x3c/div\x3e\x3cdiv id\x3d"##_bottombar" class\x3d"%%-bottomContainer"\x3e\x3ctable\x3e\x3ctr\x3e\x3ctd id\x3d"##_elementpath" class\x3d"%%-bottombar"\x3e\x3c/td\x3e\x3ctd id\x3d"##_wordcount" class\x3d"%%-wordcount"\x3e\x3c/td\x3e\x3ctd id\x3d"##_scale" class\x3d"%%-scale"\x3e\x3cdiv class\x3d"%%-icon"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv id\x3d"##_scalelayer"\x3e\x3c/div\x3e\x3c/div\x3e'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var a=[],b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},setFullScreen:function(a){var b=this.editor,c=b.container.parentNode.parentNode;if(this._fullscreen!=a){this._fullscreen=a;this.editor.fireEvent("beforefullscreenchange",a);if(t.editor.browser.gecko)var d=b.selection.getRange().createBookmark();if(a){for(;"BODY"!=c.tagName;){var f=t.editor.dom.domUtils.getComputedStyle(c,"position");e.push(f);c.style.position="static";c=c.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=b.iframe.parentNode.offsetWidth;this._bakAutoHeight&&(b.autoHeightEnabled=!1,this.editor.disableAutoHeight());document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;b.iframe.parentNode.style.width="";this._updateFullScreen()}else{for(;"BODY"!=c.tagName;)c.style.position=e.shift(),c=c.parentNode;this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;this._bakAutoHeight&&(b.autoHeightEnabled=!0,this.editor.enableAutoHeight());document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;b.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(r.gecko&&"true"===b.body.contentEditable){var g=document.createElement("input");document.body.appendChild(g);b.body.contentEditable=!1;setTimeout(function(){g.focus();setTimeout(function(){b.body.contentEditable=!0;b.fireEvent("fullscreenchanged",a);b.selection.getRange().moveToBookmark(d).select(!0);t.editor.dom.domUtils.remove(g);a&&window.scroll(0,0)},0)},0)}"true"===b.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",a),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var a=c.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(1*this.getDom().style.zIndex+100);c.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0);if(r.gecko)try{window.onresize()}catch(k){}}},_updateElementPath:function(){var a=this.getDom("elementpath"),b;if(this.elementPathEnabled&&(b=this.editor.queryCommandValue("elementpath"))){for(var c=[],d=0,e;e=b[d];d++)c[d]=this.formatHtml('\x3cspan unselectable\x3d"on" onclick\x3d"$$.editor.execCommand(\x26quot;elementpath\x26quot;, \x26quot;'+d+'\x26quot;);"\x3e'+e+"\x3c/span\x3e");a.innerHTML='\x3cdiv class\x3d"edui-editor-breadcrumb" onmousedown\x3d"return false;"\x3e'+this.editor.getLang("elementPathTip")+": "+c.join(" \x26gt; ")+"\x3c/div\x3e"}else a.style.display="none"},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="";a.style.display="none";this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="";this.elementPathEnabled=!0;this._updateElementPath()},_scale:function(){function b(){K=a.getXY(h);L||(L=g.options.minFrameHeight+t.offsetHeight+w.offsetHeight);F.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity\x3d40);width:"+h.offsetWidth+"px;height:"+h.offsetHeight+"px;z-index:"+(g.options.zIndex+1);a.on(f,"mousemove",c);a.on(n,"mouseup",d);a.on(f,"mouseup",d)}function c(a){e();a=a||window.event;Q=a.pageX||f.documentElement.scrollLeft+a.clientX;G=a.pageY||f.documentElement.scrollTop+a.clientY;O=Q-K.x;B=G-K.y;O>=P&&(H=!0,F.style.width=O+"px");B>=L&&(H=!0,F.style.height=B+"px")}function d(){H&&(H=!1,g.ui._actualFrameWidth=F.offsetWidth-2,h.style.width=g.ui._actualFrameWidth+"px",g.setHeight(F.offsetHeight-w.offsetHeight-t.offsetHeight-2,!0));F&&(F.style.display="none");e();a.un(f,"mousemove",c);a.un(n,"mouseup",d);a.un(f,"mouseup",d)}function e(){r.ie?f.selection.clear():window.getSelection().removeAllRanges()}var f=document,g=this.editor,h=g.container,n=g.document,t=this.getDom("toolbarbox"),w=this.getDom("bottombar"),E=this.getDom("scale"),F=this.getDom("scalelayer"),H=!1,K=null,L=0,P=g.options.minFrameWidth,Q=0,G=0,O=0,B=0,A=this;this.editor.addListener("fullscreenchanged",function(b,c){if(c)A.disableScale();else if(A.editor.options.scaleEnabled){A.enableScale();var d=A.editor.document.createElement("span");A.editor.body.appendChild(d);A.editor.body.style.height=Math.max(a.getXY(d).y,A.editor.iframe.offsetHeight-20)+"px";a.remove(d)}});this.enableScale=function(){1!=g.queryCommandState("source")&&(E.style.display="",this.scaleEnabled=!0,a.on(E,"mousedown",b))};this.disableScale=function(){E.style.display="none";this.scaleEnabled=!1;a.un(E,"mousedown",b)}},isFullScreen:function(){return this._fullscreen},postRender:function(){b.prototype.postRender.call(this);for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].postRender();var c=this,d,e=t.editor.dom.domUtils,f=function(){clearTimeout(d);d=setTimeout(function(){c._updateFullScreen()})};e.on(window,"resize",f);c.addListener("destroy",function(){e.un(window,"resize",f);clearTimeout(d)})},showToolbarMsg:function(a,b){this.getDom("toolbarmsg_label").innerHTML=a;this.getDom("toolbarmsg").style.display="";b||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();a.style.zoom="1"==a.style.zoom?"100%":"1"}};d.inherits(f,t.editor.ui.UIBase);var g={};UE.ui.Editor=function(b){var c=new UE.Editor(b);c.options.editor=c;d.loadFile(document,{href:c.options.themePath+c.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var e=c.render;c.render=function(b){b.constructor===String&&(c.key=b,g[b]=c);d.domReady(function(){function d(){c.setOpt({labelMap:c.options.labelMap||c.getLang("labelMap")});new f(c.options);if(b&&(b.constructor===String&&(b=document.getElementById(b)),b&&b.getAttribute("name")&&(c.options.textarea=b.getAttribute("name")),b&&/script|textarea/ig.test(b.tagName))){var d=document.createElement("div");b.parentNode.insertBefore(d,b);var g=b.value||b.innerHTML;c.options.initialContent=/^[\t\r\n ]*$/.test(g)?c.options.initialContent:g.replace(/>[\n\r\t]+([ ]{4})+/g,"\x3e").replace(/[\n\r\t]+([ ]{4})+</g,"\x3c").replace(/>[\n\r\t]+</g,"\x3e\x3c");b.className&&(d.className=b.className);b.style.cssText&&(d.style.cssText=b.style.cssText);/textarea/i.test(b.tagName)?(c.textarea=b,c.textarea.style.display="none"):b.parentNode.removeChild(b);b.id&&(d.id=b.id,a.removeAttributes(b,"id"));b=d;b.innerHTML=""}a.addClass(b,"edui-"+c.options.theme);c.ui.render(b);d=c.options;c.container=c.ui.getDom();for(var g=a.findParents(b,!0),h=[],k=0,l;l=g[k];k++)h[k]=l.style.display,l.style.display="block";d.initialFrameWidth?d.minFrameWidth=d.initialFrameWidth:(d.minFrameWidth=d.initialFrameWidth=b.offsetWidth,k=b.style.width,/%$/.test(k)&&(d.initialFrameWidth=k));d.initialFrameHeight?d.minFrameHeight=d.initialFrameHeight:d.initialFrameHeight=d.minFrameHeight=b.offsetHeight;for(k=0;l=g[k];k++)l.style.display=h[k];b.style.height&&(b.style.height="");c.container.style.width=d.initialFrameWidth+(/%$/.test(d.initialFrameWidth)?"":"px");c.container.style.zIndex=d.zIndex;e.call(c,c.ui.getDom("iframeholder"));c.fireEvent("afteruiready")}c.langIsReady?d():c.addListener("langReady",d)})};return c};UE.getEditor=function(a,b){var c=g[a];c||(c=g[a]=new UE.ui.Editor(b),c.render(a));return c};UE.delEditor=function(a){var b;if(b=g[a])b.key&&b.destroy(),delete g[a]};UE.registerUI=function(a,b,c,e){d.each(a.split(/\s+/),function(a){UE._customizeUI[a]={id:e,execFn:b,index:c}})}})();UE.registerUI("message",function(f){function d(){var a=e.ui.getDom("toolbarbox");a&&(b.style.top=a.offsetHeight+3+"px");b.style.zIndex=Math.max(e.options.zIndex,e.iframe.style.zIndex)+1}var c=t.editor.ui.Message,b,a=[],e=f;e.addListener("ready",function(){b=document.getElementById(e.ui.id+"_message_holder");d();setTimeout(function(){d()},500)});e.addListener("showmessage",function(f,g){g=n.isString(g)?{content:g}:g;var h=new c({timeout:g.timeout,type:g.type,content:g.content,keepshow:g.keepshow,editor:e}),l=g.id||"msg_"+(+new Date).toString(36);h.render(b);a[l]=h;h.reset(g);d();return l});e.addListener("updatemessage",function(c,d,e){e=n.isString(e)?{content:e}:e;c=a[d];c.render(b);c&&c.reset(e)});e.addListener("hidemessage",function(b,c){var d=a[c];d&&d.hide()})});UE.registerUI("autosave",function(f){f.on("afterautosave",function(){})})})();